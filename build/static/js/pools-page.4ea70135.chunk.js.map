{"version":3,"sources":["components/Animation/index.ts","components/Icons/AntiSnippingAttack.tsx","components/PoolList/styled.tsx","hooks/useMarquee.ts","assets/svg/stable.svg","components/PoolList/ItemCard/ItemCardInfoRow.tsx","components/PoolList/ItemCard/TabDetailsItems.tsx","components/PoolList/ItemCard/TabInfoItems.tsx","components/PoolList/ItemCard/TabYourLiquidityItems.tsx","components/PoolList/ItemCard/TabYourStakedItems.tsx","components/PoolList/ItemCard/index.tsx","components/PoolList/ItemCard/ItemCardGroup.tsx","components/PoolList/ListItem.tsx","components/PoolList/PoolDetailModal.tsx","components/PoolList/index.tsx","assets/images/dropdown.svg","components/PoolsCurrencyInputPanel/index.tsx","assets/svg/ziczac.svg","pages/Pools/FarmingPoolsMarquee.tsx","pages/Pools/InstructionAndGlobalData.tsx","state/prommPools/useGetElasticPools/useGetElasticPoolsV1.ts","state/prommPools/useGetElasticPools/useGetElasticPoolsV2.ts","state/prommPools/useGetElasticPools/index.ts","pages/ProAmmPools/CardItem.tsx","assets/svg/view_positions.svg","pages/ProAmmPools/ListItem.tsx","pages/ProAmmPools/index.tsx","pages/Pools/ModalEthPoWAck.tsx","pages/Pools/index.tsx","pages/Pools/styleds.tsx","state/about/hooks.ts","hooks/useAggregatorVolume.ts","hooks/useAggregatorAPR.ts"],"names":["FadeInAnimation","styled","div","$isAnimate","AntiSnippingAttack","size","width","height","viewBox","fill","xmlns","d","ListItemGroupContainer","theme","border","isDisableShowTwoPools","isShowExpandedPools","rgba","tableHeader","background","ItemCardGroupContainer","TableRow","isShowBorderBottom","DataText","Flex","text7","ButtonWrapper","PoolAddressContainer","AddressAndAMPContainer","AddressWrapper","TextAMP","subText","TokenPairContainer","TextTokenPair","TextAMPLiquidity","AMPLiquidityAndTVLContainer","TextTVL","TextShowMorePools","primary","disabled","mediaWidth","upToMedium","DashedDivider","bg14","ChevronContainer","StyledItemCard","HeaderContainer","HeaderTitle","text","HeaderAMPAndAddress","TokenRatioContainer","tabBackgound","TokenRatioGrid","Progress","value","tabActive","TokenRatioName","TokenRatioPercent","TabContainer","TabItem","active","InformationContainer","ButtonGroupContainer","FooterContainer","useMarquee","marqueeContainerRef","useRef","useState","endScroll","setEndScroll","args","useDeepCompareEffect","itv","current","lastScrollLeft","scrollLeft","setInterval","clientWidth","scrollWidth","Math","abs","scrollTo","left","clearInterval","_path","_path2","_path3","_path4","_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgStable","_ref","svgRef","title","titleId","props","ref","id","fillRule","clipRule","ForwardRef","Field","Value","ItemCardInfoRow","name","infoHelperText","currency","justifyContent","InfoHelper","alignItems","style","gap","CurrencyLogo","ItemCardInfoRowPriceRange","poolData","formatPriceMin","price","toSignificant","formatPriceMax","equalTo","Fraction","marginLeft","token0","symbol","token1","priceRangeCalcBySubgraphPool","TabDetailsItems","useActiveWeb3React","chainId","isEVM","networkInfo","amp","divide","JSBI","BigInt","SUBGRAPH_AMP_MULTIPLIER","ampLiquidity","formattedNum","parseFloat","reserveUSD","factories","useMultipleContractSingleData","DMM_POOL_INTERFACE","to","isNewStaticFeePool","result","classic","static","factory","AMP_LIQUIDITY_HINT","ONLY_STATIC_FEE_CHAINS","undefined","fee","feeRangeCalc","TabInfoItems","myLiquidity","useTheme","volume","oneDayVolumeUSD","oneDayVolumeUntracked","oneDayFeeUSD","oneDayFeeUntracked","totalValueLocked","oneYearFL","getTradingFeeAPR","toFixed","farm","useActiveAndUniqueFarmsData","data","find","f","toLowerCase","isFarmingPool","sx","fontSize","fontWeight","color","lineHeight","Number","MAX_ALLOW_APY","FarmingPoolAPRCell","tooltipPlacement","poolAPR","fairlaunchAddress","fairLaunchAddress","pid","getMyLiquidity","TabYourLiquidityItems","parseSubgraphPoolData","currency0","currency1","reserve0","reserve1","totalSupply","liquidityTokenBalance","tryParseAmount","NativeCurrencies","pooledToken0","multiply","pooledToken1","yourShareOfPool","Percent","quotient","lessThan","ONE_BIPS","TabYourStakedItems","useUserStakedBalance","userStakedToken0Balance","userStakedToken1Balance","userStakedBalance","userStakedBalanceUSD","RESERVE_USD_DECIMALS","TAB","ItemCard","history","useHistory","useUrlOnEthPowAck","setUrlOnEthPoWAck","toggleEthPowAckModal","useToggleEthPowAckModal","useCheckIsFarmingPool","shortenPoolAddress","shortenAddress","virtualReserve0","virtualReserve1","realPercentToken0","asFraction","add","realPercentToken1","subtract","isWarning","percentToken0","percentToken1","above1000","useMedia","activeTabIndex","setActiveTabIndex","isHaveLiquidity","useSharedPoolIdManager","setSharedPoolId","position","top","right","noArrow","textReverse","warning","Copy","toCopy","flexDirection","margin","onClick","greaterThan","Button","as","Link","currencyId","padding","url","ChainId","ETHW","push","Divider","href","DMM_ANALYTICS_URL","ItemCardGroup","sortedFilteredSubgraphPoolsObject","userLiquidityPositions","expandedPoolKey","setExpandedPoolKey","poolKey","isShowTwoPools","isShowAllPools","setIsShowAllPools","expandedPools","get","renderPools","slice","isDisableShowAllPools","onUpdateExpandedPoolKeyAndShowAllPools","prev","cursor","transition","transform","map","index","isFirstPoolInGroup","ListItemGroup","dispatch","useDispatch","togglePoolDetailModal","usePoolDetailModalToggle","fee24H","minWidth","rowGap","placement","apr","marginTop","Loader","paddingRight","marginRight","minHeight","e","stopPropagation","buttonBlack","event","setSelectedPool","buttonGray","visibility","ListItem","PoolDetailModal","poolDetailModalOpen","useModalOpen","ApplicationModal","POOL_DETAIL","selectedPool","useSelectedPool","Modal","isOpen","onDismiss","maxWidth","maxHeight","PageWrapper","PaginationInput","TableHeader","SORT_FIELD","PoolList","currencies","searchValue","isShowOnlyActiveFarmPools","onlyShowStable","shouldShowLowTVLPools","sortDirection","setSortDirection","sortedColumn","setSortedColumn","useAllPoolsData","loadingPoolsData","loading","subgraphPoolsData","account","useResetPools","userLiquidityPositionsQueryResult","useUserLiquidityPositions","loadingUserLiquidityPositions","liquidityPositions","transformedUserLiquidityPositions","forEach","pool","listComparator","useCallback","poolA","poolB","feeA","feeB","toString","volumeA","volumeB","farms","sortedFilteredSubgraphPoolsData","useMemo","res","sort","farmAddresses","filter","includes","ca","CURRENCY_A","cb","CURRENCY_B","wca","wrapped","wcaAddress","address","wcb","wcbAddress","search","stableList","STABLE_COINS_ADDRESS","item","currentPage","setCurrentPage","useEffect","Map","prevValue","set","concat","sortedFilteredPaginatedSubgraphPoolsList","startIndex","endIndex","Array","from","firstPoolHasMoreThanTwoExpandedPools","sharedPoolId","openShareModal","useOpenModal","SHARE","isShareModalOpen","chainRoute","route","shareUrl","window","location","origin","LocalLoader","marginBottom","AMP_HINT","textAlign","Pagination","pageSize","onPageChange","newPage","totalCount","haveBg","ShareModal","SvgDropdown","stroke","InputRow","flexRowNoWrap","selected","CurrencySelect","button","bg2","darken","Aligner","span","StyledDropDown","DropDown","StyledX","X","InputPanel","flexColumnNoWrap","Container","LogoNameWrapper","StyledTokenName","PoolsCurrencyInputPanel","onCurrencySelect","onClearCurrency","disableCurrencySelect","pair","otherCurrency","showCommonBases","modalOpen","setModalOpen","handleDismissSearch","nativeCurrency","useCurrencyConvertedToNative","borderRadius","className","Boolean","CurrencySearchModal","selectedCurrency","otherSelectedCurrency","StyledLink","MarqueeItem","address0","address1","useToken","WETH","useParsedQueryString","tab","VERSION","ELASTIC","token0Address","isNative","token1Address","FarmingPoolsMarquee","uniqueAndActiveFarms","useElasticFarms","existedPairs","activePrommFarm","pools","flat","endTime","Date","increaseRef","CLASSIC","Title","TitleText","MarqueeSection","MarqueeWrapper","Marquee","upToSmall","SvgZiczac","Wrapper","ShowDetailBtn","DetailWrapper","DetailWrapperClassic","DetailItem","GlobalData","useGlobalData","globalData","dmmFactories","aggregatorData","GlobalDataItem","GlobalDataItemTitle","GlobalDataItemValue","totalVolume","formatBigLiquidity","totalLiquidityUSD","Instruction","isMobile","show","setShow","InstructionItem","flex","usePoolBlocks","last24h","dayjs","startOf","unix","blocks","setBlocks","getBlocks","getBlocksFromTimestamps","blockLast24h","number","useGetElasticPoolsV1","poolAddresses","skip","dataClient","NETWORKS_INFO","elasticClient","MAINNET","useQuery","PROMM_POOLS_BULK","client","fetchPolicy","error","loading24","error24","data24","anyError","anyLoading","isLoading","isError","formatted","parsed","reduce","acc","parsed24","oneDay","volumeUSDLast24h","volumeUSD","tvlUSD","totalValueLockedUSD","tvlUSDLast24h","tvlToken0","totalValueLockedToken0","tvlToken1","totalValueLockedToken1","feeTier","parseInt","liquidity","sqrtPrice","reinvestL","tick","decimals","token0Price","token1Price","ELASTIC_BASE_FEE_UNIT","parsedPoolData","useGetElasticPoolsV2","shouldSkip","CHAINS_SUPPORT_NEW_POOL_FARM_API","poolFarmRoute","useSWRImmutable","process","Promise","resolve","fetch","then","resp","json","refreshInterval","isValidating","volumeUsd","volumeUsdOneDayAgo","totalValueLockedUsd","farmAPR","farmApr","useGetElasticPools","shouldRunV2","responseV1","responseV2","getPrommAnalyticLink","poolAddress","PROMM_ANALYTICS_URL","ButtonIcon","ButtonEmpty","ProAmmPoolCardItem","onShared","userPositions","idx","setIsOpen","allTokens","useAllTokens","isAddressString","Token","nativeToken","isToken0WETH","isToken1WETH","token0Slug","token0Symbol","token1Slug","token1Symbol","hasLiquidity","p","now","overflow","formatDollarAmount","marginY","_rect","SvgViewPositions","opacity","rx","hoverable","css","ProAmmPoolListItem","noBorderBottom","mixpanelHandler","useMixpanel","borderTopLeftRadius","text3","MIXPANEL_TYPE","ELASTIC_ADD_LIQUIDITY_IN_LIST_INITIATED","token_1","token_2","fee_tier","ClickableText","Text","ProAmmPoolList","allRewards","Set","rewardTokens","rw","tokenPriceMap","useTokenPrices","totalFarmRewardUSDByPoolId","v","totalRewards","cur","toExact","farmDuration","startTime","caId","cbId","useTopPoolAddresses","addresses","poolDataLoading","poolDatas","useUserProMMPositions","loadingUserPositions","userLiquidityUsdByPool","aFarmAPR","bFarmAPR","pairDatas","filteredPools","values","activePoolFarmAddress","poolsGroupByPair","pairs","pairId","a","b","page","setPage","pageData","Fragment","interval","AckButton","ButtonPrimary","altDisabledStyle","ModalEthPoWAck","isModalOpen","ETH_POW_ACK","toggleOpenThisModal","role","ButtonPrimaryWithHighlight","keyframes","highlight","TextWithTooltip","Pools","match","params","currencyIdA","currencyIdB","above1260","below1124","setIsShowOnlyActiveFarmPools","setShowLowTVLPools","searchValueInQs","highlightCreateButton","debouncedSearchValue","useDebounce","trim","setOnlyShowStable","shouldHighlightCreatePoolButton","setUrlOnEthPowAck","onSearch","replace","pathname","useSyncNetworkParamWithStore","currencyA","useCurrency","currencyB","handleCurrencyASelect","newCurrencyIdA","handleCurrencyBSelect","newCurrencyIdB","handleClearCurrencyA","handleClearCurrencyB","handleClickCreatePoolButton","CREATE_POOL_INITITATED","ELASTIC_CREATE_POOL_INITIATED","ClassicElasticTab","Tutorial","type","TutorialType","ELASTIC_POOLS","CLASSIC_POOLS","Toggle","isActive","toggle","Search","placeholder","columnGap","SwitchLocaleLink","PoolsPageWrapper","ToolbarWrapper","CurrencyWrapper","SelectPairInstructionWrapper","IconWrapper","lighten","setGlobalData","AGGREGATOR_STATS_API","useSWR","r","onErrorRetry","_key","_config","revalidate","retryCount","status","setTimeout","console","message","useAggregatorVolume","aggregatorAPR","useAggregatorAPR","getSumValues","results","field","total","sum","getResultByChainIds","chainIds","elasticChains","ELASTIC_NOT_SUPPORTED","elasticPromises","chain","query","GLOBAL_DATA_ELASTIC","all","promises","catch","elasticResult","Error","tvlElastic","allChainPromises","classicClient","GLOBAL_DATA","queryResult","totalVolumeUSD","totalVolumeETH","totalFeeUSD","untrackedVolumeUSD","untrackedFeeUSD","totalLiquidityETH","totalAmplifiedLiquidityUSD","totalAmplifiedLiquidityETH","EVM_MAINNET_NETWORKS","last24hVolume","maxApr","max_apr","totalEarnings","total_earnings","getGlobalData"],"mappings":"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","file":"static/js/pools-page.4ea70135.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nexport const FadeInAnimation = styled.div<{ $isAnimate?: boolean }>`\r\n  @keyframes fadeIn {\r\n    0% {\r\n      opacity: 0;\r\n      transform: translateY(-10%);\r\n    }\r\n    100% {\r\n      opacity: 1;\r\n      transform: translateY(0%);\r\n    }\r\n  }\r\n  animation-name: fadeIn;\r\n  animation-iteration-count: 1;\r\n  animation-timing-function: ease-in-out;\r\n  animation-duration: ${({ $isAnimate }) => ($isAnimate ? '0.5s' : 0)};\r\n`\r\n","function AntiSnippingAttack({ size = 24 }: { size?: number }) {\r\n  return (\r\n    <svg width={size || 24} height={size || 24} viewBox={`0 0 64 64`} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n        d=\"M53.5875 30.3751C52.7875 19.7376 44.275 11.2126 33.625 10.4126C33.0875 10.3751 32.55 10.3501 32 10.3501C31.45 10.3501 30.9125 10.3751 30.375 10.4126C26.475 10.7001 22.8625 12.0251 19.8125 14.1251L22.15 16.4626C24.5625 14.9251 27.375 13.9376 30.375 13.6626C30.9125 13.6126 31.45 13.5876 32 13.5876C32.55 13.5876 33.0875 13.6126 33.625 13.6626C42.475 14.4376 49.55 21.5126 50.325 30.3626C50.375 30.9001 50.4 31.4376 50.4 31.9876C50.4 32.5376 50.375 33.0751 50.325 33.6126C50.0625 36.6126 49.075 39.4251 47.5375 41.8376L49.875 44.1751C51.9625 41.1251 53.2875 37.5001 53.5875 33.6126C53.625 33.0751 53.65 32.5376 53.65 31.9876C53.65 31.4376 53.625 30.9126 53.5875 30.3751ZM41.6625 47.6501C39.2875 49.1251 36.55 50.0751 33.625 50.3251C33.0875 50.3751 32.55 50.4001 32 50.4001C31.45 50.4001 30.9125 50.3751 30.375 50.3251C21.525 49.5501 14.45 42.4751 13.675 33.6251C13.625 33.0876 13.6 32.5501 13.6 32.0001C13.6 31.4501 13.625 30.9126 13.675 30.3751C13.9375 27.4376 14.8875 24.7126 16.35 22.3376L14 19.9876C11.975 23.0001 10.7 26.5501 10.4125 30.3751C10.375 30.9126 10.35 31.4501 10.35 32.0001C10.35 32.5501 10.375 33.0876 10.4125 33.6251C11.2 44.2751 19.725 52.7876 30.375 53.5876C30.9125 53.6251 31.45 53.6501 32 53.6501C32.55 53.6501 33.0875 53.6251 33.625 53.5876C37.45 53.3001 41 52.0251 44.0125 50.0001L41.6625 47.6501ZM17.8125 15.6626C17 16.3751 16.225 17.1501 15.525 17.9751L17.825 20.2751C18.5125 19.4376 19.2875 18.6626 20.1125 17.9626L17.8125 15.6626Z\"\r\n        fill=\"#1D7A5F\"\r\n      />\r\n      <path\r\n        d=\"M32 16.8499C31.1 16.8499 30.375 16.1249 30.375 15.2249V7.6499C30.375 6.7499 31.1 6.0249 32 6.0249C32.9 6.0249 33.625 6.7499 33.625 7.6499V15.2249C33.625 16.1249 32.9 16.8499 32 16.8499Z\"\r\n        fill=\"#27A27E\"\r\n      />\r\n      <path\r\n        d=\"M56.35 33.625H48.775C47.875 33.625 47.15 32.9 47.15 32C47.15 31.1 47.875 30.375 48.775 30.375H56.35C57.25 30.375 57.975 31.1 57.975 32C57.975 32.9 57.25 33.625 56.35 33.625Z\"\r\n        fill=\"#27A27E\"\r\n      />\r\n      <path\r\n        d=\"M32 57.9749C31.1 57.9749 30.375 57.2499 30.375 56.3499V48.7749C30.375 47.8749 31.1 47.1499 32 47.1499C32.9 47.1499 33.625 47.8749 33.625 48.7749V56.3499C33.625 57.2499 32.9 57.9749 32 57.9749Z\"\r\n        fill=\"#27A27E\"\r\n      />\r\n      <path\r\n        d=\"M15.225 33.625H7.65003C6.75002 33.625 6.02502 32.9 6.02502 32C6.02502 31.1 6.75002 30.375 7.65003 30.375H15.225C16.125 30.375 16.85 31.1 16.85 32C16.85 32.9 16.125 33.625 15.225 33.625Z\"\r\n        fill=\"#27A27E\"\r\n      />\r\n      <path\r\n        d=\"M28.6125 26.4624L31.05 28.8999C29.95 29.2374 29.1 30.1499 28.8375 31.2874L26.35 28.7999C26.9 27.8374 27.675 27.0374 28.6125 26.4624Z\"\r\n        fill=\"#31CB9E\"\r\n      />\r\n      <path\r\n        d=\"M35.1 32.9497L37.5375 35.3872C36.9625 36.3247 36.1625 37.0997 35.2 37.6497L32.7125 35.1622C33.85 34.9122 34.7625 34.0622 35.1 32.9497Z\"\r\n        fill=\"#31CB9E\"\r\n      />\r\n      <path\r\n        d=\"M48.3375 46.1872C47.625 47.0122 46.85 47.7747 46.025 48.4747L43.725 46.1747C44.5625 45.4872 45.3375 44.7122 46.0375 43.8872L48.3375 46.1872Z\"\r\n        fill=\"#31CB9E\"\r\n      />\r\n      <path\r\n        d=\"M57.4124 57.5624C57.0999 57.8749 56.6749 58.0374 56.2624 58.0374C55.8499 58.0374 55.4249 57.8749 55.1124 57.5624L6.28745 8.7374C5.64995 8.0999 5.64995 7.0749 6.28745 6.4374C6.59995 6.1249 7.02495 5.9624 7.43745 5.9624C7.84995 5.9624 8.27495 6.1249 8.58745 6.4374L57.3999 55.2499C58.0374 55.8874 58.0374 56.9249 57.4124 57.5624Z\"\r\n        fill=\"#31CB9E\"\r\n      />\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport default AntiSnippingAttack\r\n","import { rgba } from 'polished'\r\nimport { Flex } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nexport const ListItemGroupContainer = styled.div<{ isDisableShowTwoPools: boolean; isShowExpandedPools: boolean }>`\r\n  border-bottom: ${({ theme }) => `1px solid ${theme.border}`};\r\n  cursor: ${({ isDisableShowTwoPools }) => (isDisableShowTwoPools ? 'default' : 'pointer')};\r\n  background-color: ${({ theme, isShowExpandedPools }) =>\r\n    isShowExpandedPools ? rgba(theme.tableHeader, 0.6) : theme.background};\r\n\r\n  &:hover {\r\n    ${({ theme, isDisableShowTwoPools, isShowExpandedPools }) =>\r\n      !isDisableShowTwoPools && !isShowExpandedPools && `background-color: ${theme.tableHeader}`};\r\n  }\r\n`\r\n\r\nexport const ItemCardGroupContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  margin-bottom: 28px;\r\n`\r\n\r\nexport const TableRow = styled.div<{ isShowExpandedPools?: boolean; isShowBorderBottom?: boolean }>`\r\n  display: grid;\r\n  grid-gap: 1.5rem;\r\n  grid-template-columns: 1.5fr 1.5fr 2fr 0.75fr 1fr 1fr 1fr 1.5fr;\r\n  padding: 24px 16px;\r\n  font-size: 14px;\r\n  align-items: center;\r\n  height: fit-content;\r\n  position: relative;\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n    width: 86.36%; // 100% - (1.5fr / grid-template-columns)\r\n    border-bottom: ${({ theme, isShowBorderBottom }) =>\r\n      isShowBorderBottom ? `1px solid ${rgba(theme.border, 0.5)}` : 'none'};\r\n  }\r\n`\r\n\r\nexport const DataText = styled(Flex)`\r\n  color: ${({ theme }) => theme.text7};\r\n  flex-direction: column;\r\n`\r\n\r\nexport const ButtonWrapper = styled(Flex)`\r\n  justify-content: flex-end;\r\n  gap: 4px;\r\n  align-items: center;\r\n`\r\n\r\nexport const PoolAddressContainer = styled(Flex)`\r\n  align-items: center;\r\n`\r\n\r\nexport const AddressAndAMPContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n`\r\n\r\nexport const AddressWrapper = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n`\r\n\r\nexport const TextAMP = styled.div`\r\n  font-size: 12px;\r\n  color: ${({ theme }) => theme.subText};\r\n`\r\n\r\nexport const TokenPairContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n`\r\n\r\nexport const TextTokenPair = styled.div``\r\n\r\nexport const TextAMPLiquidity = styled.div``\r\n\r\nexport const AMPLiquidityAndTVLContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 8px;\r\n`\r\n\r\nexport const TextTVL = styled.div`\r\n  font-size: 12px;\r\n  color: ${({ theme }) => theme.subText};\r\n`\r\n\r\nexport const TextShowMorePools = styled.div<{ disabled: boolean }>`\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  color: ${({ theme }) => theme.primary};\r\n  grid-column: 2 / -1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 24px;\r\n\r\n  ${({ disabled }) => (disabled ? `opacity: 0.5;` : ``)}\r\n  &:hover {\r\n    ${({ disabled }) => (!disabled ? `opacity: 0.7;` : ``)}\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    padding: 0;\r\n  `}\r\n`\r\n\r\nexport const DashedDivider = styled.div`\r\n  ${({ theme }) => `\r\n    border-bottom: 1px dashed ${theme.bg14};\r\n  `}\r\n`\r\n\r\nexport const ChevronContainer = styled.div`\r\n  margin-left: 8px;\r\n`\r\n\r\nexport const StyledItemCard = styled.div`\r\n  border-radius: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  position: relative;\r\n  min-width: 392px;\r\n  background: ${({ theme }) => theme.background};\r\n  padding: 20px;\r\n  overflow: hidden;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    min-width: revert;\r\n    padding: 16px;\r\n  `}\r\n`\r\n\r\nexport const HeaderContainer = styled.div`\r\n  display: grid;\r\n  grid-template-rows: auto auto;\r\n  grid-template-columns: 1fr auto;\r\n  gap: 4px;\r\n`\r\n\r\nexport const HeaderTitle = styled.div`\r\n  font-size: 20px;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.text};\r\n  grid-column: 1 / 1;\r\n  grid-row: 1 / 1;\r\n  line-height: 24px;\r\n`\r\n\r\nexport const HeaderAMPAndAddress = styled.div`\r\n  display: flex;\r\n  gap: 4px;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.subText};\r\n  grid-column: 1 / 1;\r\n  grid-row: 2 / 2;\r\n  line-height: 16px;\r\n`\r\n\r\nexport const TokenRatioContainer = styled.div`\r\n  background: ${({ theme }) => theme.tabBackgound};\r\n  position: relative;\r\n  overflow: hidden;\r\n  padding: 4px;\r\n  border-radius: 999px;\r\n`\r\n\r\nexport const TokenRatioGrid = styled.div`\r\n  padding: 4px;\r\n  display: grid;\r\n  grid-template-columns: auto 1fr 1fr auto;\r\n  grid-template-rows: 1fr;\r\n  gap: 8px;\r\n  isolation: isolate;\r\n`\r\n\r\nexport const Progress = styled.div<{ value: string }>`\r\n  position: absolute;\r\n  top: 4px;\r\n  left: 4px;\r\n  bottom: 4px;\r\n  width: ${({ value }) => value + '%'};\r\n  background: ${({ theme }) => theme.tabActive};\r\n  border-top-left-radius: 999px;\r\n  border-bottom-left-radius: 999px;\r\n`\r\n\r\nexport const TokenRatioName = styled.div`\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n`\r\n\r\nexport const TokenRatioPercent = styled.div`\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.subText};\r\n`\r\n\r\nexport const TabContainer = styled.div`\r\n  width: 100%;\r\n  background: ${({ theme }) => theme.tabBackgound};\r\n  border-radius: 20px;\r\n  display: flex;\r\n  padding: 2px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport const TabItem = styled.div<{ active?: boolean }>`\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  color: ${({ theme, active }) => (active ? theme.text : theme.subText)};\r\n  background: ${({ theme, active }) => (active ? theme.tabActive : 'transparent')};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 6px;\r\n  border-radius: 20px;\r\n  flex-grow: 1;\r\n  flex-basis: 0;\r\n  transition: color 300ms;\r\n`\r\n\r\nexport const InformationContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n`\r\n\r\nexport const ButtonGroupContainer = styled.div`\r\n  display: flex;\r\n  gap: 16px;\r\n\r\n  > * {\r\n    flex: 1;\r\n  }\r\n`\r\n\r\nexport const FooterContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\n","import React, { useRef, useState } from 'react'\r\nimport { useDeepCompareEffect } from 'react-use'\r\n\r\nexport default function useMarquee(...args: any): React.RefObject<HTMLDivElement> {\r\n  const marqueeContainerRef = useRef<HTMLDivElement>(null)\r\n  const [endScroll, setEndScroll] = useState(false)\r\n\r\n  useDeepCompareEffect(() => {\r\n    let itv: NodeJS.Timeout | undefined\r\n    if (marqueeContainerRef && marqueeContainerRef.current && !endScroll) {\r\n      let lastScrollLeft = marqueeContainerRef.current.scrollLeft\r\n      itv = setInterval(() => {\r\n        if (\r\n          marqueeContainerRef.current &&\r\n          marqueeContainerRef.current.scrollLeft + marqueeContainerRef.current.clientWidth <\r\n            marqueeContainerRef.current.scrollWidth - 1\r\n        ) {\r\n          const acceleration = Math.abs(lastScrollLeft - marqueeContainerRef.current.scrollLeft)\r\n          if (acceleration >= 30) {\r\n            setEndScroll(true)\r\n            return\r\n          }\r\n\r\n          if (!endScroll) {\r\n            marqueeContainerRef.current.scrollTo({\r\n              left: marqueeContainerRef.current.scrollLeft + 1,\r\n            })\r\n            lastScrollLeft = marqueeContainerRef.current.scrollLeft\r\n          }\r\n        } else {\r\n          setEndScroll(true)\r\n        }\r\n      }, 50)\r\n    }\r\n\r\n    return () => {\r\n      itv && clearInterval(itv)\r\n    }\r\n  }, [...args, endScroll])\r\n\r\n  return marqueeContainerRef\r\n}\r\n","var _path, _path2, _path3, _path4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgStable(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M14.1111 16.983V17.8664H5.90553V16.983C5.89939 16.6669 6.0035 16.3585 6.19997 16.1108L8.09442 13.7441H11.9222C12.4833 14.4441 13.3333 15.5553 13.8111 16.1108C14.0087 16.3582 14.1147 16.6664 14.1111 16.983Z\",\n    fill: \"currentColor\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M7.95004 5.55534C7.95003 6.23085 7.74979 6.89121 7.37461 7.45296C6.99942 8.01471 6.46614 8.45263 5.84215 8.71139C5.21816 8.97015 4.53147 9.03814 3.86885 8.90676C3.20623 8.77537 2.59743 8.45052 2.11938 7.97324C1.64133 7.49597 1.31549 6.8877 1.18303 6.2253C1.05057 5.56289 1.11744 4.87609 1.37519 4.25168C1.63294 3.62727 2.06999 3.09328 2.63113 2.71718C3.19227 2.34109 3.8523 2.13977 4.52781 2.13867C5.43448 2.13867 6.3041 2.49846 6.94573 3.13905C7.58736 3.77964 7.94856 4.64867 7.95004 5.55534Z\",\n    fill: \"currentColor\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M18.889 5.55534C18.889 6.23109 18.6886 6.89167 18.3132 7.45354C17.9378 8.01541 17.4041 8.45333 16.7798 8.71193C16.1555 8.97053 15.4685 9.03819 14.8058 8.90636C14.143 8.77452 13.5342 8.44912 13.0564 7.97129C12.5786 7.49346 12.2531 6.88467 12.1213 6.2219C11.9895 5.55913 12.0571 4.87215 12.3157 4.24784C12.5743 3.62352 13.0123 3.08991 13.5741 2.71448C14.136 2.33906 14.7966 2.13867 15.4723 2.13867C16.378 2.14014 17.2462 2.50058 17.8867 3.14101C18.5271 3.78144 18.8875 4.64963 18.889 5.55534Z\",\n    fill: \"currentColor\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M18.889 10.3442V11.7109C18.8893 11.8007 18.8718 11.8897 18.8375 11.9726C18.8032 12.0556 18.7527 12.1309 18.689 12.1942C18.6261 12.2584 18.5508 12.3093 18.4677 12.3436C18.3847 12.378 18.2955 12.3952 18.2056 12.3942H1.79453C1.70748 12.3984 1.62044 12.3854 1.53845 12.3558C1.45645 12.3263 1.38111 12.2808 1.31676 12.222C1.2489 12.1558 1.19558 12.0761 1.16019 11.9881C1.1248 11.9001 1.10812 11.8057 1.1112 11.7109V10.3442H18.889Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgStable);\nexport default __webpack_public_path__ + \"static/media/stable.affd9055.svg\";\nexport { ForwardRef as ReactComponent };","import { Currency, Fraction } from '@kyberswap/ks-sdk-core'\r\nimport { Trans } from '@lingui/macro'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport InfoHelper from 'components/InfoHelper'\r\nimport { SubgraphPoolData } from 'state/pools/hooks'\r\nimport { priceRangeCalcBySubgraphPool } from 'utils/dmm'\r\n\r\nexport const Field = styled.div`\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.subText};\r\n  line-height: 24px;\r\n`\r\n\r\nexport const Value = styled.div`\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  color: ${({ theme }) => theme.text};\r\n  line-height: 24px;\r\n`\r\n\r\nexport default function ItemCardInfoRow({\r\n  name,\r\n  value,\r\n  infoHelperText,\r\n  currency,\r\n}: {\r\n  name: string\r\n  value: string | number\r\n  infoHelperText?: string\r\n  currency?: Currency\r\n}) {\r\n  return (\r\n    <Flex justifyContent=\"space-between\">\r\n      <Field>\r\n        <Flex>\r\n          <Text>{name}</Text>\r\n          {infoHelperText && <InfoHelper text={infoHelperText} />}\r\n        </Flex>\r\n      </Field>\r\n      <Flex alignItems=\"center\" style={{ gap: '4px' }}>\r\n        {currency && value !== '-' && <CurrencyLogo currency={currency} size=\"16px\" />}\r\n        <Value>{value}</Value>\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport function ItemCardInfoRowPriceRange({ poolData }: { poolData: SubgraphPoolData }) {\r\n  const formatPriceMin = (price?: Fraction) => {\r\n    return price?.toSignificant(6) ?? '0'\r\n  }\r\n\r\n  const formatPriceMax = (price?: Fraction) => {\r\n    return !price || price.equalTo(new Fraction('-1')) ? '♾️' : price.toSignificant(6)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Flex justifyContent=\"space-between\">\r\n        <Field>\r\n          <Trans>Price Range</Trans>\r\n        </Field>\r\n      </Flex>\r\n      <Flex justifyContent=\"space-between\">\r\n        <Field style={{ marginLeft: '4px' }}>\r\n          • {poolData.token0.symbol}/{poolData.token1.symbol}\r\n        </Field>\r\n        <Value>\r\n          {formatPriceMin(priceRangeCalcBySubgraphPool(poolData)[0][0])} -{' '}\r\n          {formatPriceMax(priceRangeCalcBySubgraphPool(poolData)[0][1])}\r\n        </Value>\r\n      </Flex>\r\n      <Flex justifyContent=\"space-between\">\r\n        <Field style={{ marginLeft: '4px' }}>\r\n          • {poolData.token1.symbol}/{poolData.token0.symbol}\r\n        </Field>\r\n        <Value>\r\n          {formatPriceMin(priceRangeCalcBySubgraphPool(poolData)[1][0])} -{' '}\r\n          {formatPriceMax(priceRangeCalcBySubgraphPool(poolData)[1][1])}\r\n        </Value>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n","import { Fraction } from '@kyberswap/ks-sdk-core'\r\nimport { t } from '@lingui/macro'\r\nimport JSBI from 'jsbi'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nimport ItemCardInfoRow, { ItemCardInfoRowPriceRange } from 'components/PoolList/ItemCard/ItemCardInfoRow'\r\nimport DMM_POOL_INTERFACE from 'constants/abis/dmmPool'\r\nimport { AMP_LIQUIDITY_HINT, ONLY_STATIC_FEE_CHAINS, SUBGRAPH_AMP_MULTIPLIER } from 'constants/index'\r\nimport { EVMNetworkInfo } from 'constants/networks/type'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useMultipleContractSingleData } from 'state/multicall/hooks'\r\nimport { SubgraphPoolData } from 'state/pools/hooks'\r\nimport { formattedNum } from 'utils'\r\nimport { feeRangeCalc } from 'utils/dmm'\r\n\r\nexport default function TabDetailsItems({ poolData }: { poolData: SubgraphPoolData }) {\r\n  const { chainId, isEVM, networkInfo } = useActiveWeb3React()\r\n  const amp = new Fraction(poolData.amp).divide(JSBI.BigInt(SUBGRAPH_AMP_MULTIPLIER))\r\n  const ampLiquidity = formattedNum(`${parseFloat(amp.toSignificant(5)) * parseFloat(poolData.reserveUSD)}`, true)\r\n  const factories = useMultipleContractSingleData([poolData.id], DMM_POOL_INTERFACE, 'factory')\r\n  if (!isEVM) return <Redirect to=\"/\" />\r\n  const isNewStaticFeePool = factories?.[0]?.result?.[0] === (networkInfo as EVMNetworkInfo).classic.static.factory\r\n\r\n  return (\r\n    <>\r\n      <ItemCardInfoRow name={t`AMP Liquidity`} value={ampLiquidity as string} infoHelperText={AMP_LIQUIDITY_HINT} />\r\n      <ItemCardInfoRowPriceRange poolData={poolData} />\r\n      <ItemCardInfoRow\r\n        infoHelperText={\r\n          ONLY_STATIC_FEE_CHAINS[chainId]\r\n            ? t`Liquidity providers will earn this trading fee for each trade that uses this pool`\r\n            : undefined\r\n        }\r\n        name={poolData.fee ? t`Fee` : t`Fee Range`}\r\n        value={\r\n          poolData.fee\r\n            ? factories?.[0]?.result !== undefined\r\n              ? poolData.fee / (isNewStaticFeePool ? 1000 : 100) + '%'\r\n              : ''\r\n            : feeRangeCalc(+amp.toSignificant(5))\r\n        }\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import { Trans, t } from '@lingui/macro'\r\nimport { Flex, Text } from 'rebass'\r\n\r\nimport InfoHelper from 'components/InfoHelper'\r\nimport FarmingPoolAPRCell from 'components/YieldPools/FarmingPoolAPRCell'\r\nimport { MAX_ALLOW_APY } from 'constants/index'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useActiveAndUniqueFarmsData } from 'state/farms/hooks'\r\nimport { SubgraphPoolData, UserLiquidityPosition } from 'state/pools/hooks'\r\nimport { formattedNum } from 'utils'\r\nimport { getMyLiquidity, getTradingFeeAPR } from 'utils/dmm'\r\n\r\nimport ItemCardInfoRow, { Field, Value } from './ItemCardInfoRow'\r\n\r\nexport default function TabInfoItems({\r\n  poolData,\r\n  myLiquidity,\r\n}: {\r\n  poolData: SubgraphPoolData\r\n  myLiquidity: UserLiquidityPosition | undefined\r\n}) {\r\n  const theme = useTheme()\r\n  const volume = poolData?.oneDayVolumeUSD ? poolData?.oneDayVolumeUSD : poolData?.oneDayVolumeUntracked\r\n  const fee = poolData?.oneDayFeeUSD ? poolData?.oneDayFeeUSD : poolData?.oneDayFeeUntracked\r\n  const totalValueLocked = formattedNum(`${parseFloat(poolData?.reserveUSD)}`, true)\r\n  const oneYearFL = getTradingFeeAPR(poolData?.reserveUSD, fee).toFixed(2)\r\n\r\n  const { data: uniqueAndActiveFarms } = useActiveAndUniqueFarmsData()\r\n  const farm = uniqueAndActiveFarms.find(f => f.id.toLowerCase() === poolData.id.toLowerCase())\r\n  const isFarmingPool = !!farm\r\n\r\n  const renderAPR = () => {\r\n    if (Number(oneYearFL) > MAX_ALLOW_APY) {\r\n      return '--'\r\n    }\r\n\r\n    if (isFarmingPool) {\r\n      return (\r\n        <FarmingPoolAPRCell\r\n          tooltipPlacement=\"top\"\r\n          poolAPR={Number(oneYearFL)}\r\n          fairlaunchAddress={farm.fairLaunchAddress}\r\n          pid={farm.pid}\r\n        />\r\n      )\r\n    }\r\n\r\n    return <Value>{oneYearFL}%</Value>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ItemCardInfoRow name={t`Total Value Locked`} value={totalValueLocked as string} />\r\n      <Flex justifyContent=\"space-between\">\r\n        <Field>\r\n          <Flex>\r\n            <Text>\r\n              <Trans>APR</Trans>\r\n            </Text>\r\n            <InfoHelper text={t`Estimated return based on yearly fees of the pool`} />\r\n          </Flex>\r\n        </Field>\r\n        <Flex\r\n          alignItems=\"center\"\r\n          sx={{ gap: '4px', fontSize: '12px', fontWeight: 400, color: theme.text, lineHeight: '24px' }}\r\n        >\r\n          {renderAPR()}\r\n        </Flex>\r\n      </Flex>\r\n      <ItemCardInfoRow name={t`Volume (24H)`} value={formattedNum(volume, true)} />\r\n      <ItemCardInfoRow name={t`Fees (24H)`} value={formattedNum(fee, true)} />\r\n      <ItemCardInfoRow name={t`Your Liquidity Balance`} value={getMyLiquidity(myLiquidity)} />\r\n    </>\r\n  )\r\n}\r\n","import { Percent } from '@kyberswap/ks-sdk-core'\r\nimport { t } from '@lingui/macro'\r\n\r\nimport ItemCardInfoRow from 'components/PoolList/ItemCard/ItemCardInfoRow'\r\nimport { ONE_BIPS } from 'constants/index'\r\nimport { NativeCurrencies } from 'constants/tokens'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { SubgraphPoolData, UserLiquidityPosition } from 'state/pools/hooks'\r\nimport { tryParseAmount } from 'state/swap/hooks'\r\nimport { getMyLiquidity, parseSubgraphPoolData } from 'utils/dmm'\r\n\r\nexport default function TabYourLiquidityItems({\r\n  poolData,\r\n  myLiquidity,\r\n}: {\r\n  poolData: SubgraphPoolData\r\n  myLiquidity: UserLiquidityPosition | undefined\r\n}) {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const { currency0, currency1, reserve0, reserve1, totalSupply } = parseSubgraphPoolData(poolData, chainId)\r\n\r\n  const liquidityTokenBalance =\r\n    myLiquidity?.liquidityTokenBalance && chainId\r\n      ? tryParseAmount(myLiquidity?.liquidityTokenBalance, NativeCurrencies[chainId])\r\n      : undefined\r\n\r\n  const pooledToken0 =\r\n    liquidityTokenBalance && reserve0 && totalSupply\r\n      ? liquidityTokenBalance.multiply(reserve0).divide(totalSupply)\r\n      : undefined\r\n\r\n  const pooledToken1 =\r\n    liquidityTokenBalance && reserve1 && totalSupply\r\n      ? liquidityTokenBalance.multiply(reserve1).divide(totalSupply)\r\n      : undefined\r\n\r\n  const yourShareOfPool =\r\n    liquidityTokenBalance && totalSupply ? new Percent(liquidityTokenBalance.quotient, totalSupply.quotient) : undefined\r\n  return (\r\n    <>\r\n      <ItemCardInfoRow name={t`Your Liquidity Balance`} value={getMyLiquidity(myLiquidity)} />\r\n      <ItemCardInfoRow\r\n        name={t`Total LP Tokens`}\r\n        value={liquidityTokenBalance ? liquidityTokenBalance.toSignificant(6) : '-'}\r\n      />\r\n      <ItemCardInfoRow\r\n        name={t`Pooled ${poolData.token0.symbol}`}\r\n        currency={currency0}\r\n        value={pooledToken0 ? pooledToken0.toSignificant(6) : '-'}\r\n      />\r\n      <ItemCardInfoRow\r\n        name={t`Pooled ${poolData.token1.symbol}`}\r\n        currency={currency1}\r\n        value={pooledToken1 ? pooledToken1.toSignificant(6) : '-'}\r\n      />\r\n      <ItemCardInfoRow\r\n        name={t`Your Share Of Pool`}\r\n        value={\r\n          yourShareOfPool\r\n            ? yourShareOfPool.equalTo('0')\r\n              ? '0%'\r\n              : yourShareOfPool.lessThan(ONE_BIPS)\r\n              ? '<0.01%'\r\n              : `${yourShareOfPool.toFixed(2)}%`\r\n            : '-'\r\n        }\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import { t } from '@lingui/macro'\r\n\r\nimport ItemCardInfoRow from 'components/PoolList/ItemCard/ItemCardInfoRow'\r\nimport { RESERVE_USD_DECIMALS } from 'constants/index'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useUserStakedBalance } from 'state/farms/hooks'\r\nimport { SubgraphPoolData } from 'state/pools/hooks'\r\nimport { formattedNum } from 'utils'\r\nimport { parseSubgraphPoolData } from 'utils/dmm'\r\n\r\nexport default function TabYourStakedItems({ poolData }: { poolData: SubgraphPoolData }) {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const { currency0, currency1 } = parseSubgraphPoolData(poolData, chainId)\r\n\r\n  const { userStakedToken0Balance, userStakedToken1Balance, userStakedBalance, userStakedBalanceUSD } =\r\n    useUserStakedBalance(poolData)\r\n\r\n  return (\r\n    <>\r\n      <ItemCardInfoRow\r\n        name={t`Your Staked Balance`}\r\n        value={formattedNum(userStakedBalanceUSD.toSignificant(RESERVE_USD_DECIMALS), true)}\r\n      />\r\n      <ItemCardInfoRow name={t`Staked LP Tokens`} value={userStakedBalance.toSignificant(3)} />\r\n      <ItemCardInfoRow\r\n        name={t`Staked ${poolData.token0.symbol}`}\r\n        value={userStakedToken0Balance.toSignificant(6)}\r\n        currency={currency0}\r\n      />\r\n      <ItemCardInfoRow\r\n        name={t`Staked ${poolData.token1.symbol}`}\r\n        value={userStakedToken1Balance.toSignificant(6)}\r\n        currency={currency1}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import { ChainId, Fraction } from '@kyberswap/ks-sdk-core'\r\nimport { Trans } from '@lingui/macro'\r\nimport JSBI from 'jsbi'\r\nimport { useState } from 'react'\r\nimport { AlertTriangle, Share2 } from 'react-feather'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useMedia } from 'react-use'\r\nimport { Flex, Text } from 'rebass'\r\n\r\nimport { ButtonEmpty, ButtonOutlined, ButtonPrimary } from 'components/Button'\r\nimport CopyHelper from 'components/Copy'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport Divider from 'components/Divider'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport { MoneyBagOutline } from 'components/Icons'\r\nimport TabDetailsItems from 'components/PoolList/ItemCard/TabDetailsItems'\r\nimport TabInfoItems from 'components/PoolList/ItemCard/TabInfoItems'\r\nimport TabYourLiquidityItems from 'components/PoolList/ItemCard/TabYourLiquidityItems'\r\nimport TabYourStakedItems from 'components/PoolList/ItemCard/TabYourStakedItems'\r\nimport { ListItemProps } from 'components/PoolList/ListItem'\r\nimport {\r\n  ButtonGroupContainer,\r\n  FooterContainer,\r\n  HeaderAMPAndAddress,\r\n  HeaderContainer,\r\n  HeaderTitle,\r\n  InformationContainer,\r\n  Progress,\r\n  StyledItemCard,\r\n  TabContainer,\r\n  TabItem,\r\n  TokenRatioContainer,\r\n  TokenRatioGrid,\r\n  TokenRatioName,\r\n  TokenRatioPercent,\r\n} from 'components/PoolList/styled'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport { DMM_ANALYTICS_URL, SUBGRAPH_AMP_MULTIPLIER } from 'constants/index'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { IconWrapper } from 'pages/Pools/styleds'\r\nimport { useToggleEthPowAckModal } from 'state/application/hooks'\r\nimport { useUserStakedBalance } from 'state/farms/hooks'\r\nimport { useSharedPoolIdManager, useUrlOnEthPowAck } from 'state/pools/hooks'\r\nimport { ExternalLink } from 'theme'\r\nimport { formattedNum, shortenAddress } from 'utils'\r\nimport { currencyId } from 'utils/currencyId'\r\nimport { parseSubgraphPoolData, useCheckIsFarmingPool } from 'utils/dmm'\r\n\r\nconst TAB = {\r\n  INFO: 0,\r\n  DETAILS: 1,\r\n  YOUR_LIQUIDITY: 2,\r\n  YOUR_STAKED: 3,\r\n}\r\n\r\nconst ItemCard = ({ poolData, style = {}, myLiquidity }: ListItemProps) => {\r\n  const { chainId } = useActiveWeb3React()\r\n  const amp = new Fraction(poolData.amp).divide(JSBI.BigInt(SUBGRAPH_AMP_MULTIPLIER))\r\n  const history = useHistory()\r\n  const [, setUrlOnEthPoWAck] = useUrlOnEthPowAck()\r\n  const toggleEthPowAckModal = useToggleEthPowAckModal()\r\n\r\n  const isFarmingPool = useCheckIsFarmingPool(poolData.id)\r\n\r\n  // Shorten address with 0x + 3 characters at start and end\r\n  const shortenPoolAddress = shortenAddress(chainId, poolData.id, 3)\r\n  const { currency0, currency1, reserve0, virtualReserve0, reserve1, virtualReserve1 } = parseSubgraphPoolData(\r\n    poolData,\r\n    chainId,\r\n  )\r\n  const realPercentToken0 =\r\n    reserve0 && virtualReserve0 && reserve1 && virtualReserve1\r\n      ? reserve0.asFraction\r\n          .divide(virtualReserve0)\r\n          .multiply('100')\r\n          .divide(reserve0.divide(virtualReserve0).asFraction.add(reserve1.divide(virtualReserve1).asFraction))\r\n      : new Fraction('50')\r\n  const realPercentToken1 = new Fraction('100').subtract(realPercentToken0)\r\n  const isWarning = realPercentToken0.lessThan('10') || realPercentToken1.lessThan('10')\r\n\r\n  const percentToken0 = realPercentToken0.toSignificant(4)\r\n  const percentToken1 = realPercentToken1.toSignificant(4)\r\n\r\n  const theme = useTheme()\r\n  const above1000 = useMedia('(min-width: 1000px)')\r\n  const [activeTabIndex, setActiveTabIndex] = useState(above1000 ? TAB.DETAILS : TAB.INFO)\r\n\r\n  const { userStakedBalance } = useUserStakedBalance(poolData)\r\n\r\n  const isHaveLiquidity = myLiquidity && myLiquidity.liquidityTokenBalance !== '0'\r\n\r\n  const [, setSharedPoolId] = useSharedPoolIdManager()\r\n\r\n  return (\r\n    <StyledItemCard style={style}>\r\n      {' '}\r\n      <div style={{ position: 'absolute', top: '16px', right: '16px' }}>\r\n        {isFarmingPool && (\r\n          <MouseoverTooltip\r\n            noArrow\r\n            text={\r\n              <Text>\r\n                <Trans>\r\n                  Available for yield farming. Click{' '}\r\n                  <Link to={`/farms?tab=classic&type=active&search=${poolData.id}`}>here</Link> to go to the farm.\r\n                </Trans>\r\n              </Text>\r\n            }\r\n          >\r\n            <IconWrapper style={{ width: '24px', height: '24px' }}>\r\n              <MoneyBagOutline size={16} color={theme.textReverse} />\r\n            </IconWrapper>\r\n          </MouseoverTooltip>\r\n        )}\r\n\r\n        {isWarning && (\r\n          <MouseoverTooltip text=\"One token is close to 0% in the poolData ratio. Pool might go inactive\">\r\n            <IconWrapper\r\n              style={{\r\n                width: '24px',\r\n                height: '24px',\r\n                background: theme.warning,\r\n                marginLeft: isFarmingPool ? '8px' : 0,\r\n              }}\r\n            >\r\n              <AlertTriangle color={theme.textReverse} size={16} />\r\n            </IconWrapper>\r\n          </MouseoverTooltip>\r\n        )}\r\n      </div>\r\n      {above1000 ? (\r\n        <HeaderContainer>\r\n          <HeaderTitle>\r\n            <Flex alignItems=\"center\">\r\n              <DoubleCurrencyLogo currency0={currency0} currency1={currency1} size={24} />\r\n              {poolData.token0.symbol} - {poolData.token1.symbol}\r\n            </Flex>\r\n          </HeaderTitle>\r\n          <HeaderAMPAndAddress>\r\n            <span>AMP = {formattedNum(amp.toSignificant(5))}</span>\r\n            <span>|</span>\r\n            <span>{shortenPoolAddress}</span>\r\n            <CopyHelper toCopy={poolData.id} />\r\n          </HeaderAMPAndAddress>\r\n        </HeaderContainer>\r\n      ) : (\r\n        <Flex flexDirection=\"column\" style={{ gap: '4px' }}>\r\n          <Flex style={{ gap: '4px' }}>\r\n            <Text fontSize=\"16px\" fontWeight={400} lineHeight=\"16px\">\r\n              {shortenPoolAddress}\r\n            </Text>\r\n            <CopyHelper toCopy={poolData.id} margin=\"0\" />\r\n          </Flex>\r\n          <Text color={theme.subText} fontSize=\"12px\" fontWeight={400} lineHeight=\"16px\">\r\n            AMP = {formattedNum(amp.toSignificant(5))}\r\n          </Text>\r\n        </Flex>\r\n      )}\r\n      <TokenRatioContainer>\r\n        <Progress value={percentToken0} />\r\n        <TokenRatioGrid>\r\n          <CurrencyLogo currency={currency0} size=\"32px\" />\r\n          <Flex flexDirection=\"column\">\r\n            <TokenRatioName>{poolData.token0.symbol}</TokenRatioName>\r\n            <TokenRatioPercent>{percentToken0}%</TokenRatioPercent>\r\n          </Flex>\r\n          <Flex flexDirection=\"column\" alignItems=\"flex-end\">\r\n            <TokenRatioName>{poolData.token1.symbol}</TokenRatioName>\r\n            <TokenRatioPercent>{percentToken1}%</TokenRatioPercent>\r\n          </Flex>\r\n          <CurrencyLogo currency={currency1} size=\"32px\" />\r\n        </TokenRatioGrid>\r\n      </TokenRatioContainer>\r\n      <TabContainer>\r\n        {!above1000 && (\r\n          <TabItem active={activeTabIndex === TAB.INFO} onClick={() => setActiveTabIndex(TAB.INFO)}>\r\n            <Trans>Info</Trans>\r\n          </TabItem>\r\n        )}\r\n        <TabItem active={activeTabIndex === TAB.DETAILS} onClick={() => setActiveTabIndex(TAB.DETAILS)}>\r\n          <Trans>Details</Trans>\r\n        </TabItem>\r\n        <TabItem active={activeTabIndex === TAB.YOUR_LIQUIDITY} onClick={() => setActiveTabIndex(TAB.YOUR_LIQUIDITY)}>\r\n          {above1000 ? <Trans>Your Liquidity</Trans> : <Trans>Liquidity</Trans>}\r\n        </TabItem>\r\n        {userStakedBalance.greaterThan('0') && (\r\n          <TabItem active={activeTabIndex === TAB.YOUR_STAKED} onClick={() => setActiveTabIndex(TAB.YOUR_STAKED)}>\r\n            {above1000 ? <Trans>Your Staked</Trans> : <Trans>Staked</Trans>}\r\n          </TabItem>\r\n        )}\r\n      </TabContainer>\r\n      <InformationContainer>\r\n        {activeTabIndex === TAB.INFO && <TabInfoItems poolData={poolData} myLiquidity={myLiquidity} />}\r\n        {activeTabIndex === TAB.DETAILS && <TabDetailsItems poolData={poolData} />}\r\n        {activeTabIndex === TAB.YOUR_LIQUIDITY && (\r\n          <TabYourLiquidityItems poolData={poolData} myLiquidity={myLiquidity} />\r\n        )}\r\n        {activeTabIndex === TAB.YOUR_STAKED && <TabYourStakedItems poolData={poolData} />}\r\n      </InformationContainer>\r\n      <ButtonGroupContainer>\r\n        <ButtonOutlined\r\n          as={Link}\r\n          to={\r\n            isHaveLiquidity\r\n              ? `/remove/${currencyId(currency0, chainId)}/${currencyId(currency1, chainId)}/${poolData.id}`\r\n              : `/swap?inputCurrency=${currencyId(currency0, chainId)}&outputCurrency=${currencyId(currency1, chainId)}`\r\n          }\r\n          style={{\r\n            padding: '10px',\r\n            fontSize: '14px',\r\n            fontWeight: 500,\r\n            border: `1px solid ${theme.subText}`,\r\n            color: theme.subText,\r\n          }}\r\n        >\r\n          {isHaveLiquidity ? <Trans>Remove Liquidity</Trans> : <Trans>Swap</Trans>}\r\n        </ButtonOutlined>\r\n        <ButtonPrimary\r\n          onClick={() => {\r\n            const url = `/add/${currencyId(currency0, chainId)}/${currencyId(currency1, chainId)}/${poolData.id}`\r\n            if (chainId === ChainId.ETHW) {\r\n              setUrlOnEthPoWAck(url)\r\n              toggleEthPowAckModal()\r\n            } else {\r\n              history.push(url)\r\n            }\r\n          }}\r\n          style={{\r\n            padding: '10px',\r\n            fontSize: '14px',\r\n            fontWeight: 500,\r\n          }}\r\n        >\r\n          Add Liquidity\r\n        </ButtonPrimary>\r\n      </ButtonGroupContainer>\r\n      <Divider />\r\n      <FooterContainer>\r\n        <ExternalLink href={DMM_ANALYTICS_URL[chainId] + '/pool/' + poolData.id} style={{ fontSize: '14px' }}>\r\n          <Trans>Analytics ↗</Trans>\r\n        </ExternalLink>\r\n        <ButtonEmpty width=\"fit-content\" fontSize=\"14px\" padding=\"0\" onClick={() => setSharedPoolId(poolData.id)}>\r\n          <Trans>Share</Trans>\r\n          <Share2 size={14} style={{ marginLeft: '6px' }} />\r\n        </ButtonEmpty>\r\n      </FooterContainer>\r\n    </StyledItemCard>\r\n  )\r\n}\r\n\r\nexport default ItemCard\r\n","import { Trans } from '@lingui/macro'\r\nimport { useState } from 'react'\r\nimport { ChevronDown } from 'react-feather'\r\nimport { Flex, Text } from 'rebass'\r\n\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport ItemCard from 'components/PoolList/ItemCard/index'\r\nimport { ListItemGroupProps } from 'components/PoolList/ListItem'\r\nimport { DashedDivider, ItemCardGroupContainer, TextShowMorePools } from 'components/PoolList/styled'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { ButtonIcon } from 'pages/Pools/styleds'\r\nimport { parseSubgraphPoolData } from 'utils/dmm'\r\n\r\nconst ItemCardGroup = ({\r\n  sortedFilteredSubgraphPoolsObject,\r\n  poolData,\r\n  userLiquidityPositions,\r\n  expandedPoolKey,\r\n  setExpandedPoolKey,\r\n}: ListItemGroupProps) => {\r\n  const poolKey = poolData.token0.id + '-' + poolData.token1.id\r\n\r\n  const isShowTwoPools = poolKey === expandedPoolKey\r\n\r\n  const [isShowAllPools, setIsShowAllPools] = useState(false)\r\n\r\n  const expandedPools = sortedFilteredSubgraphPoolsObject.get(poolKey) ?? []\r\n\r\n  const renderPools = isShowTwoPools ? (isShowAllPools ? expandedPools : expandedPools.slice(0, 2)) : [poolData]\r\n\r\n  const isDisableShowAllPools = expandedPools.length <= 1\r\n\r\n  const onUpdateExpandedPoolKeyAndShowAllPools = () => {\r\n    if (isDisableShowAllPools) return\r\n    setExpandedPoolKey(prev => (prev === poolKey ? '' : poolKey))\r\n    setIsShowAllPools(prev => !prev)\r\n  }\r\n\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const { currency0, currency1 } = parseSubgraphPoolData(poolData, chainId)\r\n\r\n  const theme = useTheme()\r\n\r\n  return (\r\n    <ItemCardGroupContainer>\r\n      <Flex\r\n        justifyContent=\"space-between\"\r\n        onClick={onUpdateExpandedPoolKeyAndShowAllPools}\r\n        style={{ cursor: isDisableShowAllPools ? 'default' : 'pointer' }}\r\n      >\r\n        <Flex>\r\n          <DoubleCurrencyLogo currency0={currency0} currency1={currency1} size={24} />\r\n          <Text fontSize=\"20px\" fontWeight={500} lineHeight=\"24px\">\r\n            {poolData.token0.symbol} - {poolData.token1.symbol}\r\n          </Text>\r\n        </Flex>\r\n\r\n        <ButtonIcon disabled={isDisableShowAllPools}>\r\n          <ChevronDown\r\n            color={theme.subText}\r\n            style={{ transition: 'transform 0.2s', transform: `rotate(${isShowAllPools ? '-180deg' : 0})` }}\r\n          />\r\n        </ButtonIcon>\r\n      </Flex>\r\n      {renderPools.map((poolData, index) => (\r\n        <ItemCard\r\n          key={poolData.id}\r\n          poolData={poolData}\r\n          myLiquidity={userLiquidityPositions[poolData.id]}\r\n          isShowExpandedPools={isShowTwoPools}\r\n          isFirstPoolInGroup={index === 0}\r\n          isDisableShowTwoPools={isDisableShowAllPools}\r\n        />\r\n      ))}\r\n      {isShowAllPools && (\r\n        <TextShowMorePools disabled={isDisableShowAllPools} onClick={onUpdateExpandedPoolKeyAndShowAllPools}>\r\n          <Trans>\r\n            Show less {poolData.token0.symbol} - {poolData.token1.symbol} pools\r\n          </Trans>\r\n        </TextShowMorePools>\r\n      )}\r\n      <DashedDivider />\r\n    </ItemCardGroupContainer>\r\n  )\r\n}\r\n\r\nexport default ItemCardGroup\r\n","import { ChainId, Fraction } from '@kyberswap/ks-sdk-core'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport JSBI from 'jsbi'\r\nimport { rgba } from 'polished'\r\nimport React, { CSSProperties, useState } from 'react'\r\nimport { AlertTriangle, ChevronDown, ChevronUp, Info, Minus, Plus, Share2 } from 'react-feather'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { Flex } from 'rebass'\r\n\r\nimport { ButtonEmpty } from 'components/Button'\r\nimport CopyHelper from 'components/Copy'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport { MoneyBag } from 'components/Icons'\r\nimport Loader from 'components/Loader'\r\nimport {\r\n  AMPLiquidityAndTVLContainer,\r\n  AddressAndAMPContainer,\r\n  AddressWrapper,\r\n  ButtonWrapper,\r\n  ChevronContainer,\r\n  DataText,\r\n  ListItemGroupContainer,\r\n  PoolAddressContainer,\r\n  TableRow,\r\n  TextAMP,\r\n  TextAMPLiquidity,\r\n  TextShowMorePools,\r\n  TextTVL,\r\n  TextTokenPair,\r\n  TokenPairContainer,\r\n} from 'components/PoolList/styled'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport FarmingPoolAPRCell from 'components/YieldPools/FarmingPoolAPRCell'\r\nimport { MAX_ALLOW_APY } from 'constants/index'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { IconWrapper } from 'pages/Pools/styleds'\r\nimport { usePoolDetailModalToggle, useToggleEthPowAckModal } from 'state/application/hooks'\r\nimport { useActiveAndUniqueFarmsData } from 'state/farms/hooks'\r\nimport { setSelectedPool } from 'state/pools/actions'\r\nimport { SubgraphPoolData, UserLiquidityPosition, useSharedPoolIdManager, useUrlOnEthPowAck } from 'state/pools/hooks'\r\nimport { formattedNum, shortenAddress } from 'utils'\r\nimport { currencyId } from 'utils/currencyId'\r\nimport { getMyLiquidity, getTradingFeeAPR, parseSubgraphPoolData } from 'utils/dmm'\r\n\r\nexport interface ListItemGroupProps {\r\n  sortedFilteredSubgraphPoolsObject: Map<string, SubgraphPoolData[]>\r\n  poolData: SubgraphPoolData\r\n  userLiquidityPositions: { [key: string]: UserLiquidityPosition }\r\n  expandedPoolKey: string | undefined\r\n  setExpandedPoolKey: React.Dispatch<React.SetStateAction<string | undefined>>\r\n}\r\n\r\nexport interface ListItemProps {\r\n  poolData: SubgraphPoolData\r\n  myLiquidity: UserLiquidityPosition | undefined\r\n  isShowExpandedPools: boolean\r\n  isFirstPoolInGroup: boolean\r\n  isDisableShowTwoPools: boolean\r\n  style?: CSSProperties\r\n}\r\n\r\nconst ListItem = ({\r\n  sortedFilteredSubgraphPoolsObject,\r\n  poolData,\r\n  userLiquidityPositions,\r\n  expandedPoolKey,\r\n  setExpandedPoolKey,\r\n}: ListItemGroupProps) => {\r\n  const poolKey = poolData.token0.id + '-' + poolData.token1.id\r\n\r\n  const isShowTwoPools = poolKey === expandedPoolKey\r\n\r\n  const [isShowAllPools, setIsShowAllPools] = useState(false)\r\n\r\n  const expandedPools = sortedFilteredSubgraphPoolsObject.get(poolKey) ?? []\r\n\r\n  const renderPools = isShowTwoPools ? (isShowAllPools ? expandedPools : expandedPools.slice(0, 2)) : [poolData]\r\n\r\n  const isDisableShowTwoPools = expandedPools.length <= 1\r\n  const isDisableShowAllPools = expandedPools.length <= 2\r\n\r\n  const onUpdateExpandedPoolKey = () => {\r\n    if (isDisableShowTwoPools) return\r\n    setExpandedPoolKey(prev => (prev === poolKey ? '' : poolKey))\r\n  }\r\n\r\n  const onShowAllExpandedPools = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    event.stopPropagation()\r\n    if (isDisableShowAllPools) return\r\n    setIsShowAllPools(prev => !prev)\r\n  }\r\n\r\n  return (\r\n    <ListItemGroupContainer\r\n      onClick={onUpdateExpandedPoolKey}\r\n      isDisableShowTwoPools={isDisableShowTwoPools}\r\n      isShowExpandedPools={isShowTwoPools}\r\n    >\r\n      {renderPools.map((poolData, index) => (\r\n        <ListItemGroup\r\n          key={poolData.id}\r\n          poolData={poolData}\r\n          myLiquidity={userLiquidityPositions[poolData.id]}\r\n          isShowExpandedPools={isShowTwoPools}\r\n          isFirstPoolInGroup={index === 0}\r\n          isDisableShowTwoPools={isDisableShowTwoPools}\r\n        />\r\n      ))}\r\n      {isShowTwoPools && (\r\n        <TableRow isShowExpandedPools={isShowTwoPools} onClick={onShowAllExpandedPools} style={{ padding: '0' }}>\r\n          <TextShowMorePools disabled={isDisableShowAllPools}>\r\n            {isDisableShowAllPools || !isShowAllPools ? <Trans>Show more pools</Trans> : <Trans>Show less pools</Trans>}\r\n          </TextShowMorePools>\r\n        </TableRow>\r\n      )}\r\n    </ListItemGroupContainer>\r\n  )\r\n}\r\n\r\nconst ListItemGroup = ({\r\n  poolData,\r\n  myLiquidity,\r\n  isShowExpandedPools,\r\n  isFirstPoolInGroup,\r\n  isDisableShowTwoPools,\r\n}: ListItemProps) => {\r\n  const { chainId } = useActiveWeb3React()\r\n  const dispatch = useDispatch()\r\n  const togglePoolDetailModal = usePoolDetailModalToggle()\r\n\r\n  const amp = new Fraction(poolData.amp).divide(JSBI.BigInt(10000))\r\n\r\n  const history = useHistory()\r\n  const [, setUrlOnEthPoWAck] = useUrlOnEthPowAck()\r\n  const toggleEthPowAckModal = useToggleEthPowAckModal()\r\n\r\n  const { data: uniqueAndActiveFarms } = useActiveAndUniqueFarmsData()\r\n  const farm = uniqueAndActiveFarms.find(f => f.id.toLowerCase() === poolData.id.toLowerCase())\r\n  const isFarmingPool = !!farm\r\n\r\n  // Shorten address with 0x + 3 characters at start and end\r\n  const shortenPoolAddress = shortenAddress(chainId, poolData.id, 3)\r\n  const { currency0, currency1, reserve0, virtualReserve0, reserve1, virtualReserve1 } = parseSubgraphPoolData(\r\n    poolData,\r\n    chainId,\r\n  )\r\n  const realPercentToken0 =\r\n    reserve0 && virtualReserve0 && reserve1 && virtualReserve1\r\n      ? reserve0.asFraction\r\n          .divide(virtualReserve0)\r\n          .multiply('100')\r\n          .divide(reserve0.divide(virtualReserve0).asFraction.add(reserve1.divide(virtualReserve1).asFraction))\r\n      : new Fraction('50')\r\n  const realPercentToken1 = new Fraction('100').subtract(realPercentToken0)\r\n  const isWarning = realPercentToken0.lessThan('10') || realPercentToken1.lessThan('10')\r\n  const volume = poolData.oneDayVolumeUSD ? poolData.oneDayVolumeUSD : poolData.oneDayVolumeUntracked\r\n\r\n  const fee24H = poolData.oneDayFeeUSD ? poolData.oneDayFeeUSD : poolData.oneDayFeeUntracked\r\n\r\n  const oneYearFL = getTradingFeeAPR(poolData.reserveUSD, fee24H).toFixed(2)\r\n\r\n  const ampLiquidity = formattedNum(`${parseFloat(amp.toSignificant(5)) * parseFloat(poolData.reserveUSD)}`, true)\r\n  const totalValueLocked = formattedNum(`${parseFloat(poolData.reserveUSD)}`, true)\r\n\r\n  const onTogglePoolDetailModal = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    event.stopPropagation()\r\n    dispatch(\r\n      setSelectedPool({\r\n        poolData,\r\n        myLiquidity,\r\n      }),\r\n    )\r\n    togglePoolDetailModal()\r\n  }\r\n\r\n  const theme = useTheme()\r\n\r\n  const [, setSharedPoolId] = useSharedPoolIdManager()\r\n\r\n  const renderAPR = () => {\r\n    if (!poolData) {\r\n      return <Loader />\r\n    }\r\n\r\n    if (Number(oneYearFL) > MAX_ALLOW_APY) {\r\n      return '--'\r\n    }\r\n\r\n    if (isFarmingPool) {\r\n      return (\r\n        <FarmingPoolAPRCell poolAPR={Number(oneYearFL)} fairlaunchAddress={farm.fairLaunchAddress} pid={farm.pid} />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <Flex\r\n        sx={{\r\n          alignItems: 'center',\r\n          paddingRight: '20px', // to make all the APR numbers vertically align\r\n        }}\r\n      >\r\n        {oneYearFL}%\r\n      </Flex>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <TableRow isShowExpandedPools={isShowExpandedPools} isShowBorderBottom={isShowExpandedPools} onClick={() => null}>\r\n        <DataText>\r\n          {isFirstPoolInGroup && (\r\n            <Flex>\r\n              <TokenPairContainer>\r\n                <DoubleCurrencyLogo currency0={currency0} currency1={currency1} />\r\n                <TextTokenPair>\r\n                  {poolData.token0.symbol} - {poolData.token1.symbol}\r\n                </TextTokenPair>\r\n              </TokenPairContainer>\r\n            </Flex>\r\n          )}\r\n        </DataText>\r\n\r\n        <DataText style={{ position: 'relative' }}>\r\n          <Flex\r\n            sx={{\r\n              position: 'absolute',\r\n              top: '-1px',\r\n              left: '-28px',\r\n              minWidth: '18px', // to match width of IconWrapper\r\n              flexDirection: 'column',\r\n              rowGap: '4px',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            {isFarmingPool && (\r\n              <MouseoverTooltip placement=\"top\" text={t`Available for yield farming`}>\r\n                <Link to={`/farms?tab=classic&type=active&search=${poolData.id}`}>\r\n                  <MoneyBag size={16} color={theme.apr} />\r\n                </Link>\r\n              </MouseoverTooltip>\r\n            )}\r\n            {isWarning && (\r\n              <MouseoverTooltip text={`One token is close to 0% in the pool ratio. Pool might go inactive`}>\r\n                <IconWrapper style={{ background: theme.warning, marginTop: isFarmingPool ? '4px' : 0 }}>\r\n                  <AlertTriangle color={theme.textReverse} size={12} />\r\n                </IconWrapper>\r\n              </MouseoverTooltip>\r\n            )}\r\n          </Flex>\r\n          <PoolAddressContainer>\r\n            <AddressAndAMPContainer>\r\n              <AddressWrapper>\r\n                {shortenPoolAddress}\r\n                <CopyHelper toCopy={poolData.id} />\r\n              </AddressWrapper>\r\n              <TextAMP>AMP = {formattedNum(amp.toSignificant(5))}</TextAMP>\r\n            </AddressAndAMPContainer>\r\n          </PoolAddressContainer>\r\n        </DataText>\r\n        <DataText>\r\n          {!poolData ? (\r\n            <Loader />\r\n          ) : (\r\n            <AMPLiquidityAndTVLContainer>\r\n              <TextAMPLiquidity>{ampLiquidity}</TextAMPLiquidity>\r\n              <TextTVL>{totalValueLocked}</TextTVL>\r\n            </AMPLiquidityAndTVLContainer>\r\n          )}\r\n        </DataText>\r\n        <DataText\r\n          alignItems=\"flex-end\"\r\n          style={{\r\n            color: theme.apr,\r\n          }}\r\n        >\r\n          {renderAPR()}\r\n        </DataText>\r\n        <DataText alignItems=\"flex-end\">{!poolData ? <Loader /> : formattedNum(volume, true)}</DataText>\r\n        <DataText alignItems=\"flex-end\">{!poolData ? <Loader /> : formattedNum(fee24H, true)}</DataText>\r\n        <DataText alignItems=\"flex-end\">{getMyLiquidity(myLiquidity)}</DataText>\r\n        <ButtonWrapper style={{ marginRight: '-3px' }}>\r\n          <ButtonEmpty\r\n            padding=\"0\"\r\n            style={{\r\n              background: rgba(theme.primary, 0.2),\r\n              minWidth: '28px',\r\n              minHeight: '28px',\r\n              width: '28px',\r\n              height: '28px',\r\n            }}\r\n            onClick={(e: React.MouseEvent) => {\r\n              e.stopPropagation()\r\n\r\n              const url = `/add/${currencyId(currency0, chainId)}/${currencyId(currency1, chainId)}/${poolData.id}`\r\n              setUrlOnEthPoWAck(url)\r\n\r\n              if (chainId === ChainId.ETHW) {\r\n                toggleEthPowAckModal()\r\n              } else {\r\n                history.push(url)\r\n              }\r\n            }}\r\n          >\r\n            <Plus size={16} color={theme.primary} />\r\n          </ButtonEmpty>\r\n          {myLiquidity && myLiquidity.liquidityTokenBalance !== '0' && (\r\n            <ButtonEmpty\r\n              padding=\"0\"\r\n              as={Link}\r\n              to={`/remove/${currencyId(currency0, chainId)}/${currencyId(currency1, chainId)}/${poolData.id}`}\r\n              style={{\r\n                background: rgba(theme.subText, 0.2),\r\n                minWidth: '28px',\r\n                minHeight: '28px',\r\n                width: '28px',\r\n                height: '28px',\r\n              }}\r\n            >\r\n              <Minus size={16} />\r\n            </ButtonEmpty>\r\n          )}\r\n          <ButtonEmpty\r\n            padding=\"0\"\r\n            onClick={(e: React.MouseEvent) => {\r\n              e.stopPropagation()\r\n              setSharedPoolId(poolData.id)\r\n            }}\r\n            style={{\r\n              background: rgba(theme.buttonBlack, 0.2),\r\n              minWidth: '28px',\r\n              minHeight: '28px',\r\n              width: '28px',\r\n              height: '28px',\r\n            }}\r\n          >\r\n            <Share2 size=\"14px\" color={theme.subText} />\r\n          </ButtonEmpty>\r\n          <ButtonEmpty\r\n            padding=\"0\"\r\n            onClick={onTogglePoolDetailModal}\r\n            style={{\r\n              background: rgba(theme.buttonGray, 0.2),\r\n              minWidth: '28px',\r\n              minHeight: '28px',\r\n              width: '28px',\r\n              height: '28px',\r\n            }}\r\n          >\r\n            <Info size=\"16px\" color={theme.subText} />\r\n          </ButtonEmpty>\r\n          <ChevronContainer>\r\n            {isFirstPoolInGroup && isShowExpandedPools && (\r\n              <ChevronUp size={20} style={{ minWidth: '20px', minHeight: '20px' }} />\r\n            )}\r\n            {isFirstPoolInGroup && !isShowExpandedPools && (\r\n              <ChevronDown\r\n                size={20}\r\n                style={{ minWidth: '20px', minHeight: '20px' }}\r\n                color={isDisableShowTwoPools ? theme.buttonGray : theme.text}\r\n              />\r\n            )}\r\n            {!isFirstPoolInGroup && <div style={{ visibility: 'hidden', minWidth: '20px', minHeight: '20px' }} />}\r\n          </ChevronContainer>\r\n        </ButtonWrapper>\r\n      </TableRow>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ListItem\r\n","import Modal from 'components/Modal'\r\nimport ItemCard from 'components/PoolList/ItemCard'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { ApplicationModal } from 'state/application/actions'\r\nimport { useModalOpen, usePoolDetailModalToggle } from 'state/application/hooks'\r\nimport { useSelectedPool } from 'state/pools/hooks'\r\n\r\nexport default function PoolDetailModal() {\r\n  const poolDetailModalOpen = useModalOpen(ApplicationModal.POOL_DETAIL)\r\n  const togglePoolDetailModal = usePoolDetailModalToggle()\r\n  const selectedPool = useSelectedPool()\r\n  const theme = useTheme()\r\n\r\n  if (!selectedPool) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={poolDetailModalOpen}\r\n      onDismiss={togglePoolDetailModal}\r\n      maxWidth=\"fit-content\"\r\n      maxHeight=\"fit-content\"\r\n    >\r\n      <ItemCard\r\n        style={{ background: theme.tableHeader }}\r\n        poolData={selectedPool.poolData}\r\n        myLiquidity={selectedPool.myLiquidity}\r\n        isShowExpandedPools={false}\r\n        isFirstPoolInGroup={true}\r\n        isDisableShowTwoPools={false}\r\n      />\r\n    </Modal>\r\n  )\r\n}\r\n","import { Currency } from '@kyberswap/ks-sdk-core'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { ChevronDown, ChevronUp } from 'react-feather'\r\nimport { useMedia } from 'react-use'\r\nimport { Flex } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport InfoHelper from 'components/InfoHelper'\r\nimport LocalLoader from 'components/LocalLoader'\r\nimport Pagination from 'components/Pagination'\r\nimport { Input as PaginationInput } from 'components/Pagination/PaginationInputOnMobile'\r\nimport ItemCardGroup from 'components/PoolList/ItemCard/ItemCardGroup'\r\nimport ListItem from 'components/PoolList/ListItem'\r\nimport ShareModal from 'components/ShareModal'\r\nimport { ClickableText } from 'components/YieldPools/styleds'\r\nimport { AMP_HINT, AMP_LIQUIDITY_HINT, MAX_ALLOW_APY } from 'constants/index'\r\nimport { STABLE_COINS_ADDRESS } from 'constants/tokens'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { SelectPairInstructionWrapper } from 'pages/Pools/styleds'\r\nimport { ApplicationModal } from 'state/application/actions'\r\nimport { useModalOpen, useOpenModal } from 'state/application/hooks'\r\nimport { useActiveAndUniqueFarmsData } from 'state/farms/hooks'\r\nimport { Field } from 'state/pair/actions'\r\nimport {\r\n  SubgraphPoolData,\r\n  UserLiquidityPosition,\r\n  useAllPoolsData,\r\n  useResetPools,\r\n  useSharedPoolIdManager,\r\n  useUserLiquidityPositions,\r\n} from 'state/pools/hooks'\r\nimport { getTradingFeeAPR } from 'utils/dmm'\r\n\r\nimport PoolDetailModal from './PoolDetailModal'\r\n\r\nconst PageWrapper = styled.div`\r\n  overflow: 'hidden';\r\n  &[data-above1000='true'] {\r\n    background: ${({ theme }) => theme.background};\r\n    border-radius: 20px;\r\n  }\r\n\r\n  ${PaginationInput} {\r\n    background: ${({ theme }) => theme.background};\r\n  }\r\n`\r\n\r\nconst TableHeader = styled.div`\r\n  display: grid;\r\n  grid-gap: 1.5rem;\r\n  grid-template-columns: 1.5fr 1.5fr 2fr 0.75fr 1fr 1fr 1fr 1.5fr;\r\n  padding: 16px 20px;\r\n  font-size: 12px;\r\n  align-items: center;\r\n  height: fit-content;\r\n  position: relative;\r\n  background-color: ${({ theme }) => theme.tableHeader};\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n  z-index: 1;\r\n  border-bottom: ${({ theme }) => `1px solid ${theme.border}`};\r\n  text-align: right;\r\n`\r\n\r\ninterface PoolListProps {\r\n  currencies: { [field in Field]?: Currency }\r\n  searchValue: string\r\n  isShowOnlyActiveFarmPools: boolean\r\n  onlyShowStable: boolean\r\n  shouldShowLowTVLPools: boolean\r\n}\r\n\r\nconst SORT_FIELD = {\r\n  LIQ: 0,\r\n  VOL: 1,\r\n  FEES: 2,\r\n  APR: 3,\r\n}\r\n\r\nconst ITEM_PER_PAGE = 8\r\n\r\nconst PoolList = ({\r\n  currencies,\r\n  searchValue,\r\n  isShowOnlyActiveFarmPools,\r\n  onlyShowStable,\r\n  shouldShowLowTVLPools,\r\n}: PoolListProps) => {\r\n  const above1000 = useMedia('(min-width: 1000px)')\r\n\r\n  const [sortDirection, setSortDirection] = useState(true)\r\n  const [sortedColumn, setSortedColumn] = useState(SORT_FIELD.LIQ)\r\n  const { loading: loadingPoolsData, data: subgraphPoolsData } = useAllPoolsData()\r\n\r\n  const { account, chainId, networkInfo, isEVM } = useActiveWeb3React()\r\n\r\n  useResetPools(chainId)\r\n\r\n  const userLiquidityPositionsQueryResult = useUserLiquidityPositions()\r\n  const loadingUserLiquidityPositions = !account ? false : userLiquidityPositionsQueryResult.loading\r\n  const userLiquidityPositions = !account ? { liquidityPositions: [] } : userLiquidityPositionsQueryResult.data\r\n  const transformedUserLiquidityPositions: {\r\n    [key: string]: UserLiquidityPosition\r\n  } = {}\r\n  userLiquidityPositions &&\r\n    userLiquidityPositions.liquidityPositions.forEach(position => {\r\n      transformedUserLiquidityPositions[position.pool.id] = position\r\n    })\r\n\r\n  const listComparator = useCallback(\r\n    (poolA: SubgraphPoolData, poolB: SubgraphPoolData): number => {\r\n      const feeA = poolA?.oneDayFeeUSD ? poolA?.oneDayFeeUSD : poolA?.oneDayFeeUntracked\r\n      const feeB = poolB?.oneDayFeeUSD ? poolB?.oneDayFeeUSD : poolB?.oneDayFeeUntracked\r\n\r\n      switch (sortedColumn) {\r\n        case SORT_FIELD.LIQ:\r\n          return parseFloat(poolA?.amp?.toString() || '0') * parseFloat(poolA?.reserveUSD) >\r\n            parseFloat(poolB?.amp?.toString() || '0') * parseFloat(poolB?.reserveUSD)\r\n            ? (sortDirection ? -1 : 1) * 1\r\n            : (sortDirection ? -1 : 1) * -1\r\n        case SORT_FIELD.VOL:\r\n          const volumeA = poolA?.oneDayVolumeUSD ? poolA?.oneDayVolumeUSD : poolA?.oneDayVolumeUntracked\r\n\r\n          const volumeB = poolB?.oneDayVolumeUSD ? poolB?.oneDayVolumeUSD : poolB?.oneDayVolumeUntracked\r\n\r\n          return parseFloat(volumeA) > parseFloat(volumeB)\r\n            ? (sortDirection ? -1 : 1) * 1\r\n            : (sortDirection ? -1 : 1) * -1\r\n        case SORT_FIELD.FEES:\r\n          return parseFloat(feeA) > parseFloat(feeB) ? (sortDirection ? -1 : 1) * 1 : (sortDirection ? -1 : 1) * -1\r\n        case SORT_FIELD.APR:\r\n          const oneYearFLPoolA =\r\n            getTradingFeeAPR(poolA?.reserveUSD, feeA) > MAX_ALLOW_APY ? -1 : getTradingFeeAPR(poolA?.reserveUSD, feeA)\r\n          const oneYearFLPoolB =\r\n            getTradingFeeAPR(poolB?.reserveUSD, feeB) > MAX_ALLOW_APY ? -1 : getTradingFeeAPR(poolB?.reserveUSD, feeB)\r\n\r\n          return oneYearFLPoolA > oneYearFLPoolB ? (sortDirection ? -1 : 1) * 1 : (sortDirection ? -1 : 1) * -1\r\n        default:\r\n          break\r\n      }\r\n\r\n      return 0\r\n    },\r\n    [sortDirection, sortedColumn],\r\n  )\r\n\r\n  const renderHeader = () => {\r\n    return above1000 ? (\r\n      <TableHeader>\r\n        <Flex alignItems=\"center\">\r\n          <ClickableText>\r\n            <Trans>Token Pair</Trans>\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\">\r\n          <ClickableText>\r\n            <Trans>Pool | AMP</Trans>\r\n          </ClickableText>\r\n          <InfoHelper text={AMP_HINT} />\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.LIQ)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.LIQ ? true : !sortDirection)\r\n            }}\r\n            style={{ textAlign: 'right' }}\r\n          >\r\n            <Trans>AMP LIQUIDITY</Trans>\r\n            <InfoHelper text={AMP_LIQUIDITY_HINT} />\r\n            <span style={{ marginLeft: '0.25rem' }}>|</span>\r\n            <span style={{ marginLeft: '0.25rem' }}>TVL</span>\r\n            {sortedColumn === SORT_FIELD.LIQ ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex\r\n          alignItems=\"center\"\r\n          justifyContent=\"flex-end\"\r\n          sx={{\r\n            paddingRight: '20px', // to make the money bag icon in the cells vertically align\r\n          }}\r\n        >\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.APR)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.APR ? true : !sortDirection)\r\n            }}\r\n          >\r\n            <Trans>APR</Trans>\r\n            {sortedColumn === SORT_FIELD.APR ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n          <InfoHelper text={t`Estimated return based on yearly fees of the pool`} />\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.VOL)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.VOL ? true : !sortDirection)\r\n            }}\r\n            style={{ textAlign: 'right' }}\r\n          >\r\n            <Trans>Volume (24h)</Trans>\r\n            {sortedColumn === SORT_FIELD.VOL ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.FEES)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.FEES ? true : !sortDirection)\r\n            }}\r\n          >\r\n            <Trans>Fee (24h)</Trans>\r\n            {sortedColumn === SORT_FIELD.FEES ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText style={{ textAlign: 'right' }}>\r\n            <Trans>My liquidity</Trans>\r\n          </ClickableText>\r\n        </Flex>\r\n\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText>\r\n            <Trans>Actions</Trans>\r\n          </ClickableText>\r\n        </Flex>\r\n      </TableHeader>\r\n    ) : null\r\n  }\r\n\r\n  const { data: farms } = useActiveAndUniqueFarmsData()\r\n\r\n  const sortedFilteredSubgraphPoolsData = useMemo(() => {\r\n    let res = [...subgraphPoolsData].sort(listComparator)\r\n\r\n    if (isShowOnlyActiveFarmPools) {\r\n      const farmAddresses = farms.map(farm => farm.id)\r\n      res = res.filter(poolData => farmAddresses.includes(poolData.id))\r\n    }\r\n\r\n    if (!shouldShowLowTVLPools) {\r\n      res = res.filter(poolData => parseFloat(poolData.reserveUSD) > 1)\r\n    }\r\n\r\n    const ca = currencies[Field.CURRENCY_A]\r\n    const cb = currencies[Field.CURRENCY_B]\r\n\r\n    if (ca) {\r\n      const wca = ca.wrapped\r\n      const wcaAddress = wca && wca.address.toLowerCase()\r\n      res = res.filter(\r\n        poolData => wcaAddress && (poolData.token0.id === wcaAddress || poolData.token1.id === wcaAddress),\r\n      )\r\n    }\r\n\r\n    if (cb) {\r\n      const wcb = cb.wrapped\r\n      const wcbAddress = wcb && wcb.address.toLowerCase()\r\n      res = res.filter(\r\n        poolData => wcbAddress && (poolData.token0.id === wcbAddress || poolData.token1.id === wcbAddress),\r\n      )\r\n    }\r\n\r\n    res = res.filter(poolData => {\r\n      const search = searchValue.toLowerCase()\r\n\r\n      return (\r\n        poolData.token0.symbol.toLowerCase().includes(search) ||\r\n        poolData.token1.symbol.toLowerCase().includes(search) ||\r\n        poolData.id.includes(search)\r\n      )\r\n    })\r\n\r\n    if (onlyShowStable) {\r\n      const stableList = isEVM ? STABLE_COINS_ADDRESS[chainId]?.map(item => item.toLowerCase()) || [] : []\r\n      res = res.filter(poolData => {\r\n        return (\r\n          stableList.includes(poolData.token0.id.toLowerCase()) && stableList.includes(poolData.token1.id.toLowerCase())\r\n        )\r\n      })\r\n    }\r\n\r\n    return res\r\n  }, [\r\n    subgraphPoolsData,\r\n    listComparator,\r\n    isShowOnlyActiveFarmPools,\r\n    shouldShowLowTVLPools,\r\n    currencies,\r\n    onlyShowStable,\r\n    farms,\r\n    searchValue,\r\n    chainId,\r\n    isEVM,\r\n  ])\r\n\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  useEffect(() => {\r\n    setCurrentPage(1)\r\n  }, [chainId, subgraphPoolsData, currencies, searchValue, isShowOnlyActiveFarmPools, onlyShowStable])\r\n\r\n  const sortedFilteredSubgraphPoolsObject = useMemo(() => {\r\n    const res = new Map<string, SubgraphPoolData[]>()\r\n    sortedFilteredSubgraphPoolsData.forEach(poolData => {\r\n      if (!poolData) return\r\n      const poolKey = poolData.token0.id + '-' + poolData.token1.id\r\n      const prevValue = res.get(poolKey)\r\n      res.set(poolKey, (prevValue ?? []).concat(poolData))\r\n    })\r\n    return res\r\n  }, [sortedFilteredSubgraphPoolsData])\r\n\r\n  const sortedFilteredPaginatedSubgraphPoolsList = useMemo(() => {\r\n    const startIndex = (currentPage - 1) * ITEM_PER_PAGE\r\n    const endIndex = currentPage * ITEM_PER_PAGE\r\n    const res = Array.from(sortedFilteredSubgraphPoolsObject, ([, pools]) => pools[0]).slice(startIndex, endIndex)\r\n    return res\r\n  }, [currentPage, sortedFilteredSubgraphPoolsObject])\r\n\r\n  const [expandedPoolKey, setExpandedPoolKey] = useState<string>()\r\n\r\n  // Active first expandable pool in first page for first time.\r\n  useEffect(() => {\r\n    if (!above1000 || expandedPoolKey !== undefined) return\r\n\r\n    const firstPoolHasMoreThanTwoExpandedPools = sortedFilteredPaginatedSubgraphPoolsList.filter(poolData => {\r\n      const poolKey = poolData.token0.id + '-' + poolData.token1.id\r\n\r\n      const expandedPools = sortedFilteredSubgraphPoolsObject.get(poolKey) ?? []\r\n\r\n      return expandedPools.length >= 2\r\n    })\r\n\r\n    firstPoolHasMoreThanTwoExpandedPools.length &&\r\n      setExpandedPoolKey(\r\n        firstPoolHasMoreThanTwoExpandedPools[0].token0.id + '-' + firstPoolHasMoreThanTwoExpandedPools[0].token1.id,\r\n      )\r\n  }, [above1000, sortedFilteredPaginatedSubgraphPoolsList, expandedPoolKey, sortedFilteredSubgraphPoolsObject])\r\n\r\n  const [sharedPoolId, setSharedPoolId] = useSharedPoolIdManager()\r\n  const openShareModal = useOpenModal(ApplicationModal.SHARE)\r\n  const isShareModalOpen = useModalOpen(ApplicationModal.SHARE)\r\n\r\n  const chainRoute = networkInfo.route\r\n  const shareUrl = sharedPoolId\r\n    ? window.location.origin + `/pools/${chainRoute}?tab=classic&search=` + sharedPoolId\r\n    : undefined\r\n\r\n  useEffect(() => {\r\n    if (sharedPoolId) {\r\n      openShareModal()\r\n    }\r\n  }, [openShareModal, sharedPoolId])\r\n\r\n  useEffect(() => {\r\n    if (!isShareModalOpen) {\r\n      setSharedPoolId(undefined)\r\n    }\r\n  }, [isShareModalOpen, setSharedPoolId])\r\n\r\n  if (loadingUserLiquidityPositions || loadingPoolsData) return <LocalLoader />\r\n\r\n  if (sortedFilteredPaginatedSubgraphPoolsList.length === 0)\r\n    return (\r\n      <SelectPairInstructionWrapper>\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          <Trans>There are no pools for this token pair.</Trans>\r\n        </div>\r\n        <div>\r\n          <Trans>Create a new pool or select another pair of tokens to view the available pools.</Trans>\r\n        </div>\r\n      </SelectPairInstructionWrapper>\r\n    )\r\n\r\n  return (\r\n    <PageWrapper data-above1000={above1000}>\r\n      {renderHeader()}\r\n      {sortedFilteredPaginatedSubgraphPoolsList.map(poolData => {\r\n        if (poolData) {\r\n          return above1000 ? (\r\n            <ListItem\r\n              key={poolData.id}\r\n              sortedFilteredSubgraphPoolsObject={sortedFilteredSubgraphPoolsObject}\r\n              poolData={poolData}\r\n              userLiquidityPositions={transformedUserLiquidityPositions}\r\n              expandedPoolKey={expandedPoolKey}\r\n              setExpandedPoolKey={setExpandedPoolKey}\r\n            />\r\n          ) : (\r\n            <ItemCardGroup\r\n              key={poolData.id}\r\n              sortedFilteredSubgraphPoolsObject={sortedFilteredSubgraphPoolsObject}\r\n              poolData={poolData}\r\n              userLiquidityPositions={transformedUserLiquidityPositions}\r\n              expandedPoolKey={expandedPoolKey}\r\n              setExpandedPoolKey={setExpandedPoolKey}\r\n            />\r\n          )\r\n        }\r\n\r\n        return null\r\n      })}\r\n      <Pagination\r\n        pageSize={ITEM_PER_PAGE}\r\n        onPageChange={newPage => setCurrentPage(newPage)}\r\n        currentPage={currentPage}\r\n        totalCount={sortedFilteredSubgraphPoolsObject.size}\r\n        haveBg={above1000}\r\n      />\r\n      <PoolDetailModal />\r\n      <ShareModal url={shareUrl} />\r\n    </PageWrapper>\r\n  )\r\n}\r\n\r\nexport default PoolList\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDropdown(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.97168 1L6.20532 6L11.439 1\",\n    stroke: \"#AEAEAE\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDropdown);\nexport default __webpack_public_path__ + \"static/media/dropdown.f414ec6b.svg\";\nexport { ForwardRef as ReactComponent };","import { Pair } from '@kyberswap/ks-sdk-classic'\r\nimport { Currency } from '@kyberswap/ks-sdk-core'\r\nimport { Trans } from '@lingui/macro'\r\nimport { darken } from 'polished'\r\nimport React, { useCallback, useState } from 'react'\r\nimport { X } from 'react-feather'\r\nimport styled from 'styled-components'\r\n\r\nimport { ReactComponent as DropDown } from 'assets/images/dropdown.svg'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport CurrencySearchModal from 'components/SearchModal/CurrencySearchModal'\r\nimport { useCurrencyConvertedToNative } from 'utils/dmm'\r\n\r\nconst InputRow = styled.div<{ selected: boolean }>`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: center;\r\n  padding: ${({ selected }) => (selected ? '0.75rem 0.5rem 0.75rem 1rem' : '0.75rem 0.75rem 0.75rem 1rem')};\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    width: 100%;\r\n  `};\r\n`\r\n\r\nconst CurrencySelect = styled.button<{ selected: boolean }>`\r\n  align-items: center;\r\n  height: 2.25rem;\r\n  font-size: 20px;\r\n  font-weight: 500;\r\n  background-color: ${({ theme }) => theme.background};\r\n  border: 1px solid transparent;\r\n  color: ${({ theme }) => theme.text};\r\n  border-radius: 40px;\r\n  outline: none;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  padding: 0 0.5rem;\r\n\r\n  :hover {\r\n    background-color: ${({ selected, theme }) => (selected ? theme.bg2 : darken(0.05, theme.primary))};\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    width: 100%;\r\n  `};\r\n`\r\n\r\nconst Aligner = styled.span`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    width: 100%;\r\n  `};\r\n`\r\n\r\nconst StyledDropDown = styled(DropDown)`\r\n  margin: 0 0.25rem 0 0.5rem;\r\n  height: 35%;\r\n\r\n  path {\r\n    stroke: ${({ theme }) => theme.text};\r\n    stroke-width: 1.5px;\r\n  }\r\n`\r\n\r\nconst StyledX = styled(X)`\r\n  margin: 0 0.25rem 0 0.5rem;\r\n\r\n  path,\r\n  line {\r\n    stroke: ${({ theme }) => theme.text};\r\n  }\r\n\r\n  :hover {\r\n    path,\r\n    line {\r\n      stroke: ${({ theme }) => theme.subText};\r\n    }\r\n  }\r\n`\r\n\r\nconst InputPanel = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  position: relative;\r\n  border-radius: 4px;\r\n  background-color: transparent;\r\n  z-index: 1;\r\n`\r\n\r\nconst Container = styled.div``\r\n\r\nconst LogoNameWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\n\r\nconst StyledTokenName = styled.span<{ active?: boolean }>`\r\n  ${({ active }) => (active ? '  margin: 0 0.25rem 0 0.75rem;' : '  margin: 0 0.25rem 0 0.25rem;')}\r\n  font-size:  ${({ active }) => (active ? '16px' : '14px')};\r\n  min-width: max-content;\r\n`\r\n\r\ninterface CurrencyInputPanelProps {\r\n  onCurrencySelect?: (currency: Currency) => void\r\n  onClearCurrency?: () => void\r\n  currency?: Currency | null\r\n  disableCurrencySelect?: boolean\r\n  pair?: Pair | null\r\n  otherCurrency?: Currency | null\r\n  id: string\r\n  showCommonBases?: boolean\r\n}\r\n\r\nexport default function PoolsCurrencyInputPanel({\r\n  onCurrencySelect,\r\n  onClearCurrency,\r\n  currency,\r\n  disableCurrencySelect = false,\r\n  pair = null, // used for double token logo\r\n  otherCurrency,\r\n  id,\r\n  showCommonBases,\r\n}: CurrencyInputPanelProps) {\r\n  const [modalOpen, setModalOpen] = useState(false)\r\n\r\n  const handleDismissSearch = useCallback(() => {\r\n    setModalOpen(false)\r\n  }, [setModalOpen])\r\n\r\n  const nativeCurrency = useCurrencyConvertedToNative(currency || undefined)\r\n\r\n  const clearCurrency = (event: React.MouseEvent<SVGElement>) => {\r\n    event.stopPropagation()\r\n    onClearCurrency && onClearCurrency()\r\n  }\r\n\r\n  return (\r\n    <InputPanel id={id}>\r\n      <Container>\r\n        <InputRow style={{ padding: '0', borderRadius: '8px' }} selected={disableCurrencySelect}>\r\n          <CurrencySelect\r\n            selected={!!currency}\r\n            className=\"open-currency-select-button\"\r\n            onClick={() => {\r\n              if (!disableCurrencySelect) {\r\n                setModalOpen(true)\r\n              }\r\n            }}\r\n          >\r\n            <Aligner>\r\n              <LogoNameWrapper>\r\n                {pair ? (\r\n                  <DoubleCurrencyLogo currency0={pair.token0} currency1={pair.token1} size={24} margin={true} />\r\n                ) : currency ? (\r\n                  <CurrencyLogo currency={currency || undefined} size={'24px'} />\r\n                ) : null}\r\n                {pair ? (\r\n                  <StyledTokenName className=\"pair-name-container\">\r\n                    {pair?.token0.symbol}:{pair?.token1.symbol}\r\n                  </StyledTokenName>\r\n                ) : (\r\n                  <StyledTokenName className=\"token-symbol-container\" active={Boolean(currency && currency.symbol)}>\r\n                    {(nativeCurrency && nativeCurrency.symbol && nativeCurrency.symbol.length > 20\r\n                      ? nativeCurrency.symbol.slice(0, 4) +\r\n                        '...' +\r\n                        nativeCurrency.symbol.slice(nativeCurrency.symbol.length - 5, nativeCurrency.symbol.length)\r\n                      : nativeCurrency?.symbol) || <Trans>All Tokens</Trans>}\r\n                  </StyledTokenName>\r\n                )}\r\n              </LogoNameWrapper>\r\n              {!disableCurrencySelect && !currency && <StyledDropDown />}\r\n              {!disableCurrencySelect && currency && <StyledX size={16} onClick={clearCurrency} />}\r\n            </Aligner>\r\n          </CurrencySelect>\r\n        </InputRow>\r\n      </Container>\r\n      {!disableCurrencySelect && onCurrencySelect && (\r\n        <CurrencySearchModal\r\n          isOpen={modalOpen}\r\n          onDismiss={handleDismissSearch}\r\n          onCurrencySelect={onCurrencySelect}\r\n          selectedCurrency={currency}\r\n          otherSelectedCurrency={otherCurrency}\r\n          showCommonBases={showCommonBases}\r\n        />\r\n      )}\r\n    </InputPanel>\r\n  )\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgZiczac(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.6 1.19996C20.2772 1.19756 19.2029 2.268 19.2005 3.59086C19.1993 4.21435 19.4414 4.81374 19.8752 5.26158L15.4904 14.0296C15.3943 14.0137 15.2973 14.0038 15.2 14C14.8902 14.0006 14.5834 14.0615 14.2968 14.1792L10.8928 10.3512C11.0915 9.99989 11.1973 9.60366 11.2 9.20002C11.2 7.87453 10.1255 6.80002 8.80003 6.80002C7.47455 6.80002 6.40003 7.87453 6.40003 9.20002C6.40237 9.77292 6.61148 10.3257 6.98883 10.7568L2.82881 18.0432C2.68744 18.016 2.54395 18.0015 2.4 18C1.07452 18 0 19.0745 0 20.4C0 21.7254 1.07452 22.8 2.4 22.8C3.72548 22.8 4.8 21.7254 4.8 20.4C4.79766 19.827 4.58855 19.2743 4.2112 18.8431L8.37122 11.5568C8.8178 11.645 9.28055 11.5976 9.70003 11.4208L13.104 15.2488C12.9065 15.6004 12.8018 15.9966 12.8001 16.4C12.7961 17.7255 13.8673 18.8032 15.1928 18.8072C16.5183 18.8112 17.596 17.7399 17.6 16.4145C17.6019 15.7891 17.3596 15.1878 16.9248 14.7384L21.3096 5.97038C21.4057 5.98631 21.5027 5.99621 21.6 5.99996C22.9255 5.99996 24 4.92544 24 3.59996C24 2.27447 22.9255 1.19996 21.6 1.19996ZM2.4 21.2C1.95816 21.2 1.59998 20.8418 1.59998 20.4C1.59998 19.9581 1.95816 19.5999 2.4 19.5999C2.84184 19.5999 3.20002 19.9581 3.20002 20.4C3.20002 20.8418 2.84184 21.2 2.4 21.2ZM8.79998 9.99994C8.35814 9.99994 7.99997 9.64177 7.99997 9.19992C7.99997 8.75808 8.35814 8.39991 8.79998 8.39991C9.24183 8.39991 9.6 8.75808 9.6 9.19992C9.6 9.64177 9.24183 9.99994 8.79998 9.99994ZM15.2 17.1999C14.7582 17.1999 14.4 16.8418 14.4 16.3999C14.4 15.9581 14.7582 15.5999 15.2 15.5999C15.6419 15.5999 16 15.9581 16 16.3999C16 16.8418 15.6418 17.1999 15.2 17.1999ZM21.6 4.39997C21.1582 4.39997 20.8 4.0418 20.8 3.59996C20.8 3.15811 21.1582 2.79994 21.6 2.79994C22.0418 2.79994 22.4 3.15811 22.4 3.59996C22.4 4.0418 22.0418 4.39997 21.6 4.39997Z\",\n    fill: \"#31CB9E\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgZiczac);\nexport default __webpack_public_path__ + \"static/media/ziczac.7ee8f5de.svg\";\nexport { ForwardRef as ReactComponent };","import { Token, WETH } from '@kyberswap/ks-sdk-core'\r\nimport { Trans } from '@lingui/macro'\r\nimport { Link } from 'react-router-dom'\r\nimport { Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport { FadeInAnimation } from 'components/Animation'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport { MoneyBag } from 'components/Icons'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport { NativeCurrencies } from 'constants/tokens'\r\nimport { VERSION } from 'constants/v2'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useToken } from 'hooks/Tokens'\r\nimport useMarquee from 'hooks/useMarquee'\r\nimport useParsedQueryString from 'hooks/useParsedQueryString'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useElasticFarms } from 'state/farms/elastic/hooks'\r\nimport { useActiveAndUniqueFarmsData } from 'state/farms/hooks'\r\n\r\nconst StyledLink = styled(Link)`\r\n  display: flex;\r\n  gap: 4px;\r\n  align-items: center;\r\n  padding-right: 12px;\r\n  background: ${({ theme }) => theme.buttonBlack};\r\n\r\n  min-width: fit-content;\r\n  color: ${({ theme }) => theme.subText};\r\n  text-decoration: none;\r\n\r\n  :not(:last-child) {\r\n    border-right: 1px solid ${({ theme }) => theme.border};\r\n  }\r\n`\r\n\r\nconst MarqueeItem = ({ token0: address0, token1: address1 }: { token0: string; token1: string }) => {\r\n  const { chainId, networkInfo } = useActiveWeb3React()\r\n\r\n  const token0 = useToken(address0) as Token\r\n  const currency0 =\r\n    chainId && address0.toLowerCase() === WETH[chainId].address.toLowerCase() ? NativeCurrencies[chainId] : token0\r\n\r\n  const token1 = useToken(address1) as Token\r\n  const currency1 =\r\n    chainId && address1.toLowerCase() === WETH[chainId].address.toLowerCase() ? NativeCurrencies[chainId] : token1\r\n\r\n  const { tab = VERSION.ELASTIC } = useParsedQueryString<{\r\n    tab: string\r\n  }>()\r\n  if (!token0 || !token1) return null\r\n\r\n  const token0Address = currency0.isNative ? currency0.symbol : token0.address\r\n  const token1Address = currency1.isNative ? currency1.symbol : token1.address\r\n\r\n  return (\r\n    <StyledLink to={`/pools/${networkInfo.route}/${token0Address}/${token1Address}?tab=${tab}`}>\r\n      <CurrencyLogo currency={currency0} size=\"16px\" />\r\n      <Text fontSize=\"12px\">\r\n        {currency0.symbol} - {currency1.symbol}\r\n      </Text>\r\n      <CurrencyLogo currency={currency1} size=\"16px\" />\r\n    </StyledLink>\r\n  )\r\n}\r\n\r\nconst FarmingPoolsMarquee = ({ tab }: { tab: string }) => {\r\n  const { data: uniqueAndActiveFarms } = useActiveAndUniqueFarmsData()\r\n\r\n  const { farms } = useElasticFarms()\r\n  const theme = useTheme()\r\n\r\n  const existedPairs: { [key: string]: boolean } = {}\r\n\r\n  const activePrommFarm =\r\n    farms\r\n      ?.map(farm => farm.pools)\r\n      .flat()\r\n      .filter(item => item.endTime > +new Date() / 1000)\r\n      .filter(item => {\r\n        const key = item.token0.wrapped.address + '_' + item.token1.wrapped.address\r\n        if (existedPairs[key]) return false\r\n        existedPairs[key] = true\r\n        return true\r\n      }) || []\r\n\r\n  const increaseRef = useMarquee(tab === VERSION.ELASTIC ? activePrommFarm : uniqueAndActiveFarms)\r\n\r\n  if (tab === VERSION.CLASSIC && uniqueAndActiveFarms.length === 0) return null\r\n  if (tab === VERSION.ELASTIC && activePrommFarm.length === 0) return null\r\n\r\n  return (\r\n    <FadeInAnimation>\r\n      <Container>\r\n        <Title>\r\n          <MouseoverTooltip text=\"Available for yield farming\">\r\n            <MoneyBag size={16} color={theme.apr} />\r\n          </MouseoverTooltip>\r\n\r\n          <TitleText>\r\n            <Trans>Farming Pools</Trans>\r\n          </TitleText>\r\n        </Title>\r\n        <MarqueeSection>\r\n          <MarqueeWrapper ref={increaseRef}>\r\n            <Marquee>\r\n              {tab === VERSION.CLASSIC\r\n                ? uniqueAndActiveFarms.map(farm => (\r\n                    <MarqueeItem\r\n                      key={`${farm.token0?.symbol}-${farm.token1?.symbol}`}\r\n                      token0={farm.token0.id}\r\n                      token1={farm.token1.id}\r\n                    />\r\n                  ))\r\n                : activePrommFarm.map(farm => (\r\n                    <MarqueeItem\r\n                      key={`${farm.token0.wrapped.address}-${farm.token1.wrapped.address}`}\r\n                      token0={farm.token0.wrapped.address}\r\n                      token1={farm.token1.wrapped.address}\r\n                    />\r\n                  ))}\r\n            </Marquee>\r\n          </MarqueeWrapper>\r\n        </MarqueeSection>\r\n      </Container>\r\n    </FadeInAnimation>\r\n  )\r\n}\r\n\r\nexport default FarmingPoolsMarquee\r\n\r\nconst Container = styled.div`\r\n  overflow: hidden;\r\n  display: flex;\r\n  gap: 16px;\r\n  padding: 6px 6px 6px 12px;\r\n  background: ${({ theme }) => theme.background};\r\n  border-radius: 999px;\r\n  align-items: center;\r\n  position: relative;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    background: ${({ theme }) => theme.buttonBlack};\r\n    padding: 0;\r\n  `}\r\n`\r\n\r\nconst Title = styled.div`\r\n  font-size: 14px;\r\n  min-width: max-content;\r\n  display: flex;\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.subText};\r\n  gap: 4px;\r\n`\r\n\r\nconst TitleText = styled.span`\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    display: none;\r\n  `}\r\n`\r\n\r\nconst MarqueeSection = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: auto 1fr auto;\r\n  overflow: hidden;\r\n  z-index: 1;\r\n  background: ${({ theme }) => theme.buttonBlack};\r\n  border-radius: 999px;\r\n  padding: 6px 12px;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    padding: 6px 0;\r\n  `}\r\n`\r\n\r\nconst MarqueeWrapper = styled.div`\r\n  overflow: scroll;\r\n  width: 100%;\r\n\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst Marquee = styled.div`\r\n  min-width: max-content;\r\n  overflow: hidden;\r\n  display: flex;\r\n  gap: 12px;\r\n`\r\n","import { Trans } from '@lingui/macro'\r\nimport { useState } from 'react'\r\nimport { isMobile } from 'react-device-detect'\r\nimport { ChevronDown } from 'react-feather'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport { ReactComponent as ZicZac } from 'assets/svg/ziczac.svg'\r\nimport { BestPrice, LowestSlippage, MoneyBagOutline } from 'components/Icons'\r\nimport AntiSnippingAttack from 'components/Icons/AntiSnippingAttack'\r\nimport Loader from 'components/Loader'\r\nimport { VERSION } from 'constants/v2'\r\nimport useParsedQueryString from 'hooks/useParsedQueryString'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useGlobalData } from 'state/about/hooks'\r\nimport { ExternalLink } from 'theme'\r\nimport { formatBigLiquidity } from 'utils/formatBalance'\r\n\r\nconst Wrapper = styled.div`\r\n  gap: 12px;\r\n  display: flex;\r\n\r\n  @media only screen and (max-width: 880px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst ShowDetailBtn = styled.button<{ isOpen?: boolean }>`\r\n  border: none;\r\n  outline: none;\r\n  line-height: 0;\r\n  padding: 0;\r\n  background: transparent;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n  transform: rotate(${({ isOpen }) => (isOpen ? '-180deg' : 0)});\r\n  color: ${({ theme }) => theme.text};\r\n`\r\n\r\nconst DetailWrapper = styled.div<{ isOpen?: boolean }>`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr 1fr;\r\n  gap: 24px;\r\n  margin-top: ${({ isOpen }) => (isOpen ? '16px' : 0)};\r\n  height: ${({ isOpen }) => (isOpen ? 'auto' : 0)};\r\n  max-height: ${({ isOpen }) => (isOpen ? '1000px' : 0)};\r\n  transition: margin-top 200ms ease, height 200ms ease;\r\n  overflow: hidden;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n      grid-template-columns: 1fr;\r\n  `}\r\n`\r\n\r\nconst DetailWrapperClassic = styled(DetailWrapper)`\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n      grid-template-columns: 1fr;\r\n  `}\r\n`\r\nconst DetailItem = styled.div`\r\n  border-radius: 20px;\r\n  padding: 16px;\r\n  background: ${({ theme }) => theme.background};\r\n  color: ${({ theme }) => theme.subText};\r\n  font-size: 12px;\r\n  display: flex;\r\n  gap: 8px;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n      background: transparent;\r\n      grid-template-columns: 1fr;\r\n      align-items: center;\r\n      padding: 0;\r\n      gap: 12px;\r\n  `}\r\n`\r\n\r\nexport const GlobalData = () => {\r\n  const data = useGlobalData()\r\n\r\n  const globalData = data && data.dmmFactories[0]\r\n  const aggregatorData = data?.aggregatorData\r\n\r\n  return (\r\n    <Wrapper>\r\n      <GlobalDataItem>\r\n        <GlobalDataItemTitle>\r\n          <Trans>Total Trading Volume:</Trans>&nbsp;\r\n        </GlobalDataItemTitle>\r\n        <GlobalDataItemValue>\r\n          {aggregatorData?.totalVolume ? formatBigLiquidity(aggregatorData.totalVolume, 2, true) : <Loader />}\r\n        </GlobalDataItemValue>\r\n      </GlobalDataItem>\r\n      <GlobalDataItem>\r\n        <GlobalDataItemTitle>\r\n          <Trans>Total Value Locked:</Trans>&nbsp;\r\n        </GlobalDataItemTitle>\r\n        <GlobalDataItemValue>\r\n          {globalData ? formatBigLiquidity(globalData.totalLiquidityUSD, 2, true) : <Loader />}\r\n        </GlobalDataItemValue>\r\n      </GlobalDataItem>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport const Instruction = () => {\r\n  const { tab = VERSION.ELASTIC } = useParsedQueryString<{ tab: string }>()\r\n\r\n  const theme = useTheme()\r\n\r\n  const [show, setShow] = useState(!isMobile) // hide by default on mobile\r\n\r\n  return (\r\n    <InstructionItem>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n        <Text lineHeight=\"24px\">\r\n          {tab === VERSION.ELASTIC ? (\r\n            <Trans>Add liquidity to our Elastic Pools and earn trading fees automatically.</Trans>\r\n          ) : (\r\n            <Trans>Add liquidity to our Classic Pools & earn trading fees automatically.</Trans>\r\n          )}\r\n          &nbsp;\r\n          <ExternalLink\r\n            href={\r\n              tab === VERSION.ELASTIC\r\n                ? 'https://docs.kyberswap.com/guides/creating-a-pool'\r\n                : 'https://docs.kyberswap.com/classic/guides/basic-pool-creation'\r\n            }\r\n          >\r\n            <Trans>Learn More ↗</Trans>\r\n          </ExternalLink>\r\n        </Text>\r\n        <ShowDetailBtn isOpen={show} onClick={() => setShow(prev => !prev)}>\r\n          <ChevronDown size={24} />\r\n        </ShowDetailBtn>\r\n      </Flex>\r\n\r\n      {tab === VERSION.ELASTIC ? (\r\n        <DetailWrapper isOpen={show}>\r\n          <DetailItem>\r\n            <BestPrice size={24} />\r\n            <Text flex={1}>Add liquidity in any price range you want and earn more with concentrated liquidity</Text>\r\n          </DetailItem>\r\n\r\n          <DetailItem>\r\n            <LowestSlippage size={24} />\r\n            <Text flex={1}>Your trading fee earnings will be compounded automatically (in the full price range)</Text>\r\n          </DetailItem>\r\n\r\n          <DetailItem>\r\n            <MoneyBagOutline size={24} color={theme.primary} />\r\n            <Text flex={1}>Collect your fee earnings whenever you want, without removing your initial liquidity</Text>\r\n          </DetailItem>\r\n\r\n          <DetailItem>\r\n            <AntiSnippingAttack size={24} />\r\n            <Text flex={1}>\r\n              We protect liquidity providers like you from sniping attacks so you continue to earn more trading fees\r\n            </Text>\r\n          </DetailItem>\r\n        </DetailWrapper>\r\n      ) : (\r\n        <DetailWrapperClassic isOpen={show}>\r\n          <DetailItem>\r\n            <BestPrice size={24} />\r\n            <Text flex={1}>\r\n              We amplify liquidity pools (using the AMP factor) to achieve high capital efficiency so you earn more\r\n              trading fees even with less liquidity\r\n            </Text>\r\n          </DetailItem>\r\n\r\n          <DetailItem>\r\n            <ZicZac />\r\n            <Text flex={1}>\r\n              You can create pools by setting your own static fees or by using dynamic fees. With dynamic fees, trading\r\n              fees are adjusted on-the-fly based on market conditions\r\n            </Text>\r\n          </DetailItem>\r\n\r\n          <DetailItem>\r\n            <LowestSlippage size={24} />\r\n            <Text flex={1}>Your trading fee earnings will be compounded automatically</Text>\r\n          </DetailItem>\r\n        </DetailWrapperClassic>\r\n      )}\r\n    </InstructionItem>\r\n  )\r\n}\r\n\r\nconst GlobalDataItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  background: ${({ theme }) => theme.background};\r\n  padding: 6px 12px;\r\n  border-radius: 999px;\r\n`\r\n\r\nconst GlobalDataItemTitle = styled.span`\r\n  font-size: 12px;\r\n  color: ${({ theme }) => theme.subText};\r\n`\r\n\r\nconst GlobalDataItemValue = styled.span`\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.text};\r\n`\r\n\r\nconst InstructionItem = styled.div`\r\n  padding: 1rem 0;\r\n  font-size: 12px;\r\n  color: ${({ theme }) => theme.subText};\r\n  line-height: 1.5;\r\n  border-top: 1px solid ${({ theme }) => theme.border};\r\n  border-bottom: 1px solid ${({ theme }) => theme.border};\r\n`\r\n","import { useQuery } from '@apollo/client'\r\nimport { ChainId } from '@kyberswap/ks-sdk-core'\r\nimport dayjs from 'dayjs'\r\nimport { useEffect, useState } from 'react'\r\n\r\nimport { PROMM_POOLS_BULK, ProMMPoolFields } from 'apollo/queries/promm'\r\nimport { ELASTIC_BASE_FEE_UNIT } from 'constants/index'\r\nimport { NETWORKS_INFO, isEVM } from 'constants/networks'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { ElasticPoolDetail } from 'types/pool'\r\nimport { getBlocksFromTimestamps } from 'utils'\r\n\r\nimport { CommonReturn } from '.'\r\n\r\ninterface PoolDataResponse {\r\n  pools: ProMMPoolFields[]\r\n}\r\n\r\ntype PoolAccumulator = Record<string, ProMMPoolFields>\r\n\r\nconst usePoolBlocks = () => {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const utcCurrentTime = dayjs()\r\n  const last24h = utcCurrentTime.subtract(1, 'day').startOf('minute').unix()\r\n\r\n  const [blocks, setBlocks] = useState<{ number: number }[]>([])\r\n\r\n  useEffect(() => {\r\n    const getBlocks = async () => {\r\n      const blocks = await getBlocksFromTimestamps([last24h], chainId)\r\n      setBlocks(blocks)\r\n    }\r\n\r\n    getBlocks()\r\n  }, [chainId, last24h])\r\n\r\n  const [blockLast24h] = blocks ?? []\r\n\r\n  return { blockLast24h: blockLast24h?.number }\r\n}\r\n\r\nconst parsedPoolData = (\r\n  poolAddresses: Array<string>,\r\n  data: PoolDataResponse | undefined,\r\n  data24: PoolDataResponse | undefined,\r\n) => {\r\n  const parsed: PoolAccumulator = data?.pools\r\n    ? data.pools.reduce((acc, poolData) => {\r\n        acc[poolData.id] = poolData\r\n        return acc\r\n      }, {} as PoolAccumulator)\r\n    : {}\r\n\r\n  const parsed24: PoolAccumulator = data24?.pools\r\n    ? data24.pools.reduce((acc, poolData) => {\r\n        acc[poolData.id] = poolData\r\n        return acc\r\n      }, {} as PoolAccumulator)\r\n    : {}\r\n\r\n  // format data and calculate daily changes\r\n  const formatted = poolAddresses.reduce((acc: { [address: string]: ElasticPoolDetail }, address) => {\r\n    const current: ProMMPoolFields | undefined = parsed[address]\r\n    const oneDay: ProMMPoolFields | undefined = parsed24[address]\r\n\r\n    const volumeUSDLast24h =\r\n      current && oneDay\r\n        ? parseFloat(current.volumeUSD) - parseFloat(oneDay.volumeUSD)\r\n        : current\r\n        ? parseFloat(current.volumeUSD)\r\n        : 0\r\n\r\n    const tvlUSD = current ? parseFloat(current.totalValueLockedUSD) : 0\r\n\r\n    const tvlUSDLast24h =\r\n      current && oneDay\r\n        ? ((parseFloat(current.totalValueLockedUSD) - parseFloat(oneDay.totalValueLockedUSD)) /\r\n            parseFloat(oneDay.totalValueLockedUSD === '0' ? '1' : oneDay.totalValueLockedUSD)) *\r\n          100\r\n        : 0\r\n\r\n    const tvlToken0 = current ? parseFloat(current.totalValueLockedToken0) : 0\r\n    const tvlToken1 = current ? parseFloat(current.totalValueLockedToken1) : 0\r\n\r\n    const feeTier = current ? parseInt(current.feeTier) : 0\r\n\r\n    if (current) {\r\n      acc[address] = {\r\n        address,\r\n        feeTier,\r\n        liquidity: current.liquidity,\r\n        sqrtPrice: current.sqrtPrice,\r\n        reinvestL: current.reinvestL,\r\n        tick: parseFloat(current.tick),\r\n\r\n        token0: {\r\n          address: current.token0.id,\r\n          name: current.token0.name,\r\n          symbol: current.token0.symbol,\r\n          decimals: parseInt(current.token0.decimals),\r\n        },\r\n        token1: {\r\n          address: current.token1.id,\r\n          name: current.token1.name,\r\n          symbol: current.token1.symbol,\r\n          decimals: parseInt(current.token1.decimals),\r\n        },\r\n        token0Price: parseFloat(current.token0Price),\r\n        token1Price: parseFloat(current.token1Price),\r\n        tvlUSD: parseFloat(current.totalValueLockedUSD),\r\n        volumeUSDLast24h,\r\n        tvlUSDLast24h,\r\n        tvlToken0,\r\n        tvlToken1,\r\n        apr: tvlUSD > 0 ? (volumeUSDLast24h * (feeTier / ELASTIC_BASE_FEE_UNIT) * 100 * 365) / tvlUSD : 0,\r\n      }\r\n    }\r\n\r\n    return acc\r\n  }, {})\r\n\r\n  return formatted\r\n}\r\n\r\nconst useGetElasticPoolsV1 = (poolAddresses: string[], skip?: boolean): CommonReturn => {\r\n  const { chainId } = useActiveWeb3React()\r\n  const dataClient = isEVM(chainId)\r\n    ? NETWORKS_INFO[chainId].elasticClient\r\n    : NETWORKS_INFO[ChainId.MAINNET].elasticClient\r\n\r\n  const { blockLast24h } = usePoolBlocks()\r\n\r\n  const { loading, error, data } = useQuery<PoolDataResponse>(PROMM_POOLS_BULK(undefined, poolAddresses), {\r\n    client: dataClient,\r\n    fetchPolicy: 'no-cache',\r\n    skip,\r\n  })\r\n\r\n  const {\r\n    loading: loading24,\r\n    error: error24,\r\n    data: data24,\r\n  } = useQuery<PoolDataResponse>(PROMM_POOLS_BULK(blockLast24h, poolAddresses), {\r\n    client: dataClient,\r\n    fetchPolicy: 'no-cache',\r\n    skip,\r\n  })\r\n\r\n  const anyError = Boolean(error || error24)\r\n  const anyLoading = Boolean(loading || loading24)\r\n\r\n  // return early if not all data yet\r\n  if (anyError || anyLoading) {\r\n    return {\r\n      isLoading: anyLoading,\r\n      isError: anyError,\r\n      data: undefined,\r\n    }\r\n  }\r\n\r\n  const formatted = parsedPoolData(poolAddresses, data, data24)\r\n  return {\r\n    isLoading: anyLoading,\r\n    isError: anyError,\r\n    data: formatted,\r\n  }\r\n}\r\n\r\nexport default useGetElasticPoolsV1\r\n","import useSWRImmutable from 'swr/immutable'\r\n\r\nimport { CHAINS_SUPPORT_NEW_POOL_FARM_API, NETWORKS_INFO, isEVM } from 'constants/networks'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { ElasticPoolDetail } from 'types/pool'\r\n\r\nimport { CommonReturn } from '.'\r\n\r\nexport type RawToken = {\r\n  id: string\r\n  symbol: string\r\n  name: string\r\n  decimals: string\r\n}\r\n\r\nexport type ElasticPool = {\r\n  id: string\r\n\r\n  token0: RawToken\r\n  token1: RawToken\r\n\r\n  feeTier: string\r\n  liquidity: string\r\n  reinvestL: string\r\n  sqrtPrice: string\r\n  tick: string\r\n\r\n  volumeUsd: string\r\n  feesUsd: string\r\n\r\n  totalValueLockedUsd: string\r\n  feesUsdOneDayAgo: string\r\n  volumeUsdOneDayAgo: string\r\n\r\n  totalValueLockedUsdInRange: string\r\n  apr: string\r\n  farmApr: string\r\n}\r\n\r\ntype Response = {\r\n  code: number\r\n  message: string\r\n  data?: {\r\n    pools: Array<ElasticPool>\r\n  }\r\n}\r\n\r\ntype PoolAccumulator = { [address: string]: ElasticPoolDetail }\r\n\r\nconst useGetElasticPoolsV2 = (): CommonReturn => {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const shouldSkip = !isEVM(chainId) || !CHAINS_SUPPORT_NEW_POOL_FARM_API.includes(chainId)\r\n  const chainRoute = !isEVM(chainId) || NETWORKS_INFO[chainId].poolFarmRoute\r\n\r\n  const { isValidating, error, data } = useSWRImmutable<Response>(\r\n    `${process.env.REACT_APP_POOL_FARM_BASE_URL}/${chainRoute}/api/v1/elastic/pools?includeLowTvl=true&page=1&perPage=10000`,\r\n    (url: string) => {\r\n      if (shouldSkip) {\r\n        return Promise.resolve({})\r\n      }\r\n      return fetch(url).then(resp => resp.json())\r\n    },\r\n    {\r\n      refreshInterval: shouldSkip ? 0 : 60_000,\r\n    },\r\n  )\r\n\r\n  const poolData: PoolAccumulator =\r\n    data?.data?.pools.reduce((acc, pool) => {\r\n      acc[pool.id] = {\r\n        address: pool.id,\r\n\r\n        token0: {\r\n          address: pool.token0.id,\r\n          name: pool.token0.name,\r\n          symbol: pool.token0.symbol,\r\n          decimals: parseInt(pool.token0.decimals),\r\n        },\r\n        token1: {\r\n          address: pool.token1.id,\r\n          name: pool.token1.name,\r\n          symbol: pool.token1.symbol,\r\n          decimals: parseInt(pool.token1.decimals),\r\n        },\r\n\r\n        feeTier: Number(pool.feeTier),\r\n\r\n        volumeUSDLast24h: Number(pool.volumeUsd) - Number(pool.volumeUsdOneDayAgo),\r\n\r\n        tvlUSD: Number(pool.totalValueLockedUsd),\r\n        tvlUSDLast24h: Number(pool.totalValueLockedUsd),\r\n        apr: Number(pool.apr),\r\n        farmAPR: Number(pool.farmApr),\r\n\r\n        liquidity: pool.liquidity,\r\n        sqrtPrice: pool.sqrtPrice,\r\n        reinvestL: pool.reinvestL,\r\n        tick: Number(pool.tick),\r\n\r\n        // TODO: do we need this?\r\n        token0Price: 0,\r\n        token1Price: 0,\r\n        tvlToken0: 0,\r\n        tvlToken1: 0,\r\n      }\r\n\r\n      return acc\r\n    }, {} as PoolAccumulator) || {}\r\n\r\n  return {\r\n    isLoading: isValidating,\r\n    isError: !!error,\r\n    data: poolData,\r\n  }\r\n}\r\n\r\nexport default useGetElasticPoolsV2\r\n","import { CHAINS_SUPPORT_NEW_POOL_FARM_API } from 'constants/networks'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { ElasticPoolDetail } from 'types/pool'\r\n\r\nimport useGetElasticPoolsV1 from './useGetElasticPoolsV1'\r\nimport useGetElasticPoolsV2 from './useGetElasticPoolsV2'\r\n\r\nexport type CommonReturn = {\r\n  isLoading: boolean\r\n  isError: boolean\r\n  data?: {\r\n    [address: string]: ElasticPoolDetail\r\n  }\r\n}\r\n\r\nconst useGetElasticPools = (poolAddresses: string[]): CommonReturn => {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const shouldRunV2 = chainId && CHAINS_SUPPORT_NEW_POOL_FARM_API.includes(chainId)\r\n  const responseV1 = useGetElasticPoolsV1(poolAddresses, shouldRunV2)\r\n  const responseV2 = useGetElasticPoolsV2()\r\n\r\n  if (shouldRunV2) {\r\n    return responseV2\r\n  }\r\n\r\n  return responseV1\r\n}\r\n\r\nexport default useGetElasticPools\r\n","import { ChainId, Token, WETH } from '@kyberswap/ks-sdk-core'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport { rgba } from 'polished'\r\nimport { useState } from 'react'\r\nimport { ChevronUp, Share2 } from 'react-feather'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport { ButtonEmpty, ButtonOutlined, ButtonPrimary } from 'components/Button'\r\nimport CopyHelper from 'components/Copy'\r\nimport Divider from 'components/Divider'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport { MoneyBagOutline } from 'components/Icons'\r\nimport InfoHelper from 'components/InfoHelper'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport FarmingPoolAPRCell from 'components/YieldPools/FarmingPoolAPRCell'\r\nimport { ELASTIC_BASE_FEE_UNIT, PROMM_ANALYTICS_URL } from 'constants/index'\r\nimport { NativeCurrencies } from 'constants/tokens'\r\nimport { VERSION } from 'constants/v2'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useAllTokens } from 'hooks/Tokens'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { IconWrapper } from 'pages/Pools/styleds'\r\nimport { useToggleEthPowAckModal } from 'state/application/hooks'\r\nimport { useElasticFarms } from 'state/farms/elastic/hooks'\r\nimport { useUrlOnEthPowAck } from 'state/pools/hooks'\r\nimport { ExternalLink } from 'theme'\r\nimport { ElasticPoolDetail } from 'types/pool'\r\nimport { isAddressString, shortenAddress } from 'utils'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\n\r\ninterface ListItemProps {\r\n  pair: ElasticPoolDetail[]\r\n  idx: number\r\n  onShared: (id: string) => void\r\n  userPositions: { [key: string]: number }\r\n}\r\n\r\nconst getPrommAnalyticLink = (chainId: ChainId | undefined, poolAddress: string) => {\r\n  if (!chainId) return ''\r\n  return `${PROMM_ANALYTICS_URL[chainId]}/pool/${poolAddress.toLowerCase()}`\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: relative;\r\n  padding: 20px 16px;\r\n  font-size: 12px;\r\n  background-color: ${({ theme }) => theme.background};\r\n  border-radius: 20px;\r\n  margin-bottom: 20px;\r\n`\r\n\r\nconst DataText = styled(Flex)`\r\n  color: ${({ theme }) => theme.text};\r\n  flex-direction: column;\r\n`\r\n\r\nconst PoolAddressContainer = styled(Flex)`\r\n  align-items: center;\r\n`\r\n\r\nconst ButtonIcon = styled(ButtonEmpty)`\r\n  background: ${({ theme }) => rgba(theme.subText, 0.2)};\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 50%;\r\n  padding: 0;\r\n  color: ${({ theme }) => theme.subText};\r\n`\r\n\r\nexport default function ProAmmPoolCardItem({ pair, onShared, userPositions, idx }: ListItemProps) {\r\n  const { chainId } = useActiveWeb3React()\r\n  const theme = useTheme()\r\n  const [isOpen, setIsOpen] = useState(true)\r\n  const history = useHistory()\r\n  const [, setUrlOnEthPoWAck] = useUrlOnEthPowAck()\r\n  const toggleEthPowAckModal = useToggleEthPowAckModal()\r\n\r\n  const allTokens = useAllTokens()\r\n  const { farms } = useElasticFarms()\r\n\r\n  const token0 =\r\n    allTokens[isAddressString(chainId, pair[0].token0.address)] ||\r\n    new Token(chainId, pair[0].token0.address, pair[0].token0.decimals, pair[0].token0.symbol)\r\n  const token1 =\r\n    allTokens[isAddressString(chainId, pair[0].token1.address)] ||\r\n    new Token(chainId, pair[0].token1.address, pair[0].token1.decimals, pair[0].token1.symbol)\r\n\r\n  const nativeToken = NativeCurrencies[chainId]\r\n\r\n  const isToken0WETH = token0.address.toLowerCase() === WETH[chainId].address.toLowerCase()\r\n  const isToken1WETH = token1.address.toLowerCase() === WETH[chainId].address.toLowerCase()\r\n\r\n  const token0Slug = isToken0WETH ? nativeToken.symbol : token0.address\r\n  const token0Symbol = isToken0WETH ? nativeToken.symbol : token0.symbol\r\n\r\n  const token1Slug = isToken1WETH ? nativeToken.symbol : token1.address\r\n  const token1Symbol = isToken1WETH ? nativeToken.symbol : token1.symbol\r\n\r\n  return (\r\n    <>\r\n      <Flex justifyContent=\"space-between\" marginBottom=\"20px\" marginTop={idx === 0 ? 0 : '20px'}>\r\n        <Flex alignItems=\"center\">\r\n          <DoubleCurrencyLogo\r\n            size={24}\r\n            currency0={isToken0WETH ? nativeToken : token0}\r\n            currency1={isToken1WETH ? nativeToken : token1}\r\n          />\r\n          <Text fontSize={20} fontWeight=\"500\">\r\n            {token0Symbol} - {token1Symbol}\r\n          </Text>\r\n        </Flex>\r\n        <ButtonIcon\r\n          disabled={pair.length === 1}\r\n          onClick={() => {\r\n            pair.length > 1 && setIsOpen(prev => !prev)\r\n          }}\r\n        >\r\n          <ChevronUp\r\n            size=\"20px\"\r\n            color={theme.subText}\r\n            style={{\r\n              transition: 'transform 0.2s',\r\n              transform: `rotate(${isOpen && pair.length > 1 ? '0' : '180deg'})`,\r\n            }}\r\n          />\r\n        </ButtonIcon>\r\n      </Flex>\r\n      {pair.map((pool, index) => {\r\n        const myLiquidity = userPositions[pool.address]\r\n        const hasLiquidity = pool.address in userPositions\r\n        if (pair.length > 1 && index !== 0 && !isOpen) return null\r\n\r\n        let fairlaunchAddress = ''\r\n        let pid = -1\r\n\r\n        farms?.forEach(farm => {\r\n          const p = farm.pools\r\n            .filter(item => item.endTime > Date.now() / 1000)\r\n            .find(item => item.poolAddress.toLowerCase() === pool.address.toLowerCase())\r\n\r\n          if (p) {\r\n            fairlaunchAddress = farm.id\r\n            pid = Number(p.pid)\r\n          }\r\n        })\r\n\r\n        const isFarmingPool = !!fairlaunchAddress && pid !== -1\r\n\r\n        return (\r\n          <Wrapper key={pool.address}>\r\n            {isFarmingPool && (\r\n              <div\r\n                style={{\r\n                  overflow: 'hidden',\r\n                  position: 'absolute',\r\n                  top: '16px',\r\n                  right: '16px',\r\n                }}\r\n              >\r\n                <MouseoverTooltip\r\n                  noArrow\r\n                  text={\r\n                    <Text>\r\n                      <Trans>\r\n                        Available for yield farming. Click{' '}\r\n                        <Link to={`/farms?tab=elastic&type=active&search=${pool.address}`}>here</Link> to go to the\r\n                        farm.\r\n                      </Trans>\r\n                    </Text>\r\n                  }\r\n                >\r\n                  <IconWrapper style={{ width: '24px', height: '24px' }}>\r\n                    <MoneyBagOutline size={16} color={theme.textReverse} />\r\n                  </IconWrapper>\r\n                </MouseoverTooltip>\r\n              </div>\r\n            )}\r\n            <DataText justifyContent=\"center\" marginBottom=\"1rem\">\r\n              <PoolAddressContainer>\r\n                <Text color={theme.text} fontSize=\"16px\">\r\n                  {shortenAddress(chainId, pool.address, 3)}\r\n                </Text>\r\n                <CopyHelper toCopy={pool.address} />\r\n              </PoolAddressContainer>\r\n              <Flex marginTop={'4px'}>\r\n                <Text color={theme.subText} fontSize={12}>\r\n                  Fee = {(pool.feeTier * 100) / ELASTIC_BASE_FEE_UNIT}%\r\n                </Text>\r\n                <InfoHelper\r\n                  text={t`A token pair can have multiple pools, each with a different swap fee. Your swap fee earnings will be automatically reinvested in your pool`}\r\n                />\r\n              </Flex>\r\n            </DataText>\r\n            <Divider />\r\n\r\n            <Flex marginTop=\"20px\" justifyContent=\"space-between\">\r\n              <Text color={theme.subText} fontWeight=\"500\">\r\n                <Trans>Total Value Locked</Trans>\r\n              </Text>\r\n              <Text>{formatDollarAmount(pool.tvlUSD)}</Text>\r\n            </Flex>\r\n\r\n            <Flex marginTop=\"16px\" justifyContent=\"space-between\">\r\n              <Text color={theme.subText} fontWeight=\"500\">\r\n                AVG APR\r\n                <InfoHelper size={14} text={t`Average estimated return based on yearly fees of the pool`} />\r\n              </Text>\r\n              <DataText alignItems=\"flex-end\" color={theme.apr}>\r\n                {isFarmingPool ? (\r\n                  <FarmingPoolAPRCell\r\n                    tooltipPlacement=\"top\"\r\n                    poolAPR={pool.apr}\r\n                    fairlaunchAddress={fairlaunchAddress}\r\n                    pid={pid}\r\n                  />\r\n                ) : (\r\n                  <Flex\r\n                    sx={{\r\n                      alignItems: 'center',\r\n                    }}\r\n                  >\r\n                    {pool.apr.toFixed(2)}%\r\n                  </Flex>\r\n                )}\r\n              </DataText>\r\n            </Flex>\r\n\r\n            <Flex marginTop=\"16px\" justifyContent=\"space-between\">\r\n              <Text color={theme.subText} fontWeight=\"500\">\r\n                <Trans>Volume (24H)</Trans>\r\n              </Text>\r\n              <Text>{formatDollarAmount(pool.volumeUSDLast24h)}</Text>\r\n            </Flex>\r\n\r\n            <Flex marginTop=\"16px\" justifyContent=\"space-between\">\r\n              <Text color={theme.subText} fontWeight=\"500\">\r\n                <Trans>Fees (24H)</Trans>\r\n              </Text>\r\n              <Text>{formatDollarAmount(pool.volumeUSDLast24h * (pool.feeTier / ELASTIC_BASE_FEE_UNIT))}</Text>\r\n            </Flex>\r\n\r\n            <Flex marginTop=\"16px\" justifyContent=\"space-between\">\r\n              <Text color={theme.subText} fontWeight=\"500\">\r\n                <Trans>Your Liquidity Balance</Trans>\r\n              </Text>\r\n              <Text>{myLiquidity ? formatDollarAmount(Number(myLiquidity)) : '-'}</Text>\r\n            </Flex>\r\n\r\n            <Flex marginY=\"20px\" justifyContent=\"space-between\" fontSize=\"14px\" style={{ gap: '16px' }}>\r\n              {hasLiquidity && (\r\n                <ButtonOutlined as={Link} to={`/myPools?tab=${VERSION.ELASTIC}search=${pool.address}`} padding=\"10px\">\r\n                  <Text width=\"max-content\" fontSize=\"14px\">\r\n                    <Trans>View Positions</Trans>\r\n                  </Text>\r\n                </ButtonOutlined>\r\n              )}\r\n\r\n              <ButtonPrimary\r\n                padding=\"10px\"\r\n                onClick={() => {\r\n                  const url = myLiquidity\r\n                    ? `/myPools?tab=${VERSION.ELASTIC}&search=${pool.address}`\r\n                    : `/elastic/add/${token0Slug}/${token1Slug}/${pool.feeTier}`\r\n\r\n                  if (chainId === ChainId.ETHW) {\r\n                    setUrlOnEthPoWAck(url)\r\n                    toggleEthPowAckModal()\r\n                  } else {\r\n                    history.push(url)\r\n                  }\r\n                }}\r\n              >\r\n                <Text width=\"max-content\" fontSize=\"14px\">\r\n                  <Trans>Add Liquidity</Trans>\r\n                </Text>\r\n              </ButtonPrimary>\r\n            </Flex>\r\n\r\n            <Divider />\r\n\r\n            <Flex marginTop=\"16px\" fontSize=\"14px\" justifyContent=\"space-between\">\r\n              <ExternalLink href={getPrommAnalyticLink(chainId, pool.address)}>Analytics ↗</ExternalLink>\r\n\r\n              <ButtonEmpty\r\n                width=\"max-content\"\r\n                padding=\"0\"\r\n                onClick={e => {\r\n                  e.stopPropagation()\r\n                  onShared(pool.address)\r\n                }}\r\n              >\r\n                <Text marginRight=\"4px\">\r\n                  <Trans>Share</Trans>\r\n                </Text>\r\n                <Share2 size=\"14px\" color={theme.primary} />\r\n              </ButtonEmpty>\r\n            </Flex>\r\n          </Wrapper>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","var _rect, _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgViewPositions(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 28,\n    height: 28,\n    viewBox: \"0 0 28 28\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    opacity: 0.2,\n    width: 28,\n    height: 28,\n    rx: 14,\n    fill: \"none\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14 7.33325C10.4467 10.3666 8.66667 12.9866 8.66667 15.1999C8.66667 18.5199 11.2 20.6666 14 20.6666C16.8 20.6666 19.3333 18.5199 19.3333 15.1999C19.3333 12.9866 17.5533 10.3666 14 7.33325ZM14 19.3333C11.7667 19.3333 10 17.6199 10 15.1999C10 13.6399 11.3 11.5733 14 9.10659C16.7 11.5733 18 13.6333 18 15.1999C18 17.6199 16.2333 19.3333 14 19.3333ZM11.22 15.3333C11.4667 15.3333 11.6667 15.5066 11.7133 15.7466C11.9867 17.2266 13.2333 17.7333 14.14 17.6599C14.4267 17.6466 14.6667 17.8733 14.6667 18.1599C14.6667 18.4266 14.4533 18.6466 14.1867 18.6599C12.7667 18.7466 11.1067 17.9333 10.7267 15.9133C10.6733 15.6133 10.9133 15.3333 11.22 15.3333Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgViewPositions);\nexport default __webpack_public_path__ + \"static/media/view_positions.5c998860.svg\";\nexport { ForwardRef as ReactComponent };","import { ChainId, Token, WETH } from '@kyberswap/ks-sdk-core'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport { rgba } from 'polished'\r\nimport { useState } from 'react'\r\nimport { BarChart2, ChevronUp, Plus, Share2 } from 'react-feather'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled, { css } from 'styled-components'\r\n\r\nimport { ReactComponent as ViewPositionIcon } from 'assets/svg/view_positions.svg'\r\nimport { ButtonEmpty } from 'components/Button'\r\nimport CopyHelper from 'components/Copy'\r\nimport Divider from 'components/Divider'\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport { MoneyBag } from 'components/Icons'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport FarmingPoolAPRCell, { APRTooltipContent } from 'components/YieldPools/FarmingPoolAPRCell'\r\nimport { ELASTIC_BASE_FEE_UNIT, PROMM_ANALYTICS_URL } from 'constants/index'\r\nimport { NativeCurrencies } from 'constants/tokens'\r\nimport { VERSION } from 'constants/v2'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useAllTokens } from 'hooks/Tokens'\r\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { ButtonIcon } from 'pages/Pools/styleds'\r\nimport { useToggleEthPowAckModal } from 'state/application/hooks'\r\nimport { useElasticFarms } from 'state/farms/elastic/hooks'\r\nimport { useUrlOnEthPowAck } from 'state/pools/hooks'\r\nimport { ExternalLink } from 'theme'\r\nimport { ElasticPoolDetail } from 'types/pool'\r\nimport { isAddressString, shortenAddress } from 'utils'\r\nimport { formatDollarAmount } from 'utils/numbers'\r\n\r\ninterface ListItemProps {\r\n  pair: ElasticPoolDetail[]\r\n  idx: number\r\n  onShared: (id: string) => void\r\n  userPositions: { [key: string]: number }\r\n  noBorderBottom?: boolean\r\n}\r\n\r\nconst getPrommAnalyticLink = (chainId: ChainId | undefined, poolAddress: string) => {\r\n  if (!chainId) return ''\r\n  return `${PROMM_ANALYTICS_URL[chainId]}/pool/${poolAddress.toLowerCase()}`\r\n}\r\n\r\nconst TableRow = styled.div<{ isOpen?: boolean; isShowBorderBottom: boolean; hoverable: boolean }>`\r\n  display: grid;\r\n  grid-gap: 1rem;\r\n  grid-template-columns: 1.5fr 1.5fr 1.5fr 0.75fr 1fr 1fr 1.2fr 1.5fr;\r\n  padding: 24px 16px;\r\n  font-size: 14px;\r\n  align-items: center;\r\n  height: fit-content;\r\n  background-color: ${({ theme, isOpen }) => (isOpen ? rgba(theme.tableHeader, 0.6) : theme.background)};\r\n  position: relative;\r\n\r\n  ${({ theme, hoverable }) =>\r\n    hoverable\r\n      ? css`\r\n          :hover {\r\n            background-color: ${theme.tableHeader};\r\n            cursor: pointer;\r\n          }\r\n        `\r\n      : ''}\r\n\r\n  &:after {\r\n    content: '';\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n    width: 86.36%; // 100% - (1.5fr / grid-template-columns)\r\n    border-bottom: ${({ theme, isShowBorderBottom }) =>\r\n      isShowBorderBottom ? `1px solid ${rgba(theme.border, 0.5)}` : 'none'};\r\n  }\r\n`\r\n\r\nconst DataText = styled(Flex)`\r\n  color: ${({ theme }) => theme.text};\r\n  flex-direction: column;\r\n`\r\n\r\nconst PoolAddressContainer = styled(Flex)`\r\n  align-items: center;\r\n`\r\n\r\nconst ButtonWrapper = styled(Flex)`\r\n  justify-content: flex-end;\r\n  gap: 4px;\r\n  align-items: center;\r\n`\r\n\r\nexport default function ProAmmPoolListItem({ pair, idx, onShared, userPositions, noBorderBottom }: ListItemProps) {\r\n  const { chainId } = useActiveWeb3React()\r\n  const theme = useTheme()\r\n  const [isOpen, setIsOpen] = useState(pair.length > 1 ? idx === 0 : false)\r\n  const history = useHistory()\r\n  const [, setUrlOnEthPoWAck] = useUrlOnEthPowAck()\r\n  const toggleEthPowAckModal = useToggleEthPowAckModal()\r\n\r\n  const allTokens = useAllTokens()\r\n\r\n  const token0 =\r\n    allTokens[isAddressString(chainId, pair[0].token0.address)] ||\r\n    new Token(chainId, pair[0].token0.address, pair[0].token0.decimals, pair[0].token0.symbol)\r\n  const token1 =\r\n    allTokens[isAddressString(chainId, pair[0].token1.address)] ||\r\n    new Token(chainId, pair[0].token1.address, pair[0].token1.decimals, pair[0].token1.symbol)\r\n\r\n  const isToken0WETH = pair[0].token0.address === WETH[chainId].address.toLowerCase()\r\n  const isToken1WETH = pair[0].token1.address === WETH[chainId].address.toLowerCase()\r\n\r\n  const nativeToken = NativeCurrencies[chainId]\r\n\r\n  const token0Slug = isToken0WETH ? nativeToken.symbol : pair[0].token0.address\r\n  const token0Symbol = isToken0WETH ? nativeToken.symbol : token0.symbol\r\n\r\n  const token1Slug = isToken1WETH ? nativeToken.symbol : pair[0].token1.address\r\n  const token1Symbol = isToken1WETH ? nativeToken.symbol : token1.symbol\r\n\r\n  const { farms } = useElasticFarms()\r\n\r\n  const { mixpanelHandler } = useMixpanel()\r\n\r\n  return (\r\n    <>\r\n      {pair.map((pool, index) => {\r\n        const myLiquidity = userPositions[pool.address]\r\n        const hasLiquidity = pool.address in userPositions\r\n        const hoverable = pair.length > 1 && index === 0\r\n        if (pair.length > 1 && index !== 0 && !isOpen) return null\r\n\r\n        let fairlaunchAddress = ''\r\n        let pid = -1\r\n\r\n        farms?.forEach(farm => {\r\n          const p = farm.pools\r\n            .filter(item => item.endTime > Date.now() / 1000)\r\n            .find(item => item.poolAddress.toLowerCase() === pool.address.toLowerCase())\r\n\r\n          if (p) {\r\n            fairlaunchAddress = farm.id\r\n            pid = Number(p.pid)\r\n          }\r\n        })\r\n\r\n        const isFarmingPool = !!fairlaunchAddress && pid !== -1\r\n\r\n        const renderPoolAPR = () => {\r\n          if (isFarmingPool) {\r\n            if (pool.farmAPR) {\r\n              return (\r\n                <Flex\r\n                  alignItems={'center'}\r\n                  sx={{\r\n                    gap: '4px',\r\n                  }}\r\n                >\r\n                  <Text as=\"span\">{(pool.apr + pool.farmAPR).toFixed(2)}%</Text>\r\n                  <MouseoverTooltip\r\n                    width=\"fit-content\"\r\n                    placement=\"top\"\r\n                    text={<APRTooltipContent farmAPR={pool.farmAPR} poolAPR={pool.apr} />}\r\n                  >\r\n                    <MoneyBag size={16} color={theme.apr} />\r\n                  </MouseoverTooltip>\r\n                </Flex>\r\n              )\r\n            }\r\n\r\n            return <FarmingPoolAPRCell poolAPR={pool.apr} fairlaunchAddress={fairlaunchAddress} pid={pid} />\r\n          }\r\n\r\n          return (\r\n            <Flex\r\n              alignItems=\"center\"\r\n              paddingRight=\"20px\" // to make all the APR numbers vertically align\r\n            >\r\n              {pool.apr.toFixed(2)}%\r\n            </Flex>\r\n          )\r\n        }\r\n\r\n        return (\r\n          <TableRow\r\n            isOpen={isOpen}\r\n            key={pool.address}\r\n            isShowBorderBottom={isOpen && index !== pair.length - 1}\r\n            hoverable={hoverable}\r\n            onClick={() => {\r\n              hoverable && setIsOpen(prev => !prev)\r\n            }}\r\n          >\r\n            {index === 0 ? (\r\n              <DataText>\r\n                <DoubleCurrencyLogo\r\n                  currency0={isToken0WETH ? nativeToken : token0}\r\n                  currency1={isToken1WETH ? nativeToken : token1}\r\n                />\r\n                <Text fontSize={16} marginTop=\"8px\">\r\n                  {token0Symbol} - {token1Symbol}\r\n                </Text>\r\n              </DataText>\r\n            ) : (\r\n              <DataText />\r\n            )}\r\n            <DataText grid-area=\"pool\" style={{ position: 'relative' }}>\r\n              {isFarmingPool && (\r\n                <Flex\r\n                  sx={{\r\n                    overflow: 'hidden',\r\n                    borderTopLeftRadius: '8px',\r\n                    position: 'absolute',\r\n                    top: '0px',\r\n                    left: '-24px',\r\n                    flexDirection: 'column',\r\n                  }}\r\n                >\r\n                  <MouseoverTooltip placement=\"top\" text={t`Available for yield farming`}>\r\n                    <Link to={`/farms?tab=elastic&type=active&search=${pool.address}`}>\r\n                      <MoneyBag size={16} color={theme.apr} />\r\n                    </Link>\r\n                  </MouseoverTooltip>\r\n                </Flex>\r\n              )}\r\n\r\n              <PoolAddressContainer>\r\n                <Text color={theme.text}>{shortenAddress(chainId, pool.address, 3)}</Text>\r\n                <CopyHelper toCopy={pool.address} />\r\n              </PoolAddressContainer>\r\n              <Text color={theme.text3} fontSize={12} marginTop={'8px'}>\r\n                Fee = {(pool.feeTier * 100) / ELASTIC_BASE_FEE_UNIT}%\r\n              </Text>\r\n            </DataText>\r\n            <DataText alignItems=\"flex-start\">{formatDollarAmount(pool.tvlUSD)}</DataText>\r\n            <DataText alignItems=\"flex-end\" color={theme.apr}>\r\n              {renderPoolAPR()}\r\n            </DataText>\r\n            <DataText alignItems=\"flex-end\">{formatDollarAmount(pool.volumeUSDLast24h)}</DataText>\r\n            <DataText alignItems=\"flex-end\">\r\n              {formatDollarAmount(pool.volumeUSDLast24h * (pool.feeTier / ELASTIC_BASE_FEE_UNIT))}\r\n            </DataText>\r\n            <DataText alignItems=\"flex-end\">{myLiquidity ? formatDollarAmount(Number(myLiquidity)) : '-'}</DataText>\r\n            <ButtonWrapper>\r\n              <MouseoverTooltip text={<Trans> Add liquidity </Trans>} placement={'top'} width={'fit-content'}>\r\n                <ButtonEmpty\r\n                  padding=\"0\"\r\n                  style={{\r\n                    background: rgba(theme.primary, 0.2),\r\n                    minWidth: '28px',\r\n                    minHeight: '28px',\r\n                    width: '28px',\r\n                    height: '28px',\r\n                  }}\r\n                  onClick={(e: React.MouseEvent) => {\r\n                    e.stopPropagation()\r\n\r\n                    const url = `/elastic/add/${token0Slug}/${token1Slug}/${pool.feeTier}`\r\n                    mixpanelHandler(MIXPANEL_TYPE.ELASTIC_ADD_LIQUIDITY_IN_LIST_INITIATED, {\r\n                      token_1: token0Symbol,\r\n                      token_2: token1Symbol,\r\n                      fee_tier: pool.feeTier / ELASTIC_BASE_FEE_UNIT,\r\n                    })\r\n\r\n                    if (chainId === ChainId.ETHW) {\r\n                      setUrlOnEthPoWAck(url)\r\n                      toggleEthPowAckModal()\r\n                    } else {\r\n                      history.push(url)\r\n                    }\r\n                  }}\r\n                >\r\n                  <Plus size={16} color={theme.primary} />\r\n                </ButtonEmpty>\r\n              </MouseoverTooltip>\r\n              {hasLiquidity && (\r\n                <MouseoverTooltip text={t`View positions`} placement={'top'} width={'fit-content'}>\r\n                  <ButtonIcon as={Link} to={`/myPools?tab=${VERSION.ELASTIC}&search=${pool.address}`}>\r\n                    <ViewPositionIcon />\r\n                  </ButtonIcon>\r\n                </MouseoverTooltip>\r\n              )}\r\n\r\n              <MouseoverTooltip text={t`Share this pool`} placement={'top'} width={'fit-content'}>\r\n                <ButtonIcon\r\n                  onClick={e => {\r\n                    e.stopPropagation()\r\n                    onShared(pool.address)\r\n                  }}\r\n                >\r\n                  <Share2 size=\"14px\" color={theme.subText} />\r\n                </ButtonIcon>\r\n              </MouseoverTooltip>\r\n              <ExternalLink href={getPrommAnalyticLink(chainId, pool.address)}>\r\n                <MouseoverTooltip text={t`View analytics`} placement={'top'} width={'fit-content'}>\r\n                  <ButtonIcon\r\n                    onClick={e => {\r\n                      e.stopPropagation()\r\n                    }}\r\n                  >\r\n                    <BarChart2 size=\"14px\" color={theme.subText} />\r\n                  </ButtonIcon>\r\n                </MouseoverTooltip>\r\n              </ExternalLink>\r\n\r\n              <ButtonIcon\r\n                disabled={pair.length === 1}\r\n                style={{\r\n                  transition: 'transform 0.2s',\r\n                  transform: `rotate(${isOpen ? '0' : '180deg'})`,\r\n                  visibility: index === 0 ? 'visible' : 'hidden',\r\n                }}\r\n              >\r\n                <ChevronUp size=\"16px\" color={theme.text} />\r\n              </ButtonIcon>\r\n            </ButtonWrapper>\r\n          </TableRow>\r\n        )\r\n      })}\r\n      {!noBorderBottom && <Divider />}\r\n    </>\r\n  )\r\n}\r\n","import { Currency } from '@kyberswap/ks-sdk-core'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport React, { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { ChevronDown, ChevronUp } from 'react-feather'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useMedia } from 'react-use'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport { DividerDash } from 'components/Divider'\r\nimport InfoHelper from 'components/InfoHelper'\r\nimport LocalLoader from 'components/LocalLoader'\r\nimport Pagination from 'components/Pagination'\r\nimport { Input as PaginationInput } from 'components/Pagination/PaginationInputOnMobile'\r\nimport ShareModal from 'components/ShareModal'\r\nimport { STABLE_COINS_ADDRESS } from 'constants/tokens'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { SelectPairInstructionWrapper } from 'pages/Pools/styleds'\r\nimport { ApplicationModal } from 'state/application/actions'\r\nimport { useModalOpen, useOpenModal } from 'state/application/hooks'\r\nimport { FarmUpdater, useElasticFarms } from 'state/farms/elastic/hooks'\r\nimport { Field } from 'state/mint/proamm/actions'\r\nimport { useTopPoolAddresses, useUserProMMPositions } from 'state/prommPools/hooks'\r\nimport useGetElasticPools from 'state/prommPools/useGetElasticPools'\r\nimport { useTokenPrices } from 'state/tokenPrices/hooks'\r\nimport { ElasticPoolDetail } from 'types/pool'\r\n\r\nimport ProAmmPoolCardItem from './CardItem'\r\nimport ProAmmPoolListItem from './ListItem'\r\n\r\ntype PoolListProps = {\r\n  currencies: { [field in Field]?: Currency }\r\n  searchValue: string\r\n  isShowOnlyActiveFarmPools: boolean\r\n  onlyShowStable: boolean\r\n  shouldShowLowTVLPools: boolean\r\n}\r\n\r\nconst PageWrapper = styled.div`\r\n  overflow: 'hidden';\r\n  &[data-above1000='true'] {\r\n    background: ${({ theme }) => theme.background};\r\n    border-radius: 20px;\r\n  }\r\n\r\n  ${PaginationInput} {\r\n    background: ${({ theme }) => theme.background};\r\n  }\r\n`\r\n\r\nconst TableHeader = styled.div`\r\n  display: grid;\r\n  grid-gap: 1rem;\r\n  grid-template-columns: 1.5fr 1.5fr 1.5fr 0.75fr 1fr 1fr 1.2fr 1.5fr;\r\n  padding: 16px 20px;\r\n  font-size: 12px;\r\n  align-items: center;\r\n  height: fit-content;\r\n  position: relative;\r\n  background-color: ${({ theme }) => theme.tableHeader};\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n  z-index: 1;\r\n  border-bottom: ${({ theme }) => `1px solid ${theme.border}`};\r\n`\r\n\r\nconst ClickableText = styled(Text)`\r\n  display: flex;\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.subText};\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n\r\n  user-select: none;\r\n  text-transform: uppercase;\r\n`\r\n\r\nconst SORT_FIELD = {\r\n  TVL: 0,\r\n  VOL: 1,\r\n  FEES: 2,\r\n  APR: 3,\r\n}\r\n\r\nexport default function ProAmmPoolList({\r\n  currencies,\r\n  searchValue,\r\n  isShowOnlyActiveFarmPools,\r\n  onlyShowStable,\r\n  shouldShowLowTVLPools,\r\n}: PoolListProps) {\r\n  const above1000 = useMedia('(min-width: 1000px)')\r\n\r\n  const { farms } = useElasticFarms()\r\n  const allRewards = [\r\n    ...new Set(\r\n      farms\r\n        ?.map(farm => farm.pools)\r\n        .flat()\r\n        .map(pool => pool.rewardTokens.map(rw => rw.wrapped.address.toLowerCase()))\r\n        .flat() || [],\r\n    ),\r\n  ]\r\n  const tokenPriceMap = useTokenPrices(allRewards)\r\n\r\n  const totalFarmRewardUSDByPoolId = useMemo(\r\n    () =>\r\n      farms\r\n        ?.map(farm => farm.pools)\r\n        .flat()\r\n        .filter(pool => pool.endTime > Date.now() / 1000)\r\n        .map(pool => {\r\n          const v = pool.totalRewards.reduce((acc, cur, index) => {\r\n            return acc + Number(cur.toExact()) * tokenPriceMap[cur.currency.wrapped.address]\r\n          }, 0)\r\n          const farmDuration = (pool.endTime - pool.startTime) / 86400\r\n\r\n          return {\r\n            poolAddress: pool.poolAddress,\r\n            value: (v * 365 * 100) / farmDuration,\r\n          }\r\n        })\r\n        .reduce((acc, cur) => {\r\n          return {\r\n            ...acc,\r\n            [cur.poolAddress]: cur.value,\r\n          }\r\n        }, {} as { [key: string]: number }) || {},\r\n\r\n    [farms, tokenPriceMap],\r\n  )\r\n\r\n  const [sortDirection, setSortDirection] = useState(true)\r\n  const [sortedColumn, setSortedColumn] = useState(SORT_FIELD.TVL)\r\n\r\n  const caId = currencies[Field.CURRENCY_A]?.wrapped.address.toLowerCase()\r\n  const cbId = currencies[Field.CURRENCY_B]?.wrapped.address.toLowerCase()\r\n\r\n  const { loading, addresses } = useTopPoolAddresses()\r\n  const { isLoading: poolDataLoading, data: poolDatas } = useGetElasticPools(addresses || [])\r\n\r\n  const { chainId, account, isEVM, networkInfo } = useActiveWeb3React()\r\n  const userLiquidityPositionsQueryResult = useUserProMMPositions()\r\n  const loadingUserPositions = !account ? false : userLiquidityPositionsQueryResult.loading\r\n  const userPositions = !account ? {} : userLiquidityPositionsQueryResult.userLiquidityUsdByPool\r\n  const listComparator = useCallback(\r\n    (poolA: ElasticPoolDetail, poolB: ElasticPoolDetail): number => {\r\n      switch (sortedColumn) {\r\n        case SORT_FIELD.TVL:\r\n          return poolA.tvlUSD > poolB.tvlUSD ? (sortDirection ? -1 : 1) * 1 : (sortDirection ? -1 : 1) * -1\r\n        case SORT_FIELD.VOL:\r\n          return poolA.volumeUSDLast24h > poolB.volumeUSDLast24h\r\n            ? (sortDirection ? -1 : 1) * 1\r\n            : (sortDirection ? -1 : 1) * -1\r\n        case SORT_FIELD.FEES:\r\n          return poolA.volumeUSDLast24h * poolA.feeTier > poolB.volumeUSDLast24h * poolB.feeTier\r\n            ? (sortDirection ? -1 : 1) * 1\r\n            : (sortDirection ? -1 : 1) * -1\r\n        case SORT_FIELD.APR:\r\n          const aFarmAPR = (totalFarmRewardUSDByPoolId[poolA.address] || 0) / poolA.tvlUSD\r\n          const bFarmAPR = (totalFarmRewardUSDByPoolId[poolB.address] || 0) / poolB.tvlUSD\r\n\r\n          const a = poolA.apr + aFarmAPR\r\n          const b = poolB.apr + bFarmAPR\r\n          return a > b ? (sortDirection ? -1 : 1) * 1 : (sortDirection ? -1 : 1) * -1\r\n        default:\r\n          break\r\n      }\r\n\r\n      return 0\r\n    },\r\n    [sortDirection, sortedColumn, totalFarmRewardUSDByPoolId],\r\n  )\r\n\r\n  const anyLoading = loading || poolDataLoading || loadingUserPositions\r\n  const pairDatas = useMemo(() => {\r\n    const initPairs: { [pairId: string]: ElasticPoolDetail[] } = {}\r\n\r\n    let filteredPools = Object.values(poolDatas || []).filter(\r\n      pool =>\r\n        pool.address.toLowerCase() === searchValue ||\r\n        pool.token0.name.toLowerCase().includes(searchValue) ||\r\n        pool.token0.symbol.toLowerCase().includes(searchValue) ||\r\n        pool.token1.name.toLowerCase().includes(searchValue) ||\r\n        pool.token1.symbol.toLowerCase().includes(searchValue),\r\n    )\r\n\r\n    if (isShowOnlyActiveFarmPools) {\r\n      const activePoolFarmAddress =\r\n        farms\r\n          ?.map(farm => farm.pools)\r\n          .flat()\r\n          .filter(item => item.endTime > +new Date() / 1000)\r\n          .map(item => item.poolAddress.toLowerCase()) || []\r\n      filteredPools = filteredPools.filter(pool => activePoolFarmAddress.includes(pool.address.toLowerCase()))\r\n    }\r\n\r\n    if (!shouldShowLowTVLPools) {\r\n      filteredPools = filteredPools.filter(pool => pool.tvlUSD > 1)\r\n    }\r\n\r\n    if (caId && cbId && caId === cbId) filteredPools = []\r\n    else {\r\n      if (caId)\r\n        filteredPools = filteredPools.filter(pool => pool.token0.address === caId || pool.token1.address === caId)\r\n      if (cbId)\r\n        filteredPools = filteredPools.filter(pool => pool.token0.address === cbId || pool.token1.address === cbId)\r\n    }\r\n\r\n    if (onlyShowStable) {\r\n      const stableList = chainId ? STABLE_COINS_ADDRESS[chainId]?.map(item => item.toLowerCase()) || [] : []\r\n      filteredPools = filteredPools.filter(poolData => {\r\n        return (\r\n          stableList.includes(poolData.token0.address.toLowerCase()) &&\r\n          stableList.includes(poolData.token1.address.toLowerCase())\r\n        )\r\n      })\r\n    }\r\n\r\n    const poolsGroupByPair = filteredPools.reduce((pairs, pool) => {\r\n      const pairId = pool.token0.address + '_' + pool.token1.address\r\n\r\n      return {\r\n        ...pairs,\r\n        [pairId]: [...(pairs[pairId] || []), pool].sort((a, b) => b.tvlUSD - a.tvlUSD),\r\n      }\r\n    }, initPairs)\r\n\r\n    return Object.values(poolsGroupByPair).sort((a, b) => listComparator(a[0], b[0]))\r\n  }, [\r\n    poolDatas,\r\n    isShowOnlyActiveFarmPools,\r\n    shouldShowLowTVLPools,\r\n    caId,\r\n    cbId,\r\n    onlyShowStable,\r\n    searchValue,\r\n    farms,\r\n    chainId,\r\n    listComparator,\r\n  ])\r\n\r\n  const renderHeader = () => {\r\n    return above1000 ? (\r\n      <TableHeader>\r\n        <Flex alignItems=\"center\">\r\n          <ClickableText>\r\n            <Trans>Token Pair</Trans>\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\">\r\n          <ClickableText>\r\n            <Trans>Pool | Fee</Trans>\r\n          </ClickableText>\r\n          <InfoHelper\r\n            text={t`A token pair can have multiple pools, each with a different swap fee. Your swap fee earnings will be automatically reinvested in your pool`}\r\n          />\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-start\">\r\n          <ClickableText\r\n            style={{ textAlign: 'right' }}\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.TVL)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.TVL ? true : !sortDirection)\r\n            }}\r\n          >\r\n            <span>TVL</span>\r\n            {sortedColumn === SORT_FIELD.TVL ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.APR)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.APR ? true : !sortDirection)\r\n            }}\r\n            style={{\r\n              paddingRight: '20px', // leave some space for the money bag in the value rows\r\n            }}\r\n          >\r\n            <Trans>APR</Trans>\r\n            {sortedColumn === SORT_FIELD.APR ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            <InfoHelper\r\n              text={t`Average estimated return based on yearly trading fees from the pool & additional bonus rewards if you participate in the farm`}\r\n            />\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.VOL)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.VOL ? true : !sortDirection)\r\n            }}\r\n          >\r\n            <Trans>VOLUME (24H)</Trans>\r\n            {sortedColumn === SORT_FIELD.VOL ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText\r\n            onClick={() => {\r\n              setSortedColumn(SORT_FIELD.FEES)\r\n              setSortDirection(sortedColumn !== SORT_FIELD.FEES ? true : !sortDirection)\r\n            }}\r\n          >\r\n            <Trans>FEES (24H)</Trans>\r\n            {sortedColumn === SORT_FIELD.FEES ? (\r\n              !sortDirection ? (\r\n                <ChevronUp size=\"14\" style={{ marginLeft: '2px' }} />\r\n              ) : (\r\n                <ChevronDown size=\"14\" style={{ marginLeft: '2px' }} />\r\n              )\r\n            ) : (\r\n              ''\r\n            )}\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText>\r\n            <Trans>YOUR LIQUIDITY</Trans>\r\n          </ClickableText>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <ClickableText>\r\n            <Trans>ACTIONS</Trans>\r\n          </ClickableText>\r\n        </Flex>\r\n      </TableHeader>\r\n    ) : null\r\n  }\r\n\r\n  const ITEM_PER_PAGE = 8\r\n  const [page, setPage] = useState(1)\r\n  useEffect(() => {\r\n    setPage(1)\r\n  }, [chainId, currencies, searchValue, onlyShowStable])\r\n\r\n  const [sharedPoolId, setSharedPoolId] = useState('')\r\n  const openShareModal = useOpenModal(ApplicationModal.SHARE)\r\n  const isShareModalOpen = useModalOpen(ApplicationModal.SHARE)\r\n\r\n  const chainRoute = networkInfo.route\r\n  const shareUrl = sharedPoolId\r\n    ? window.location.origin + `/pools/${chainRoute}?search=` + sharedPoolId + '&tab=elastic'\r\n    : undefined\r\n\r\n  useEffect(() => {\r\n    if (sharedPoolId) {\r\n      openShareModal()\r\n    }\r\n  }, [openShareModal, sharedPoolId])\r\n\r\n  useEffect(() => {\r\n    if (!isShareModalOpen) {\r\n      setSharedPoolId('')\r\n    }\r\n  }, [isShareModalOpen, setSharedPoolId])\r\n\r\n  if (!isEVM) return <Redirect to=\"/\" />\r\n\r\n  const pageData = pairDatas.slice((page - 1) * ITEM_PER_PAGE, page * ITEM_PER_PAGE)\r\n\r\n  if (!anyLoading && !Object.keys(pairDatas).length) {\r\n    return (\r\n      <SelectPairInstructionWrapper>\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          <Trans>There are no pools for this token pair.</Trans>\r\n        </div>\r\n        <div>\r\n          <Trans>Create a new pool or select another pair of tokens to view the available pools.</Trans>\r\n        </div>\r\n      </SelectPairInstructionWrapper>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <PageWrapper data-above1000={above1000}>\r\n      {renderHeader()}\r\n      {anyLoading && !Object.keys(pairDatas).length && <LocalLoader />}\r\n      {pageData.map((p, index) =>\r\n        above1000 ? (\r\n          <ProAmmPoolListItem\r\n            key={index}\r\n            pair={p}\r\n            noBorderBottom={pairDatas.length <= pageData.length && index === pageData.length - 1}\r\n            idx={index}\r\n            onShared={setSharedPoolId}\r\n            userPositions={userPositions}\r\n          />\r\n        ) : (\r\n          <React.Fragment key={index}>\r\n            <ProAmmPoolCardItem pair={p} idx={index} onShared={setSharedPoolId} userPositions={userPositions} />\r\n            {index !== pageData.length - 1 && <DividerDash />}\r\n          </React.Fragment>\r\n        ),\r\n      )}\r\n\r\n      {!!pairDatas.length && (\r\n        <Pagination\r\n          onPageChange={setPage}\r\n          totalCount={pairDatas.length}\r\n          currentPage={page}\r\n          pageSize={ITEM_PER_PAGE}\r\n          haveBg={above1000}\r\n        />\r\n      )}\r\n      <ShareModal url={shareUrl} />\r\n      <FarmUpdater interval={false} />\r\n    </PageWrapper>\r\n  )\r\n}\r\n","import { Trans } from '@lingui/macro'\r\nimport { darken } from 'polished'\r\nimport { X } from 'react-feather'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport { ButtonPrimary } from 'components/Button'\r\nimport Modal from 'components/Modal'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { ApplicationModal } from 'state/application/actions'\r\nimport { useModalOpen, useToggleEthPowAckModal } from 'state/application/hooks'\r\nimport { useUrlOnEthPowAck } from 'state/pools/hooks'\r\n\r\nconst AckButton = styled(ButtonPrimary)`\r\n  height: 36px;\r\n  background-color: ${({ theme }) => theme.warning};\r\n  color: ${({ theme }) => theme.textReverse};\r\n  &:hover {\r\n    background-color: ${({ theme }) => darken(0.05, theme.warning)};\r\n  }\r\n  &:active {\r\n    box-shadow: 0 0 0 1pt ${({ theme }) => darken(0.1, theme.warning)};\r\n    background-color: ${({ theme }) => darken(0.1, theme.warning)};\r\n  }\r\n  &:disabled {\r\n    background-color: ${({ theme, altDisabledStyle }) => (altDisabledStyle ? theme.warning : theme.buttonGray)};\r\n    cursor: not-allowed;\r\n    box-shadow: none;\r\n    border: 1px solid transparent;\r\n    outline: none;\r\n  }\r\n`\r\n\r\nconst ModalEthPoWAck = () => {\r\n  const theme = useTheme()\r\n  const isModalOpen = useModalOpen(ApplicationModal.ETH_POW_ACK)\r\n  const toggleOpenThisModal = useToggleEthPowAckModal()\r\n  const history = useHistory()\r\n  const [url] = useUrlOnEthPowAck()\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isModalOpen}\r\n      onDismiss={toggleOpenThisModal}\r\n      maxWidth=\"calc(100vw - 32px)\"\r\n      width=\"fit-content\"\r\n      height=\"fit-content\"\r\n    >\r\n      <Flex\r\n        width=\"100%\"\r\n        maxWidth=\"360px\"\r\n        flexDirection=\"column\"\r\n        sx={{\r\n          padding: '24px',\r\n          justifyContent: 'center',\r\n          gap: '24px',\r\n        }}\r\n      >\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Text fontWeight={500} color={theme.warning}>\r\n            <Text\r\n              as=\"span\"\r\n              role=\"img\"\r\n              aria-label=\"warning\"\r\n              sx={{\r\n                marginRight: '4px',\r\n              }}\r\n            >\r\n              ⚠️\r\n            </Text>\r\n            <Text as=\"span\">\r\n              <Trans>Warning</Trans>\r\n            </Text>\r\n          </Text>\r\n          <Flex sx={{ cursor: 'pointer' }} role=\"button\" onClick={toggleOpenThisModal}>\r\n            <X size={20} color={theme.subText} />\r\n          </Flex>\r\n        </Flex>\r\n\r\n        <Text as=\"span\" fontSize=\"14px\">\r\n          <Trans>We don&apos;t recommend you create a pool and add liquidity on Ethereum PoW</Trans>\r\n        </Text>\r\n        <AckButton\r\n          onClick={() => {\r\n            toggleOpenThisModal()\r\n            history.push(url)\r\n          }}\r\n        >\r\n          <Trans>Acknowledge</Trans>\r\n        </AckButton>\r\n      </Flex>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default ModalEthPoWAck\r\n","import { ChainId, Currency } from '@kyberswap/ks-sdk-core'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport { useCallback, useMemo, useState } from 'react'\r\nimport { Plus } from 'react-feather'\r\nimport { Redirect, RouteComponentProps } from 'react-router-dom'\r\nimport { useMedia } from 'react-use'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled, { DefaultTheme, keyframes } from 'styled-components'\r\n\r\nimport { ReactComponent as StableIcon } from 'assets/svg/stable.svg'\r\nimport { ButtonPrimary } from 'components/Button'\r\nimport ClassicElasticTab from 'components/ClassicElasticTab'\r\nimport PoolList from 'components/PoolList'\r\nimport PoolsCurrencyInputPanel from 'components/PoolsCurrencyInputPanel'\r\nimport Search from 'components/Search'\r\nimport { SwitchLocaleLink } from 'components/SwitchLocaleLink'\r\nimport Toggle from 'components/Toggle'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport Tutorial, { TutorialType } from 'components/Tutorial'\r\nimport { VERSION } from 'constants/v2'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useCurrency } from 'hooks/Tokens'\r\nimport useDebounce from 'hooks/useDebounce'\r\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\r\nimport useParsedQueryString from 'hooks/useParsedQueryString'\r\nimport { useSyncNetworkParamWithStore } from 'hooks/useSyncNetworkParamWithStore'\r\nimport useTheme from 'hooks/useTheme'\r\nimport FarmingPoolsMarquee from 'pages/Pools/FarmingPoolsMarquee'\r\nimport { GlobalData, Instruction } from 'pages/Pools/InstructionAndGlobalData'\r\nimport ProAmmPoolList from 'pages/ProAmmPools'\r\nimport { useToggleEthPowAckModal } from 'state/application/hooks'\r\nimport { Field } from 'state/pair/actions'\r\nimport { useUrlOnEthPowAck } from 'state/pools/hooks'\r\nimport { currencyId } from 'utils/currencyId'\r\n\r\nimport ModalEthPoWAck from './ModalEthPoWAck'\r\nimport { CurrencyWrapper, PoolsPageWrapper, ToolbarWrapper } from './styleds'\r\n\r\nconst highlight = (theme: DefaultTheme) => keyframes`\r\n  0%{\r\n    box-shadow: 0 0 0px 0px ${theme.primary};\r\n  }\r\n  100%{\r\n    box-shadow: 0 0 8px 4px ${theme.primary};\r\n  }\r\n`\r\n\r\nconst ButtonPrimaryWithHighlight = styled(ButtonPrimary)`\r\n  padding: 10px 12px;\r\n  float: right;\r\n  border-radius: 40px;\r\n  font-size: 14px;\r\n\r\n  &[data-highlight='true'] {\r\n    animation: ${({ theme }) => highlight(theme)} 0.8s 8 alternate ease-in-out;\r\n  }\r\n`\r\n\r\nconst TextWithTooltip = styled(Text)`\r\n  position: relative;\r\n  cursor: pointer;\r\n\r\n  ::after {\r\n    content: '';\r\n    position: absolute;\r\n    bottom: -2px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    width: calc(100% - 2px);\r\n    height: 0;\r\n    border-bottom: ${({ theme }) => `1px dashed ${theme.subText}`};\r\n  }\r\n`\r\n\r\nconst Pools = ({\r\n  match: {\r\n    params: { currencyIdA, currencyIdB },\r\n  },\r\n  location,\r\n  history,\r\n}: RouteComponentProps<{ currencyIdA?: string; currencyIdB?: string }>) => {\r\n  const theme = useTheme()\r\n  const { chainId, isEVM, networkInfo } = useActiveWeb3React()\r\n  const above1000 = useMedia('(min-width: 1000px)')\r\n  const above1260 = useMedia('(min-width: 1260px)')\r\n  const below1124 = useMedia('(max-width: 1124px)')\r\n  const [isShowOnlyActiveFarmPools, setIsShowOnlyActiveFarmPools] = useState(false)\r\n  const [shouldShowLowTVLPools, setShowLowTVLPools] = useState(false)\r\n  const {\r\n    search: searchValueInQs = '',\r\n    tab = VERSION.ELASTIC,\r\n    highlightCreateButton,\r\n  } = useParsedQueryString<{\r\n    search: string\r\n    tab: string\r\n    highlightCreateButton: string\r\n  }>()\r\n  const debouncedSearchValue = useDebounce(searchValueInQs.trim().toLowerCase(), 200)\r\n\r\n  const [onlyShowStable, setOnlyShowStable] = useState(false)\r\n  const shouldHighlightCreatePoolButton = highlightCreateButton === 'true'\r\n\r\n  const [, setUrlOnEthPowAck] = useUrlOnEthPowAck()\r\n  const toggleEthPowAckModal = useToggleEthPowAckModal()\r\n\r\n  const onSearch = useCallback(\r\n    (search: string) => {\r\n      history.replace(location.pathname + '?search=' + search + '&tab=' + tab)\r\n    },\r\n    [tab, history, location.pathname],\r\n  )\r\n\r\n  useSyncNetworkParamWithStore()\r\n\r\n  const currencyA = useCurrency(currencyIdA)\r\n  const currencyB = useCurrency(currencyIdB)\r\n  const currencies: { [field in Field]?: Currency } = useMemo(\r\n    () => ({\r\n      [Field.CURRENCY_A]: currencyA ?? undefined,\r\n      [Field.CURRENCY_B]: currencyB ?? undefined,\r\n    }),\r\n    [currencyA, currencyB],\r\n  )\r\n\r\n  const chainRoute = networkInfo.route\r\n  const handleCurrencyASelect = useCallback(\r\n    (currencyA: Currency) => {\r\n      const newCurrencyIdA = currencyId(currencyA, chainId)\r\n      if (newCurrencyIdA === currencyIdB) {\r\n        history.push(`/pools/${chainRoute}/${currencyIdB}/${currencyIdA}?tab=${tab}`)\r\n      } else {\r\n        history.push(`/pools/${chainRoute}/${newCurrencyIdA}/${currencyIdB}?tab=${tab}`)\r\n      }\r\n    },\r\n    [chainRoute, currencyIdB, history, currencyIdA, chainId, tab],\r\n  )\r\n\r\n  const handleCurrencyBSelect = useCallback(\r\n    (currencyB: Currency) => {\r\n      const newCurrencyIdB = currencyId(currencyB, chainId)\r\n      if (currencyIdA === newCurrencyIdB) {\r\n        history.push(`/pools/${chainRoute}/${currencyIdB}/${currencyIdA}?tab=${tab}`)\r\n      } else {\r\n        history.push(`/pools/${chainRoute}/${currencyIdA}/${newCurrencyIdB}?tab=${tab}`)\r\n      }\r\n    },\r\n    [chainRoute, currencyIdA, history, currencyIdB, chainId, tab],\r\n  )\r\n  const handleClearCurrencyA = useCallback(() => {\r\n    history.push(`/pools/${chainRoute}/undefined/${currencyIdB}?tab=${tab}`)\r\n  }, [currencyIdB, history, tab, chainRoute])\r\n  const handleClearCurrencyB = useCallback(() => {\r\n    history.push(`/pools/${chainRoute}/${currencyIdA}/undefined?tab=${tab}`)\r\n  }, [currencyIdA, history, tab, chainRoute])\r\n\r\n  const { mixpanelHandler } = useMixpanel()\r\n\r\n  const handleClickCreatePoolButton = () => {\r\n    if (tab === VERSION.CLASSIC) {\r\n      mixpanelHandler(MIXPANEL_TYPE.CREATE_POOL_INITITATED)\r\n    } else {\r\n      mixpanelHandler(MIXPANEL_TYPE.ELASTIC_CREATE_POOL_INITIATED)\r\n    }\r\n\r\n    const url =\r\n      tab === VERSION.CLASSIC\r\n        ? `/create/${currencyIdA === '' ? undefined : currencyIdA}/${currencyIdB === '' ? undefined : currencyIdB}`\r\n        : `/elastic/add${\r\n            currencyIdA && currencyIdB\r\n              ? `/${currencyIdA}/${currencyIdB}`\r\n              : currencyIdA || currencyIdB\r\n              ? `/${currencyIdA || currencyIdB}`\r\n              : ''\r\n          }`\r\n\r\n    if (chainId === ChainId.ETHW) {\r\n      setUrlOnEthPowAck(url)\r\n      toggleEthPowAckModal()\r\n    } else {\r\n      history.push(url)\r\n    }\r\n  }\r\n\r\n  if (!isEVM) return <Redirect to=\"/\" />\r\n  return (\r\n    <>\r\n      <PoolsPageWrapper>\r\n        <Flex justifyContent=\"space-between\">\r\n          <ClassicElasticTab />\r\n          <GlobalData />\r\n        </Flex>\r\n\r\n        <Instruction />\r\n\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Flex sx={{ gap: '24px', cursor: 'pointer' }} alignItems=\"center\">\r\n            <Text\r\n              role=\"button\"\r\n              color={onlyShowStable ? theme.subText : theme.primary}\r\n              fontWeight=\"500\"\r\n              fontSize={[16, 20]}\r\n              onClick={() => setOnlyShowStable(false)}\r\n            >\r\n              <Trans>All</Trans>\r\n            </Text>\r\n\r\n            <Flex\r\n              role=\"button\"\r\n              alignItems=\"center\"\r\n              onClick={() => setOnlyShowStable(true)}\r\n              color={!onlyShowStable ? theme.subText : theme.primary}\r\n            >\r\n              <StableIcon />\r\n              <Text marginLeft=\"4px\" fontWeight=\"500\" fontSize={[16, 20]}>\r\n                <Trans>Stablecoins</Trans>\r\n              </Text>\r\n            </Flex>\r\n          </Flex>\r\n\r\n          <Tutorial type={tab === VERSION.ELASTIC ? TutorialType.ELASTIC_POOLS : TutorialType.CLASSIC_POOLS} />\r\n        </Flex>\r\n\r\n        <FarmingPoolsMarquee tab={tab} />\r\n\r\n        {(tab === VERSION.ELASTIC ? above1260 : above1000) ? (\r\n          <ToolbarWrapper>\r\n            <CurrencyWrapper>\r\n              <PoolsCurrencyInputPanel\r\n                onCurrencySelect={handleCurrencyASelect}\r\n                onClearCurrency={handleClearCurrencyA}\r\n                currency={currencies[Field.CURRENCY_A]}\r\n                id=\"input-tokena\"\r\n                showCommonBases\r\n              />\r\n              <span style={{ margin: '0 8px' }}>-</span>\r\n              <PoolsCurrencyInputPanel\r\n                onCurrencySelect={handleCurrencyBSelect}\r\n                onClearCurrency={handleClearCurrencyB}\r\n                currency={currencies[Field.CURRENCY_B]}\r\n                id=\"input-tokenb\"\r\n                showCommonBases\r\n              />\r\n              <ButtonPrimary\r\n                padding=\"9px 13px\"\r\n                width=\"fit-content\"\r\n                style={{ marginLeft: '16px', borderRadius: '40px', fontSize: '14px' }}\r\n                onClick={() => {\r\n                  if (currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B]) {\r\n                    history.push(\r\n                      `/swap?inputCurrency=${currencyId(\r\n                        currencies[Field.CURRENCY_A] as Currency,\r\n                        chainId,\r\n                      )}&outputCurrency=${currencyId(currencies[Field.CURRENCY_B] as Currency, chainId)}`,\r\n                    )\r\n                  } else if (currencies[Field.CURRENCY_A]) {\r\n                    history.push(`/swap?inputCurrency=${currencyId(currencies[Field.CURRENCY_A] as Currency, chainId)}`)\r\n                  } else if (currencies[Field.CURRENCY_B]) {\r\n                    history.push(\r\n                      `/swap?outputCurrency=${currencyId(currencies[Field.CURRENCY_B] as Currency, chainId)}`,\r\n                    )\r\n                  }\r\n                }}\r\n                disabled={!currencies[Field.CURRENCY_A] && !currencies[Field.CURRENCY_B]}\r\n              >\r\n                <Trans>Swap</Trans>\r\n              </ButtonPrimary>\r\n            </CurrencyWrapper>\r\n\r\n            <Flex style={{ gap: '10px' }}>\r\n              <Flex alignItems=\"center\" style={{ gap: '8px' }}>\r\n                <Text fontSize=\"14px\" color={theme.subText} fontWeight={500}>\r\n                  <MouseoverTooltip placement=\"top\" width=\"fit-content\" text={t`Total Value Locked is less than $1`}>\r\n                    <TextWithTooltip>\r\n                      <Trans>Low TVL Pools</Trans>\r\n                    </TextWithTooltip>\r\n                  </MouseoverTooltip>\r\n                </Text>\r\n\r\n                <Toggle isActive={shouldShowLowTVLPools} toggle={() => setShowLowTVLPools(prev => !prev)} />\r\n              </Flex>\r\n\r\n              <Flex alignItems=\"center\" style={{ gap: '8px' }}>\r\n                <Text fontSize=\"14px\" color={theme.subText} fontWeight={500}>\r\n                  <Trans>Farming Pools</Trans>\r\n                </Text>\r\n\r\n                <Toggle\r\n                  isActive={isShowOnlyActiveFarmPools}\r\n                  toggle={() => setIsShowOnlyActiveFarmPools(prev => !prev)}\r\n                />\r\n              </Flex>\r\n\r\n              <Search\r\n                searchValue={searchValueInQs}\r\n                onSearch={onSearch}\r\n                placeholder={t`Search by token name or pool address`}\r\n                minWidth={below1124 ? '260px' : '360px'}\r\n              />\r\n\r\n              <ToolbarWrapper style={{ marginBottom: '0px' }}>\r\n                <ButtonPrimaryWithHighlight\r\n                  onClick={handleClickCreatePoolButton}\r\n                  data-highlight={shouldHighlightCreatePoolButton}\r\n                  style={{\r\n                    height: '38px',\r\n                    padding: '0px 12px',\r\n                  }}\r\n                >\r\n                  <Plus width=\"22\" height=\"22\" />\r\n                  <Text as=\"span\" sx={{ marginLeft: '4px' }}>\r\n                    <Trans>Create Pool</Trans>\r\n                  </Text>\r\n                </ButtonPrimaryWithHighlight>\r\n              </ToolbarWrapper>\r\n            </Flex>\r\n          </ToolbarWrapper>\r\n        ) : (\r\n          <>\r\n            <Flex sx={{ gap: '12px' }}>\r\n              <Search\r\n                style={{ flex: 1 }}\r\n                searchValue={searchValueInQs}\r\n                onSearch={onSearch}\r\n                placeholder={t`Search by token name or pool address`}\r\n              />\r\n              {tab === VERSION.ELASTIC && (\r\n                <ButtonPrimaryWithHighlight\r\n                  onClick={handleClickCreatePoolButton}\r\n                  data-highlight={shouldHighlightCreatePoolButton}\r\n                  style={{\r\n                    width: '38px',\r\n                    height: '38px',\r\n                    padding: '0',\r\n                  }}\r\n                >\r\n                  <Plus width=\"24px\" height=\"24px\" />\r\n                </ButtonPrimaryWithHighlight>\r\n              )}\r\n              {tab === VERSION.CLASSIC && (\r\n                <ButtonPrimaryWithHighlight\r\n                  onClick={handleClickCreatePoolButton}\r\n                  data-highlight={shouldHighlightCreatePoolButton}\r\n                  style={{\r\n                    width: '38px',\r\n                    height: '38px',\r\n                    padding: '0',\r\n                  }}\r\n                >\r\n                  <Plus width=\"24px\" height=\"24px\" />\r\n                </ButtonPrimaryWithHighlight>\r\n              )}\r\n            </Flex>\r\n            <Flex justifyContent=\"space-between\">\r\n              <CurrencyWrapper>\r\n                <PoolsCurrencyInputPanel\r\n                  showCommonBases\r\n                  onCurrencySelect={handleCurrencyASelect}\r\n                  onClearCurrency={handleClearCurrencyA}\r\n                  currency={currencies[Field.CURRENCY_A]}\r\n                  otherCurrency={currencies[Field.CURRENCY_B]}\r\n                  id=\"input-tokena\"\r\n                />\r\n                <span style={{ margin: '0 8px' }}>-</span>\r\n                <PoolsCurrencyInputPanel\r\n                  showCommonBases\r\n                  onCurrencySelect={handleCurrencyBSelect}\r\n                  onClearCurrency={handleClearCurrencyB}\r\n                  currency={currencies[Field.CURRENCY_B]}\r\n                  otherCurrency={currencies[Field.CURRENCY_A]}\r\n                  id=\"input-tokenb\"\r\n                />\r\n              </CurrencyWrapper>\r\n              <ButtonPrimary\r\n                padding=\"9px 13px\"\r\n                width=\"fit-content\"\r\n                style={{ marginLeft: '8px', borderRadius: '40px', fontSize: '14px' }}\r\n                onClick={() => {\r\n                  if (currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B]) {\r\n                    history.push(\r\n                      `/swap?inputCurrency=${currencyId(\r\n                        currencies[Field.CURRENCY_A] as Currency,\r\n                        chainId,\r\n                      )}&outputCurrency=${currencyId(currencies[Field.CURRENCY_B] as Currency, chainId)}`,\r\n                    )\r\n                  } else if (currencies[Field.CURRENCY_A]) {\r\n                    history.push(`/swap?inputCurrency=${currencyId(currencies[Field.CURRENCY_A] as Currency, chainId)}`)\r\n                  } else if (currencies[Field.CURRENCY_B]) {\r\n                    history.push(\r\n                      `/swap?outputCurrency=${currencyId(currencies[Field.CURRENCY_B] as Currency, chainId)}`,\r\n                    )\r\n                  }\r\n                }}\r\n                disabled={!currencies[Field.CURRENCY_A] && !currencies[Field.CURRENCY_B]}\r\n              >\r\n                <Trans>Swap</Trans>\r\n              </ButtonPrimary>\r\n            </Flex>\r\n\r\n            <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n              <Flex\r\n                alignItems={'center'}\r\n                sx={{\r\n                  columnGap: '8px',\r\n                }}\r\n              >\r\n                <Text fontSize=\"14px\" color={theme.subText} fontWeight={500}>\r\n                  <Trans>Farming Pools</Trans>\r\n                </Text>\r\n\r\n                <Toggle\r\n                  isActive={isShowOnlyActiveFarmPools}\r\n                  toggle={() => setIsShowOnlyActiveFarmPools(prev => !prev)}\r\n                />\r\n              </Flex>\r\n\r\n              <Flex alignItems=\"center\" style={{ gap: '8px' }}>\r\n                <Text fontSize=\"14px\" color={theme.subText} fontWeight={500}>\r\n                  <MouseoverTooltip placement=\"top\" width=\"fit-content\" text={t`Total Value Locked is less than $1`}>\r\n                    <TextWithTooltip>\r\n                      <Trans>Low TVL Pools</Trans>\r\n                    </TextWithTooltip>\r\n                  </MouseoverTooltip>\r\n                </Text>\r\n\r\n                <Toggle isActive={shouldShowLowTVLPools} toggle={() => setShowLowTVLPools(prev => !prev)} />\r\n              </Flex>\r\n            </Flex>\r\n          </>\r\n        )}\r\n\r\n        {tab === VERSION.CLASSIC ? (\r\n          <PoolList\r\n            currencies={currencies}\r\n            searchValue={debouncedSearchValue}\r\n            isShowOnlyActiveFarmPools={isShowOnlyActiveFarmPools}\r\n            onlyShowStable={onlyShowStable}\r\n            shouldShowLowTVLPools={shouldShowLowTVLPools}\r\n          />\r\n        ) : (\r\n          <ProAmmPoolList\r\n            currencies={currencies}\r\n            searchValue={debouncedSearchValue}\r\n            isShowOnlyActiveFarmPools={isShowOnlyActiveFarmPools}\r\n            onlyShowStable={onlyShowStable}\r\n            shouldShowLowTVLPools={shouldShowLowTVLPools}\r\n          />\r\n        )}\r\n      </PoolsPageWrapper>\r\n      <SwitchLocaleLink />\r\n\r\n      <ModalEthPoWAck />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Pools\r\n","import { lighten, rgba } from 'polished'\r\nimport styled from 'styled-components'\r\n\r\nimport { ButtonEmpty } from 'components/Button'\r\n\r\nexport const PoolsPageWrapper = styled.div`\r\n  padding: 32px 24px 50px;\r\n  width: 100%;\r\n  max-width: 1500px;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    padding: 24px 16px 100px;\r\n  `}\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n`\r\n\r\nexport const ToolbarWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`\r\n\r\nexport const CurrencyWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\n\r\nexport const SelectPairInstructionWrapper = styled.div`\r\n  text-align: center;\r\n  height: 100%;\r\n  padding: 24px;\r\n`\r\n\r\nexport const IconWrapper = styled.div`\r\n  border-radius: 50%;\r\n  background: ${({ theme }) => theme.apr};\r\n  width: 18px;\r\n  height: 18px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nexport const ButtonIcon = styled(ButtonEmpty)`\r\n  background: ${({ theme }) => rgba(theme.subText, 0.2)};\r\n  width: 28px;\r\n  min-width: 28px;\r\n  height: 28px;\r\n  min-height: 28px;\r\n  border-radius: 50%;\r\n  padding: 0;\r\n  color: ${({ theme }) => theme.subText} !important;\r\n\r\n  :hover {\r\n    background: ${({ theme }) => lighten(0.4, rgba(theme.subText, 0.2))};\r\n  }\r\n`\r\n","import { ChainId } from '@kyberswap/ks-sdk-core'\r\nimport { useEffect, useState } from 'react'\r\n\r\nimport { GLOBAL_DATA, GLOBAL_DATA_ELASTIC } from 'apollo/queries'\r\nimport { EVM_MAINNET_NETWORKS, NETWORKS_INFO, isEVM } from 'constants/networks'\r\nimport { ELASTIC_NOT_SUPPORTED, VERSION } from 'constants/v2'\r\nimport useAggregatorAPR from 'hooks/useAggregatorAPR'\r\nimport useAggregatorVolume from 'hooks/useAggregatorVolume'\r\n\r\ninterface GlobalData {\r\n  dmmFactories: {\r\n    totalVolumeUSD: string\r\n    totalVolumeETH: string\r\n    totalFeeUSD: string\r\n    untrackedVolumeUSD: string\r\n    untrackedFeeUSD: string\r\n    totalLiquidityUSD: string\r\n    totalLiquidityETH: string\r\n    totalAmplifiedLiquidityUSD: string\r\n    totalAmplifiedLiquidityETH: string\r\n    [key: string]: string\r\n  }[]\r\n  aggregatorData?: {\r\n    totalVolume?: string\r\n    last24hVolume?: string\r\n    maxApr?: {\r\n      value: number\r\n      id: string\r\n      chain_id: number\r\n      is_farm: boolean\r\n      type?: VERSION.CLASSIC | VERSION.ELASTIC\r\n    }\r\n    totalEarnings?: number\r\n  }\r\n}\r\n\r\nexport function useGlobalData() {\r\n  const [globalData, setGlobalData] = useState<GlobalData>()\r\n  const aggregatorData = useAggregatorVolume()\r\n  const aggregatorAPR = useAggregatorAPR()\r\n\r\n  useEffect(() => {\r\n    const getSumValues = (results: { data: GlobalData }[], field: string) => {\r\n      return results\r\n        .reduce((total, item) => {\r\n          if (!item?.data?.dmmFactories?.length) return total\r\n          const sum = item.data.dmmFactories.reduce((sum, factory) => sum + parseFloat(factory[field] || '0'), 0)\r\n          return total + sum\r\n        }, 0)\r\n        .toString()\r\n    }\r\n    const getResultByChainIds = async (chainIds: readonly ChainId[]) => {\r\n      // todo namgold: add aggregator API for solana\r\n      const elasticChains = chainIds.filter(isEVM).filter(id => !ELASTIC_NOT_SUPPORTED[id])\r\n\r\n      const elasticPromises = elasticChains.map(chain =>\r\n        NETWORKS_INFO[chain].elasticClient.query({\r\n          query: GLOBAL_DATA_ELASTIC(),\r\n          fetchPolicy: 'cache-first',\r\n        }),\r\n      )\r\n\r\n      const elasticResult = (await Promise.all(elasticPromises.map(promises => promises.catch(e => e)))).filter(\r\n        res => !(res instanceof Error),\r\n      )\r\n\r\n      const tvlElastic = elasticResult.reduce((total, item) => {\r\n        return total + parseFloat(item?.data?.factories?.[0]?.totalValueLockedUSD || '0')\r\n      }, 0)\r\n\r\n      const allChainPromises = chainIds.filter(isEVM).map(chain =>\r\n        NETWORKS_INFO[chain].classicClient.query({\r\n          query: GLOBAL_DATA(),\r\n          fetchPolicy: 'cache-first',\r\n        }),\r\n      )\r\n\r\n      const queryResult = (await Promise.all(allChainPromises.map(promises => promises.catch(e => e)))).filter(\r\n        res => !(res instanceof Error),\r\n      )\r\n\r\n      return {\r\n        data: {\r\n          dmmFactories: [\r\n            {\r\n              totalVolumeUSD: getSumValues(queryResult, 'totalVolumeUSD'),\r\n              totalVolumeETH: getSumValues(queryResult, 'totalVolumeETH'),\r\n              totalFeeUSD: getSumValues(queryResult, 'totalFeeUSD'),\r\n              untrackedVolumeUSD: getSumValues(queryResult, 'untrackedVolumeUSD'),\r\n              untrackedFeeUSD: getSumValues(queryResult, 'untrackedFeeUSD'),\r\n              totalLiquidityUSD: parseFloat(getSumValues(queryResult, 'totalLiquidityUSD')) + tvlElastic,\r\n              totalLiquidityETH: getSumValues(queryResult, 'totalLiquidityETH'),\r\n              totalAmplifiedLiquidityUSD: getSumValues(queryResult, 'totalAmplifiedLiquidityUSD'),\r\n              totalAmplifiedLiquidityETH: getSumValues(queryResult, 'totalAmplifiedLiquidityETH'),\r\n            },\r\n          ],\r\n        },\r\n      }\r\n    }\r\n\r\n    async function getGlobalData() {\r\n      const result = await getResultByChainIds(EVM_MAINNET_NETWORKS.filter(chain => chain !== ChainId.ETHW))\r\n\r\n      setGlobalData({\r\n        ...result.data,\r\n        aggregatorData: {\r\n          totalVolume: aggregatorData?.totalVolume,\r\n          last24hVolume: aggregatorData?.last24hVolume,\r\n          maxApr: aggregatorAPR?.max_apr,\r\n          totalEarnings: aggregatorAPR?.total_earnings,\r\n        },\r\n      })\r\n    }\r\n\r\n    getGlobalData()\r\n  }, [aggregatorData, aggregatorAPR])\r\n\r\n  return globalData\r\n}\r\n","import useSWR from 'swr'\r\n\r\nimport { AGGREGATOR_STATS_API } from 'constants/env'\r\n\r\ninterface VolumeResponse {\r\n  totalVolume: string\r\n  last24hVolume: string\r\n}\r\n\r\nexport default function useAggregatorVolume(): VolumeResponse {\r\n  const fetcher = (url: string) => fetch(url).then(r => r.json())\r\n\r\n  const url = `${AGGREGATOR_STATS_API}/api/volume`\r\n\r\n  const { data, error } = useSWR(url, fetcher, {\r\n    refreshInterval: 10000,\r\n    onErrorRetry: (error, _key, _config, revalidate, { retryCount }) => {\r\n      // Never retry on 404.\r\n      if (error.status === 404) return\r\n\r\n      // Only retry up to 10 times.\r\n      if (retryCount >= 10) return\r\n\r\n      if (error.status === 403) {\r\n        // If API return 403, retry after 30 seconds.\r\n        setTimeout(() => revalidate({ retryCount }), 30000)\r\n        return\r\n      }\r\n\r\n      // Retry after 5 seconds.\r\n      setTimeout(() => revalidate({ retryCount }), 5000)\r\n    },\r\n  })\r\n\r\n  if (error) {\r\n    console.error(error.message)\r\n  }\r\n\r\n  return data\r\n}\r\n","import useSWR from 'swr'\r\n\r\nimport { AGGREGATOR_STATS_API } from 'constants/env'\r\nimport { VERSION } from 'constants/v2'\r\n\r\ninterface APRResponse {\r\n  max_apr: {\r\n    value: number\r\n    id: string\r\n    chain_id: number\r\n    is_farm: boolean\r\n    type?: VERSION.CLASSIC | VERSION.ELASTIC\r\n  }\r\n  total_earnings: number\r\n}\r\n\r\nexport default function useAggregatorAPR(): APRResponse {\r\n  const fetcher = (url: string) => fetch(url).then(r => r.json())\r\n\r\n  const url = `${AGGREGATOR_STATS_API}/api/max-apr-and-total-earning`\r\n\r\n  const { data, error } = useSWR(url, fetcher, {\r\n    refreshInterval: 10000,\r\n    onErrorRetry: (error, _key, _config, revalidate, { retryCount }) => {\r\n      // Never retry on 404.\r\n      if (error.status === 404) return\r\n\r\n      // Only retry up to 10 times.\r\n      if (retryCount >= 10) return\r\n\r\n      if (error.status === 403) {\r\n        // If API return 403, retry after 30 seconds.\r\n        setTimeout(() => revalidate({ retryCount }), 30000)\r\n        return\r\n      }\r\n\r\n      // Retry after 5 seconds.\r\n      setTimeout(() => revalidate({ retryCount }), 5000)\r\n    },\r\n  })\r\n\r\n  if (error) {\r\n    console.error(error.message)\r\n  }\r\n\r\n  return data\r\n}\r\n"],"sourceRoot":""}