{"version":3,"sources":["components/ProAmm/ProAmmFee.tsx","components/Slider/index.tsx","hooks/useProAmmPositionFees.ts","hooks/useProAmmPositions.ts","pages/RemoveLiquidity/styled.tsx","state/burn/proamm/hooks.tsx","pages/RemoveLiquidityProAmm/styled.tsx","pages/RemoveLiquidityProAmm/index.tsx","utils/useDebouncedChangeHandler.tsx"],"names":["ProAmmFee","tokenId","position","layout","text","hasUserDepositedInFarm","feeValue0","feeValue1","totalFeeRewardUSD","useActiveWeb3React","chainId","account","library","useWeb3React","theme","useTheme","token0Shown","unwrappedToken","pool","token0","token1Shown","token1","addTransactionWithType","useTransactionAdder","positionManager","useProAmmNFTPositionManagerContract","deadline","useTransactionDeadline","mixpanelHandler","useMixpanel","useUserSlippageTolerance","allowedSlippage","collect","useCallback","MIXPANEL_TYPE","ELASTIC_COLLECT_FEES_INITIATED","token_1","symbol","token_2","NonfungiblePositionManager","collectCallParameters","toString","expectedCurrencyOwed0","subtract","multiply","basisPointsToPercent","expectedCurrencyOwed1","recipient","havingFee","calldata","value","txn","to","address","data","getSigner","estimateGas","then","estimate","newTxn","gasLimit","calculateGasMargin","sendTransaction","response","hash","type","TRANSACTION_TYPE","COLLECT_FEE","summary","toSignificant","currency","arbitrary","token_1_amount","token_2_amount","catch","error","console","hasNoFeeToCollect","greaterThan","marginTop","padding","gap","fontSize","fontWeight","color","subText","marginLeft","formattedNumLong","size","style","currencyAmount","placement","sx","cursor","width","pointerEvents","disabled","alignItems","onClick","useCurrentColor","StyledRangeInput","styled","input","Slider","onChange","min","step","max","className","changeCallback","e","parseInt","target","marginRight","useProAmmPositionFees","asWETH","tokenIdHexString","toHexString","useProAmmTotalFeeOwedByPosition","current","last24h","length","CurrencyAmount","fromRawAmount","undefined","useProAmmPositionsFromTokenIds","tokenIds","isEVM","networkInfo","inputs","useMemo","map","results","useSingleContractMultipleData","loading","some","positions","call","i","result","poolId","getCreate2Address","elastic","coreFactory","keccak256","defaultAbiCoder","encode","info","fee","initCodeHash","feeGrowthInsideLast","pos","nonce","liquidity","operator","tickLower","tickUpper","rTokenOwed","useProAmmPositionsFromTokenId","useProAmmPositions","useSingleCallResult","balanceLoading","balanceResult","accountBalance","toNumber","tokenIdsArgs","tokenRequests","push","tokenIdResults","someTokenIdsLoading","filter","BigNumber","from","positionsLoading","PageWrapper","div","Container","background","GridColumn","TopBar","border","LiquidityProviderModeWrapper","PoolName","FirstColumn","AutoColumn","SecondColumn","MaxButton","button","primary","mediaWidth","upToSmall","DetailWrapper","DetailBox","TokenWrapper","ModalDetailWrapper","CurrentPriceWrapper","useBurnProAmmState","useAppSelector","state","burnProAmm","MaxBtn","upToExtraSmall","MaxButtonGroup","Flex","PercentText","Text","RemoveLiquidityProAmm","location","match","params","parsedTokenId","eq","pathname","Remove","toggleWalletModal","useWalletModalToggle","owner","ownsNFT","history","useHistory","prevChainId","usePrevious","useEffect","useState","receiveWETH","setReceiveWETH","independentField","typedValue","useToken","tokens","Field","CURRENCY_A","CURRENCY_B","usePool","positionSDK","Position","liquidityValues","amount0","amount1","liquidityPercentage","Percent","LIQUIDITY_PERCENT","independentAmount","tryParseAmount","liquidityValue","quotient","discountedAmount0","discountedAmount1","liquidityValue0","liquidityValue1","outOfRange","tickCurrent","parsedAmounts","TokenAmount","wrapped","pooledAmount0","pooledAmount1","useDerivedProAmmBurnInfo","currency0IsETHER","isNative","currency0IsWETH","equals","WETH","currency1IsETHER","currency1IsWETH","dispatch","useAppDispatch","onUserInput","field","typeInput","useBurnProAmmActionHandlers","removed","poolAddress","useProAmmPoolInfo","liquidityPercentChangeCallback","useDebouncedChangeHandler","Number","toFixed","percentForSlider","onPercentSelectForSlider","formattedAmounts","equalTo","lessThan","usdPrices","useTokensPrice","VERSION","ELASTIC","parseFloat","toExact","estimatedUsdCurrencyA","estimatedUsdCurrencyB","showConfirm","setShowConfirm","attemptingTxn","setAttemptingTxn","txnHash","setTxnHash","burn","removeCallParameters","slippageTolerance","collectOptions","isRemovingLiquid","JSBI","BigInt","ELASTIC_REMOVE_LIQUIDITY","handleDismissConfirmation","pendingText","ZERO","modalFooter","Button","mt","onCurrencyAInput","onCurrencyBInput","TransactionConfirmationModal","isOpen","onDismiss","content","title","topContent","ProAmmPooledTokens","Loader","bottomContent","action","LiquidityAction","REMOVE","hideShare","tooltip","tutorialType","TutorialType","paddingTop","paddingBottom","backgroundColor","bg3Opacity4","borderRadius","marginBottom","shortenAddress","display","Copy","toCopy","Divider","textAlign","ProAmmPoolInfo","pooled","margin","CurrencyInputPanel","onMax","onHalf","onCurrencySelect","id","estimatedUsd","formattedNum","disableCurrencySelect","isSwitchMode","onSwitchCurrency","prev","confirmed","debouncedMs","inner","setInner","timer","useRef","onChangeInner","newValue","clearTimeout","setTimeout"],"mappings":"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","file":"static/js/elastic-remove-liquidity-page.d88b3e55.chunk.js","sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\r\nimport { TransactionResponse } from '@ethersproject/providers'\r\nimport { Currency, CurrencyAmount } from '@kyberswap/ks-sdk-core'\r\nimport { NonfungiblePositionManager, Position } from '@kyberswap/ks-sdk-elastic'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport { useCallback } from 'react'\r\nimport { Info } from 'react-feather'\r\nimport { Flex, Text } from 'rebass'\r\n\r\nimport { ButtonLight } from 'components/Button'\r\nimport { OutlineCard } from 'components/Card'\r\nimport { AutoColumn } from 'components/Column'\r\nimport CurrencyLogo from 'components/CurrencyLogo'\r\nimport Divider from 'components/Divider'\r\nimport FormattedCurrencyAmount from 'components/FormattedCurrencyAmount'\r\nimport QuestionHelper from 'components/QuestionHelper'\r\nimport { RowBetween, RowFixed } from 'components/Row'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport { useActiveWeb3React, useWeb3React } from 'hooks'\r\nimport { useProAmmNFTPositionManagerContract } from 'hooks/useContract'\r\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useTransactionDeadline from 'hooks/useTransactionDeadline'\r\nimport { useTransactionAdder } from 'state/transactions/hooks'\r\nimport { TRANSACTION_TYPE } from 'state/transactions/type'\r\nimport { useUserSlippageTolerance } from 'state/user/hooks'\r\nimport { basisPointsToPercent, calculateGasMargin, formattedNumLong } from 'utils'\r\nimport { unwrappedToken } from 'utils/wrappedCurrency'\r\n\r\nexport default function ProAmmFee({\r\n  tokenId,\r\n  position,\r\n  layout = 0,\r\n  text = '',\r\n  hasUserDepositedInFarm,\r\n  feeValue0,\r\n  feeValue1,\r\n  totalFeeRewardUSD,\r\n}: {\r\n  totalFeeRewardUSD: number\r\n  tokenId: BigNumber\r\n  position: Position\r\n  layout?: number\r\n  text?: string\r\n  hasUserDepositedInFarm?: boolean\r\n  feeValue0: CurrencyAmount<Currency> | undefined\r\n  feeValue1: CurrencyAmount<Currency> | undefined\r\n}) {\r\n  const { chainId, account } = useActiveWeb3React()\r\n  const { library } = useWeb3React()\r\n  const theme = useTheme()\r\n  const token0Shown = unwrappedToken(position.pool.token0)\r\n  const token1Shown = unwrappedToken(position.pool.token1)\r\n  const addTransactionWithType = useTransactionAdder()\r\n  const positionManager = useProAmmNFTPositionManagerContract()\r\n  const deadline = useTransactionDeadline() // custom from users settings\r\n  const { mixpanelHandler } = useMixpanel()\r\n\r\n  const [allowedSlippage] = useUserSlippageTolerance()\r\n\r\n  const collect = useCallback(() => {\r\n    if (\r\n      !chainId ||\r\n      !feeValue0 ||\r\n      !feeValue1 ||\r\n      !positionManager ||\r\n      !account ||\r\n      !tokenId ||\r\n      !library ||\r\n      !deadline ||\r\n      !layout\r\n    )\r\n      return\r\n    // setCollecting(true)\r\n    mixpanelHandler(MIXPANEL_TYPE.ELASTIC_COLLECT_FEES_INITIATED, {\r\n      token_1: token0Shown?.symbol,\r\n      token_2: token1Shown?.symbol,\r\n    })\r\n\r\n    const { calldata, value } = NonfungiblePositionManager.collectCallParameters({\r\n      tokenId: tokenId.toString(),\r\n      expectedCurrencyOwed0: feeValue0.subtract(feeValue0.multiply(basisPointsToPercent(allowedSlippage))),\r\n      expectedCurrencyOwed1: feeValue1.subtract(feeValue1.multiply(basisPointsToPercent(allowedSlippage))),\r\n      recipient: account,\r\n      deadline: deadline.toString(),\r\n      havingFee: true,\r\n    })\r\n\r\n    const txn = {\r\n      to: positionManager.address,\r\n      data: calldata,\r\n      value,\r\n    }\r\n\r\n    library\r\n      .getSigner()\r\n      .estimateGas(txn)\r\n      .then((estimate: BigNumber) => {\r\n        const newTxn = {\r\n          ...txn,\r\n          gasLimit: calculateGasMargin(estimate),\r\n        }\r\n        return library\r\n          .getSigner()\r\n          .sendTransaction(newTxn)\r\n          .then((response: TransactionResponse) => {\r\n            addTransactionWithType({\r\n              hash: response.hash,\r\n              type: TRANSACTION_TYPE.COLLECT_FEE,\r\n              summary:\r\n                feeValue0.toSignificant(6) +\r\n                ' ' +\r\n                feeValue0.currency.symbol +\r\n                ' and ' +\r\n                feeValue1.toSignificant(6) +\r\n                ' ' +\r\n                feeValue1.currency.symbol,\r\n              arbitrary: {\r\n                token_1: token0Shown?.symbol,\r\n                token_2: token1Shown?.symbol,\r\n                token_1_amount: feeValue0.toSignificant(6),\r\n                token_2_amount: feeValue1.toSignificant(6),\r\n              },\r\n            })\r\n          })\r\n      })\r\n      .catch((error: any) => {\r\n        console.error(error)\r\n      })\r\n  }, [\r\n    chainId,\r\n    feeValue0,\r\n    feeValue1,\r\n    positionManager,\r\n    account,\r\n    tokenId,\r\n    addTransactionWithType,\r\n    library,\r\n    deadline,\r\n    layout,\r\n    token0Shown,\r\n    token1Shown,\r\n    mixpanelHandler,\r\n    allowedSlippage,\r\n  ])\r\n  const hasNoFeeToCollect = !(feeValue0?.greaterThan(0) || feeValue1?.greaterThan(0))\r\n\r\n  if (layout === 0) {\r\n    return (\r\n      <OutlineCard marginTop=\"1rem\" padding=\"1rem\">\r\n        <AutoColumn gap=\"md\">\r\n          <Text fontSize=\"16px\" fontWeight=\"500\">\r\n            Your Fee Earnings\r\n          </Text>\r\n          {text && (\r\n            <Text color={theme.subText} fontSize=\"12px\">\r\n              {text}\r\n            </Text>\r\n          )}\r\n\r\n          <Divider />\r\n          <RowBetween>\r\n            <Text fontSize={12} fontWeight={500} color={theme.subText}>\r\n              <Trans>Total Fees Earned</Trans>\r\n            </Text>\r\n            <RowFixed>\r\n              <Text fontSize={14} fontWeight={500} marginLeft={'6px'}>\r\n                {formattedNumLong(totalFeeRewardUSD, true)}\r\n              </Text>\r\n            </RowFixed>\r\n          </RowBetween>\r\n\r\n          <RowBetween>\r\n            <Text fontSize={12} fontWeight={500} color={theme.subText}>\r\n              <Trans>{token0Shown.symbol} Fees Earned</Trans>\r\n            </Text>\r\n            <RowFixed>\r\n              <CurrencyLogo size=\"16px\" style={{ marginLeft: '8px' }} currency={token0Shown} />\r\n              <Text fontSize={14} fontWeight={500} marginLeft={'6px'}>\r\n                {feeValue0 && <FormattedCurrencyAmount currencyAmount={feeValue0} />} {token0Shown.symbol}\r\n              </Text>\r\n            </RowFixed>\r\n          </RowBetween>\r\n\r\n          <RowBetween>\r\n            <Text fontSize={12} fontWeight={500} color={theme.subText}>\r\n              <Trans>{token1Shown.symbol} Fees Earned</Trans>\r\n            </Text>\r\n            <RowFixed>\r\n              <CurrencyLogo size=\"16px\" style={{ marginLeft: '8px' }} currency={token1Shown} />\r\n              <Text fontSize={14} fontWeight={500} marginLeft={'6px'}>\r\n                {feeValue1 && <FormattedCurrencyAmount currencyAmount={feeValue1} />} {token1Shown.symbol}\r\n              </Text>\r\n            </RowFixed>\r\n          </RowBetween>\r\n        </AutoColumn>\r\n      </OutlineCard>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <OutlineCard marginTop=\"1rem\" padding=\"1rem\">\r\n      <AutoColumn gap=\"md\">\r\n        <RowBetween>\r\n          <Flex>\r\n            <Text fontSize={12} fontWeight={500} color={theme.subText}>\r\n              <Trans>Total Fees Earned</Trans>\r\n            </Text>\r\n          </Flex>\r\n          <RowFixed>\r\n            <Text fontSize={12} fontWeight={500}>\r\n              {formattedNumLong(totalFeeRewardUSD, true)}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n\r\n        <RowBetween>\r\n          <Flex>\r\n            <Text fontSize={12} fontWeight={500} color={theme.subText}>\r\n              <Trans>{token0Shown.symbol} Fees Earned</Trans>\r\n            </Text>\r\n            <QuestionHelper text={t`Your fees are being automatically compounded so you earn more`} />\r\n          </Flex>\r\n          <RowFixed>\r\n            <CurrencyLogo size=\"16px\" style={{ marginLeft: '8px' }} currency={token0Shown} />\r\n            <Text fontSize={12} fontWeight={500} marginLeft={'6px'}>\r\n              {feeValue0 && <FormattedCurrencyAmount currencyAmount={feeValue0} />} {token0Shown.symbol}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n        <RowBetween>\r\n          <Flex>\r\n            <Text fontSize={12} fontWeight={500} color={theme.subText}>\r\n              <Trans>{token1Shown.symbol} Fees Earned</Trans>\r\n            </Text>\r\n            <QuestionHelper text={t`Your fees are being automatically compounded so you earn more`} />\r\n          </Flex>\r\n          <RowFixed>\r\n            <CurrencyLogo size=\"16px\" style={{ marginLeft: '8px' }} currency={token1Shown} />\r\n            <Text fontSize={12} fontWeight={500} marginLeft={'6px'}>\r\n              {feeValue1 && <FormattedCurrencyAmount currencyAmount={feeValue1} />} {token1Shown.symbol}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n        {hasUserDepositedInFarm ? (\r\n          <MouseoverTooltip\r\n            placement=\"top\"\r\n            text={t`You need to withdraw your deposited liquidity position from the Farm first`}\r\n          >\r\n            <Flex\r\n              // this flex looks like redundant\r\n              // but without this, the cursor will be default\r\n              // as we put pointerEvents=none on the button\r\n              sx={{\r\n                cursor: 'not-allowed',\r\n                width: '100%',\r\n              }}\r\n            >\r\n              <ButtonLight\r\n                style={{\r\n                  padding: '10px',\r\n                  fontSize: '14px',\r\n                  width: '100%',\r\n                  pointerEvents: 'none',\r\n                }}\r\n                disabled\r\n              >\r\n                <Flex alignItems=\"center\" sx={{ gap: '8px' }}>\r\n                  <Info size={16} />\r\n                  <Trans>Collect Fees</Trans>\r\n                </Flex>\r\n              </ButtonLight>\r\n            </Flex>\r\n          </MouseoverTooltip>\r\n        ) : (\r\n          <ButtonLight disabled={hasNoFeeToCollect} onClick={collect} style={{ padding: '10px', fontSize: '14px' }}>\r\n            <Flex alignItems=\"center\" sx={{ gap: '8px' }}>\r\n              <QuestionHelper\r\n                placement=\"top\"\r\n                size={16}\r\n                text={\r\n                  hasNoFeeToCollect\r\n                    ? t`You don't have any fees to collect`\r\n                    : t`By collecting, you will receive 100% of your fee earnings`\r\n                }\r\n                useCurrentColor\r\n              />\r\n              <Trans>Collect Fees</Trans>\r\n            </Flex>\r\n          </ButtonLight>\r\n        )}\r\n      </AutoColumn>\r\n    </OutlineCard>\r\n  )\r\n}\r\n","import React, { CSSProperties, ChangeEvent, useCallback } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledRangeInput = styled.input<{ size: number }>`\r\n  -webkit-appearance: none; /* Hides the slider so that custom slider can be made */\r\n  width: 100%; /* Specific width is required for Firefox. */\r\n  background: transparent; /* Otherwise white in Chrome */\r\n  cursor: pointer;\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n\r\n  &::-moz-focus-outer {\r\n    border: 0;\r\n  }\r\n\r\n  &::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    height: ${({ size }) => size}px;\r\n    width: ${({ size }) => size}px;\r\n    background-color: ${({ theme }) => theme.subText};\r\n    border-radius: 100%;\r\n    border: none;\r\n    transform: translateY(-50%);\r\n    color: ${({ theme }) => theme.subText};\r\n\r\n    &:hover,\r\n    &:focus {\r\n      box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 4px 8px rgba(0, 0, 0, 0.08), 0px 16px 24px rgba(0, 0, 0, 0.06),\r\n        0px 24px 32px rgba(0, 0, 0, 0.04);\r\n    }\r\n  }\r\n\r\n  &::-moz-range-thumb {\r\n    height: ${({ size }) => size}px;\r\n    width: ${({ size }) => size}px;\r\n    background-color: ${({ theme }) => theme.subText};\r\n    border-radius: 100%;\r\n    border: none;\r\n    color: ${({ theme }) => theme.subText};\r\n\r\n    &:hover,\r\n    &:focus {\r\n      box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 4px 8px rgba(0, 0, 0, 0.08), 0px 16px 24px rgba(0, 0, 0, 0.06),\r\n        0px 24px 32px rgba(0, 0, 0, 0.04);\r\n    }\r\n  }\r\n\r\n  &::-ms-thumb {\r\n    height: ${({ size }) => size}px;\r\n    width: ${({ size }) => size}px;\r\n    background-color: ${({ theme }) => theme.subText};\r\n    border-radius: 100%;\r\n    color: ${({ theme }) => theme.subText};\r\n\r\n    &:hover,\r\n    &:focus {\r\n      box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 4px 8px rgba(0, 0, 0, 0.08), 0px 16px 24px rgba(0, 0, 0, 0.06),\r\n        0px 24px 32px rgba(0, 0, 0, 0.04);\r\n    }\r\n  }\r\n\r\n  &::-webkit-slider-runnable-track {\r\n    background: linear-gradient(90deg, ${({ theme }) => theme.subText}, ${({ theme }) => theme.subText});\r\n    height: 2px;\r\n  }\r\n\r\n  &::-moz-range-track {\r\n    background: linear-gradient(90deg, ${({ theme }) => theme.subText}, ${({ theme }) => theme.subText});\r\n    height: 2px;\r\n  }\r\n\r\n  &::-ms-track {\r\n    width: 100%;\r\n    border-color: transparent;\r\n    color: transparent;\r\n\r\n    background: ${({ theme }) => theme.subText};\r\n    height: 2px;\r\n  }\r\n  &::-ms-fill-lower {\r\n    background: ${({ theme }) => theme.subText};\r\n  }\r\n  &::-ms-fill-upper {\r\n    background: ${({ theme }) => theme.subText};\r\n  }\r\n`\r\n\r\ninterface InputSliderProps {\r\n  value: number\r\n  onChange: (value: number) => void\r\n  step?: number\r\n  min?: number\r\n  max?: number\r\n  size?: number\r\n  style?: CSSProperties\r\n  className?: string\r\n}\r\n\r\nexport default function Slider({\r\n  value,\r\n  onChange,\r\n  min = 0,\r\n  step = 1,\r\n  max = 100,\r\n  size = 28,\r\n  style,\r\n  className,\r\n}: InputSliderProps) {\r\n  const changeCallback = useCallback(\r\n    (e: ChangeEvent<HTMLInputElement>) => {\r\n      onChange(parseInt(e.target.value))\r\n    },\r\n    [onChange],\r\n  )\r\n\r\n  return (\r\n    <StyledRangeInput\r\n      size={size}\r\n      type=\"range\"\r\n      value={value}\r\n      style={style ? style : { width: '90%', marginLeft: 15, marginRight: 15, padding: '15px 0' }}\r\n      onChange={changeCallback}\r\n      aria-labelledby=\"input slider\"\r\n      step={step}\r\n      min={min}\r\n      max={max}\r\n      className={className}\r\n    />\r\n  )\r\n}\r\n","import { BigNumber } from '@ethersproject/bignumber'\r\nimport { CurrencyAmount } from '@kyberswap/ks-sdk-core'\r\nimport { Position } from '@kyberswap/ks-sdk-elastic'\r\n\r\nimport { unwrappedToken } from 'utils/wrappedCurrency'\r\n\r\nimport { useProAmmTotalFeeOwedByPosition } from './useProAmmPreviousTicks'\r\n\r\nexport function useProAmmPositionFees(tokenId?: BigNumber, position?: Position, asWETH = false) {\r\n  const tokenIdHexString = tokenId?.toHexString()\r\n  const { current, last24h } = useProAmmTotalFeeOwedByPosition(position?.pool, tokenIdHexString)\r\n  if (position && current.length === 2) {\r\n    return {\r\n      current: [\r\n        CurrencyAmount.fromRawAmount(\r\n          !asWETH ? unwrappedToken(position?.pool.token0) : position?.pool.token0,\r\n          current[0],\r\n        ),\r\n        CurrencyAmount.fromRawAmount(\r\n          !asWETH ? unwrappedToken(position?.pool.token1) : position?.pool.token1,\r\n          current[1],\r\n        ),\r\n      ],\r\n\r\n      last24h: [\r\n        CurrencyAmount.fromRawAmount(\r\n          !asWETH ? unwrappedToken(position?.pool.token0) : position?.pool.token0,\r\n          last24h[0],\r\n        ),\r\n        CurrencyAmount.fromRawAmount(\r\n          !asWETH ? unwrappedToken(position?.pool.token1) : position?.pool.token1,\r\n          last24h[1],\r\n        ),\r\n      ],\r\n    }\r\n  } else return { current: [undefined, undefined], last24h: [undefined, undefined] }\r\n}\r\n","import { defaultAbiCoder } from '@ethersproject/abi'\r\nimport { getCreate2Address } from '@ethersproject/address'\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\nimport { keccak256 } from '@ethersproject/solidity'\r\nimport { useMemo } from 'react'\r\n\r\nimport { EVMNetworkInfo } from 'constants/networks/type'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { Result, useSingleCallResult, useSingleContractMultipleData } from 'state/multicall/hooks'\r\nimport { PositionDetails } from 'types/position'\r\n\r\nimport { useProAmmNFTPositionManagerContract } from './useContract'\r\n\r\n//           { \"internalType\": \"uint96\", \"name\": \"nonce\", \"type\": \"uint96\" },\r\n//           { \"internalType\": \"address\", \"name\": \"operator\", \"type\": \"address\" },\r\n//           { \"internalType\": \"uint80\", \"name\": \"poolId\", \"type\": \"uint80\" },\r\n//           { \"internalType\": \"int24\", \"name\": \"tickLower\", \"type\": \"int24\" },\r\n//           { \"internalType\": \"int24\", \"name\": \"tickUpper\", \"type\": \"int24\" },\r\n//           { \"internalType\": \"uint128\", \"name\": \"liquidity\", \"type\": \"uint128\" },\r\n//           { \"internalType\": \"uint256\", \"name\": \"rTokenOwed\", \"type\": \"uint256\" },\r\n//           { \"internalType\": \"uint256\", \"name\": \"feeGrowthInsideLast\", \"type\": \"uint256\" }\r\ninterface UseProAmmPositionsResults {\r\n  loading: boolean\r\n  positions: PositionDetails[] | undefined\r\n}\r\n\r\nexport function useProAmmPositionsFromTokenIds(tokenIds: BigNumber[] | undefined): UseProAmmPositionsResults {\r\n  const positionManager = useProAmmNFTPositionManagerContract()\r\n  const { isEVM, networkInfo } = useActiveWeb3React()\r\n\r\n  const inputs = useMemo(() => (tokenIds ? tokenIds.map(tokenId => [tokenId]) : []), [tokenIds])\r\n  const results = useSingleContractMultipleData(positionManager, 'positions', inputs)\r\n\r\n  const loading = useMemo(() => results.some(({ loading }) => loading), [results])\r\n  const error = useMemo(() => results.some(({ error }) => error), [results])\r\n\r\n  const positions = useMemo(() => {\r\n    if (!loading && !error && tokenIds && isEVM) {\r\n      return results.map((call, i) => {\r\n        const tokenId = tokenIds[i]\r\n        const result = call.result as Result\r\n\r\n        return {\r\n          tokenId: tokenId,\r\n          poolId: getCreate2Address(\r\n            (networkInfo as EVMNetworkInfo).elastic.coreFactory,\r\n            keccak256(\r\n              ['bytes'],\r\n              [\r\n                defaultAbiCoder.encode(\r\n                  ['address', 'address', 'uint24'],\r\n                  [result.info.token0, result.info.token1, result.info.fee],\r\n                ),\r\n              ],\r\n            ),\r\n            (networkInfo as EVMNetworkInfo).elastic.initCodeHash,\r\n          ),\r\n          feeGrowthInsideLast: result.pos.feeGrowthInsideLast,\r\n          nonce: result.pos.nonce,\r\n          liquidity: result.pos.liquidity,\r\n          operator: result.pos.operator,\r\n          tickLower: result.pos.tickLower,\r\n          tickUpper: result.pos.tickUpper,\r\n          rTokenOwed: result.pos.rTokenOwed,\r\n          fee: result.info.fee,\r\n          token0: result.info.token0,\r\n          token1: result.info.token1,\r\n        }\r\n      })\r\n    }\r\n    return undefined\r\n  }, [loading, error, results, tokenIds, networkInfo, isEVM])\r\n\r\n  return useMemo(() => {\r\n    return {\r\n      loading,\r\n      positions: positions?.map((position, i) => ({ ...position, tokenId: inputs[i][0] })),\r\n    }\r\n  }, [loading, positions, inputs])\r\n}\r\n\r\ninterface UseProAmmPositionResults {\r\n  loading: boolean\r\n  position: PositionDetails | undefined\r\n}\r\n\r\nexport function useProAmmPositionsFromTokenId(tokenId: BigNumber | undefined): UseProAmmPositionResults {\r\n  const position = useProAmmPositionsFromTokenIds(tokenId ? [tokenId] : undefined)\r\n  return {\r\n    loading: position.loading,\r\n    position: position.positions?.[0],\r\n  }\r\n}\r\n\r\nexport const useTokenIdsOwnedByAddress = (address: string): { loading: boolean; tokenIds: BigNumber[] } => {\r\n  const positionManager = useProAmmNFTPositionManagerContract()\r\n  const { loading: balanceLoading, result: balanceResult } = useSingleCallResult(positionManager, 'balanceOf', [\r\n    address ?? undefined,\r\n  ])\r\n\r\n  // we don't expect any account balance to ever exceed the bounds of max safe int\r\n  const accountBalance: number | undefined = balanceResult?.[0]?.toNumber()\r\n\r\n  const tokenIdsArgs = useMemo(() => {\r\n    if (accountBalance && address) {\r\n      const tokenRequests = []\r\n      for (let i = 0; i < accountBalance; i++) {\r\n        tokenRequests.push([address, i])\r\n      }\r\n      return tokenRequests\r\n    }\r\n    return []\r\n  }, [address, accountBalance])\r\n\r\n  const tokenIdResults = useSingleContractMultipleData(positionManager, 'tokenOfOwnerByIndex', tokenIdsArgs)\r\n\r\n  const someTokenIdsLoading = useMemo(() => tokenIdResults.some(({ loading }) => loading), [tokenIdResults])\r\n  const tokenIds = useMemo(() => {\r\n    if (address) {\r\n      return tokenIdResults\r\n        .map(({ result }) => result)\r\n        .filter((result): result is Result => !!result)\r\n        .map(result => BigNumber.from(result[0]))\r\n    }\r\n    return []\r\n  }, [address, tokenIdResults])\r\n\r\n  return {\r\n    loading: balanceLoading || someTokenIdsLoading,\r\n    tokenIds,\r\n  }\r\n}\r\n\r\nexport function useProAmmPositions(account: string | null | undefined): UseProAmmPositionsResults {\r\n  const positionManager = useProAmmNFTPositionManagerContract()\r\n  const { loading: balanceLoading, result: balanceResult } = useSingleCallResult(positionManager, 'balanceOf', [\r\n    account ?? undefined,\r\n  ])\r\n\r\n  // we don't expect any account balance to ever exceed the bounds of max safe int\r\n  const accountBalance: number | undefined = balanceResult?.[0]?.toNumber()\r\n\r\n  const tokenIdsArgs = useMemo(() => {\r\n    if (accountBalance && account) {\r\n      const tokenRequests = []\r\n      for (let i = 0; i < accountBalance; i++) {\r\n        tokenRequests.push([account, i])\r\n      }\r\n      return tokenRequests\r\n    }\r\n    return []\r\n  }, [account, accountBalance])\r\n\r\n  const tokenIdResults = useSingleContractMultipleData(positionManager, 'tokenOfOwnerByIndex', tokenIdsArgs)\r\n\r\n  const someTokenIdsLoading = useMemo(() => tokenIdResults.some(({ loading }) => loading), [tokenIdResults])\r\n  const tokenIds = useMemo(() => {\r\n    if (account) {\r\n      return tokenIdResults\r\n        .map(({ result }) => result)\r\n        .filter((result): result is Result => !!result)\r\n        .map(result => BigNumber.from(result[0]))\r\n    }\r\n    return []\r\n  }, [account, tokenIdResults])\r\n\r\n  const { positions, loading: positionsLoading } = useProAmmPositionsFromTokenIds(tokenIds)\r\n\r\n  return useMemo(() => {\r\n    return {\r\n      loading: someTokenIdsLoading || balanceLoading || positionsLoading,\r\n      positions,\r\n    }\r\n  }, [someTokenIdsLoading, balanceLoading, positionsLoading, positions])\r\n}\r\n","import styled from 'styled-components'\r\n\r\nimport { AutoColumn } from 'components/Column'\r\n\r\nexport const PageWrapper = styled.div`\r\n  padding: 28px 16px 100px;\r\n  width: 100%;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    padding: 24px 16px 100px;\r\n  }\r\n\r\n  @media only screen and (min-width: 1000px) {\r\n    padding: 24px 32px 100px;\r\n  }\r\n\r\n  @media only screen and (min-width: 1366px) {\r\n    padding: 24px 215px 50px;\r\n  }\r\n\r\n  @media only screen and (min-width: 1440px) {\r\n    padding: 24px 252px 50px;\r\n  }\r\n`\r\n\r\nexport const Container = styled.div`\r\n  max-width: 936px;\r\n  margin: 0 auto;\r\n  padding: 4px 20px 24px;\r\n  background: ${({ theme }) => theme.background};\r\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\r\n    0px 24px 32px rgba(0, 0, 0, 0.01);\r\n  border-radius: 8px;\r\n\r\n  @media only screen and (min-width: 1000px) {\r\n    padding: 4px 24px 24px;\r\n  }\r\n`\r\n\r\nexport const GridColumn = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    grid-template-columns: 1fr 1fr;\r\n  }\r\n`\r\n\r\nexport const TopBar = styled.div`\r\n  padding: 20px 0;\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n  align-items: center;\r\n  border-top: 1px solid ${({ theme }) => theme.border};\r\n  margin-top: 1rem;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    margin-top: 0;\r\n  }\r\n`\r\n\r\nexport const LiquidityProviderModeWrapper = styled.div`\r\n  width: 100%;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    padding-right: 24px;\r\n  }\r\n`\r\n\r\nexport const PoolName = styled.div`\r\n  display: flex;\r\n  margin-bottom: 24px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.subText};\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    justify-content: flex-end;\r\n    margin-bottom: 0;\r\n  }\r\n`\r\n\r\nexport const FirstColumn = styled(AutoColumn)`\r\n  grid-auto-rows: min-content;\r\n  padding-bottom: 24px;\r\n  border-bottom: 1px solid ${({ theme }) => theme.border};\r\n  gap: 20px;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    padding-right: 24px;\r\n    padding-bottom: 0;\r\n    border-right: 1px solid ${({ theme }) => theme.border};\r\n    border-bottom: none;\r\n  }\r\n`\r\n\r\nexport const SecondColumn = styled(AutoColumn)`\r\n  grid-auto-rows: min-content;\r\n  padding-top: 24px;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    padding-left: 24px;\r\n    padding-top: 0;\r\n  }\r\n`\r\n\r\nexport const MaxButton = styled.button`\r\n  flex: 1;\r\n  padding: 6px 0;\r\n  background-color: ${({ theme }) => `${theme.primary}33`};\r\n  border: 1px solid transparent;\r\n  border-radius: 999px;\r\n  font-size: 1rem;\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    padding: 0.25rem 0;\r\n  `};\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  margin: 0.25rem;\r\n  overflow: hidden;\r\n  color: ${({ theme }) => theme.primary};\r\n  :hover {\r\n    border: 1px solid ${({ theme }) => theme.primary};\r\n  }\r\n  :focus {\r\n    border: 1px solid ${({ theme }) => theme.primary};\r\n    outline: none;\r\n  }\r\n`\r\n\r\nexport const DetailWrapper = styled(AutoColumn)`\r\n  padding: 1rem 1rem 12px;\r\n  border: 1px solid ${({ theme }) => theme.border};\r\n  margin: 24px 0 28px;\r\n  border-radius: 20px;\r\n`\r\n\r\nexport const DetailBox = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n`\r\n\r\nexport const TokenWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n`\r\n\r\nexport const ModalDetailWrapper = styled.div`\r\n  border: 1px solid ${({ theme }) => theme.border};\r\n  border-radius: 20px;\r\n  padding: 1rem;\r\n  margin-bottom: 28px;\r\n`\r\n\r\nexport const CurrentPriceWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n`\r\n","import { Currency, CurrencyAmount, Percent, Token, TokenAmount } from '@kyberswap/ks-sdk-core'\r\nimport { Position } from '@kyberswap/ks-sdk-elastic'\r\nimport { Trans } from '@lingui/macro'\r\nimport { ReactNode, useCallback, useMemo } from 'react'\r\n\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { useToken } from 'hooks/Tokens'\r\nimport { usePool } from 'hooks/usePools'\r\nimport { useProAmmPositionFees } from 'hooks/useProAmmPositionFees'\r\nimport { AppState } from 'state'\r\nimport { useAppDispatch, useAppSelector } from 'state/hooks'\r\nimport { tryParseAmount } from 'state/swap/hooks'\r\nimport { PositionDetails } from 'types/position'\r\nimport { unwrappedToken } from 'utils/wrappedCurrency'\r\n\r\nimport { Field, typeInput } from './actions'\r\n\r\nexport function useBurnProAmmState(): AppState['burnProAmm'] {\r\n  return useAppSelector(state => state.burnProAmm)\r\n}\r\n\r\nexport function useDerivedProAmmBurnInfo(\r\n  position?: PositionDetails,\r\n  asWETH = false,\r\n): {\r\n  position?: Position\r\n  liquidityPercentage?: Percent\r\n  liquidityValue0?: CurrencyAmount<Currency>\r\n  liquidityValue1?: CurrencyAmount<Currency>\r\n  pooledAmount0?: CurrencyAmount<Currency>\r\n  pooledAmount1?: CurrencyAmount<Currency>\r\n  feeValue0?: CurrencyAmount<Currency>\r\n  feeValue1?: CurrencyAmount<Currency>\r\n  outOfRange: boolean\r\n  error?: ReactNode\r\n  parsedAmounts: {\r\n    [Field.LIQUIDITY_PERCENT]: Percent\r\n    [Field.CURRENCY_A]?: CurrencyAmount<Currency>\r\n    [Field.CURRENCY_B]?: CurrencyAmount<Currency>\r\n  }\r\n} {\r\n  const { account } = useActiveWeb3React()\r\n  const { independentField, typedValue } = useBurnProAmmState()\r\n\r\n  const token0 = useToken(position?.token0)\r\n  const token1 = useToken(position?.token1)\r\n  const tokens = {\r\n    [Field.CURRENCY_A]: token0,\r\n    [Field.CURRENCY_B]: token1,\r\n  }\r\n  const [, pool] = usePool(token0 ?? undefined, token1 ?? undefined, position?.fee)\r\n\r\n  const positionSDK = useMemo(\r\n    () =>\r\n      pool && position?.liquidity && typeof position?.tickLower === 'number' && typeof position?.tickUpper === 'number'\r\n        ? new Position({\r\n            pool,\r\n            liquidity: position.liquidity.toString(),\r\n            tickLower: position.tickLower,\r\n            tickUpper: position.tickUpper,\r\n          })\r\n        : undefined,\r\n    [pool, position],\r\n  )\r\n\r\n  const liquidityValues: {\r\n    [Field.CURRENCY_A]?: CurrencyAmount<Token>\r\n    [Field.CURRENCY_B]?: CurrencyAmount<Token>\r\n  } = {\r\n    [Field.CURRENCY_A]: positionSDK && positionSDK.amount0,\r\n    [Field.CURRENCY_B]: positionSDK && positionSDK.amount1,\r\n  }\r\n  let liquidityPercentage: Percent = new Percent('0', '100')\r\n  if (independentField === Field.LIQUIDITY_PERCENT) {\r\n    liquidityPercentage = new Percent(typedValue, '100')\r\n  }\r\n  // user specified a specific amount of token a or b\r\n  else {\r\n    if (!!tokens[independentField]) {\r\n      const independentAmount = tryParseAmount(typedValue, tokens[independentField] ?? undefined)\r\n      const liquidityValue = liquidityValues[independentField]\r\n      if (independentAmount && liquidityValue && !independentAmount.greaterThan(liquidityValue)) {\r\n        liquidityPercentage = new Percent(independentAmount.quotient, liquidityValue.quotient)\r\n      }\r\n    }\r\n  }\r\n\r\n  const discountedAmount0 = positionSDK\r\n    ? liquidityPercentage.multiply(positionSDK.amount0.quotient).quotient\r\n    : undefined\r\n  const discountedAmount1 = positionSDK\r\n    ? liquidityPercentage.multiply(positionSDK.amount1.quotient).quotient\r\n    : undefined\r\n\r\n  const liquidityValue0 =\r\n    token0 && discountedAmount0\r\n      ? CurrencyAmount.fromRawAmount(asWETH ? token0 : unwrappedToken(token0), discountedAmount0)\r\n      : undefined\r\n  const liquidityValue1 =\r\n    token1 && discountedAmount1\r\n      ? CurrencyAmount.fromRawAmount(asWETH ? token1 : unwrappedToken(token1), discountedAmount1)\r\n      : undefined\r\n\r\n  const outOfRange =\r\n    pool && position ? pool.tickCurrent < position.tickLower || pool.tickCurrent >= position.tickUpper : false\r\n  let error: ReactNode | undefined\r\n  if (!account) {\r\n    error = <Trans>Connect Wallet</Trans>\r\n  }\r\n  // if (percent === 0) {\r\n  //   error = error ?? <Trans>Enter a percent</Trans>\r\n  // }\r\n\r\n  const { current } = useProAmmPositionFees(\r\n    position?.tokenId,\r\n    pool && position\r\n      ? new Position({\r\n          pool: pool,\r\n          liquidity: position.liquidity.toString(),\r\n          tickLower: position.tickLower,\r\n          tickUpper: position.tickUpper,\r\n        })\r\n      : undefined,\r\n    asWETH,\r\n  )\r\n\r\n  const [feeValue0, feeValue1] = current\r\n\r\n  const parsedAmounts: {\r\n    [Field.LIQUIDITY_PERCENT]: Percent\r\n    [Field.CURRENCY_A]?: TokenAmount\r\n    [Field.CURRENCY_B]?: TokenAmount\r\n  } = {\r\n    [Field.LIQUIDITY_PERCENT]: liquidityPercentage,\r\n    [Field.CURRENCY_A]:\r\n      token0 && liquidityPercentage && liquidityPercentage.greaterThan('0') && liquidityValue0 && positionSDK\r\n        ? TokenAmount.fromRawAmount(token0.wrapped, liquidityPercentage.multiply(positionSDK.amount0.quotient).quotient)\r\n        : undefined,\r\n    [Field.CURRENCY_B]:\r\n      token1 && liquidityPercentage && liquidityPercentage.greaterThan('0') && liquidityValue1 && positionSDK\r\n        ? TokenAmount.fromRawAmount(token1.wrapped, liquidityPercentage.multiply(positionSDK.amount1.quotient).quotient)\r\n        : undefined,\r\n  }\r\n\r\n  return {\r\n    position: positionSDK,\r\n    pooledAmount0: liquidityValues[Field.CURRENCY_A],\r\n    pooledAmount1: liquidityValues[Field.CURRENCY_B],\r\n    liquidityPercentage,\r\n    liquidityValue0,\r\n    liquidityValue1,\r\n    feeValue0: feeValue0,\r\n    feeValue1: feeValue1,\r\n    outOfRange,\r\n    error,\r\n    parsedAmounts,\r\n  }\r\n}\r\nexport function useBurnProAmmActionHandlers(): {\r\n  onUserInput: (field: Field, typedValue: string) => void\r\n} {\r\n  const dispatch = useAppDispatch()\r\n\r\n  const onUserInput = useCallback(\r\n    (field: Field, typedValue: string) => {\r\n      dispatch(typeInput({ field, typedValue }))\r\n    },\r\n    [dispatch],\r\n  )\r\n\r\n  return {\r\n    onUserInput,\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nimport { AutoColumn } from 'components/Column'\r\n\r\nexport const Container = styled.div`\r\n  text-align: center;\r\n  width: calc(100% - 24px);\r\n  margin: 24px auto 12px;\r\n  max-width: 936px;\r\n  border-radius: 0.5rem;\r\n  background: ${({ theme }) => theme.background};\r\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\r\n    0px 24px 32px rgba(0, 0, 0, 0.01);\r\n\r\n  padding: 0 20px 28px;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    padding: 0 16px 24px;\r\n  `};\r\n`\r\n\r\nexport const GridColumn = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    grid-template-columns: 1fr 1fr;\r\n  }\r\n`\r\n\r\nexport const FirstColumn = styled(AutoColumn)`\r\n  grid-auto-rows: min-content;\r\n  padding-bottom: 24px;\r\n  border-bottom: 1px solid ${({ theme }) => theme.border};\r\n  gap: 20px;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    padding-right: 24px;\r\n    padding-bottom: 0;\r\n    border-right: 1px solid ${({ theme }) => theme.border};\r\n    border-bottom: none;\r\n  }\r\n`\r\n\r\nexport const SecondColumn = styled(AutoColumn)`\r\n  grid-auto-rows: min-content;\r\n  padding-top: 24px;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    padding-left: 24px;\r\n    padding-top: 0;\r\n  }\r\n`\r\n","import { BigNumber } from '@ethersproject/bignumber'\r\nimport { TransactionResponse } from '@ethersproject/providers'\r\nimport { ZERO } from '@kyberswap/ks-sdk-classic'\r\nimport { Currency, CurrencyAmount, Percent, WETH } from '@kyberswap/ks-sdk-core'\r\nimport { FeeAmount, NonfungiblePositionManager } from '@kyberswap/ks-sdk-elastic'\r\nimport { Trans, t } from '@lingui/macro'\r\nimport JSBI from 'jsbi'\r\nimport { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport { Redirect, RouteComponentProps } from 'react-router-dom'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport { ButtonConfirmed, ButtonPrimary } from 'components/Button'\r\nimport { BlackCard } from 'components/Card'\r\nimport { AutoColumn } from 'components/Column'\r\nimport Copy from 'components/Copy'\r\nimport CurrencyInputPanel from 'components/CurrencyInputPanel'\r\nimport Divider from 'components/Divider'\r\nimport Loader from 'components/Loader'\r\nimport { AddRemoveTabs, LiquidityAction } from 'components/NavigationTabs'\r\nimport ProAmmFee from 'components/ProAmm/ProAmmFee'\r\nimport ProAmmPoolInfo from 'components/ProAmm/ProAmmPoolInfo'\r\nimport ProAmmPooledTokens from 'components/ProAmm/ProAmmPooledTokens'\r\nimport Slider from 'components/Slider'\r\nimport TransactionConfirmationModal, { ConfirmationModalContent } from 'components/TransactionConfirmationModal'\r\nimport { TutorialType } from 'components/Tutorial'\r\nimport { VERSION } from 'constants/v2'\r\nimport { useActiveWeb3React, useWeb3React } from 'hooks'\r\nimport { useProAmmNFTPositionManagerContract } from 'hooks/useContract'\r\nimport usePrevious from 'hooks/usePrevious'\r\nimport useProAmmPoolInfo from 'hooks/useProAmmPoolInfo'\r\nimport { useProAmmPositionsFromTokenId } from 'hooks/useProAmmPositions'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useTransactionDeadline from 'hooks/useTransactionDeadline'\r\nimport { MaxButton as MaxBtn } from 'pages/RemoveLiquidity/styled'\r\nimport { useTokensPrice, useWalletModalToggle } from 'state/application/hooks'\r\nimport { Field } from 'state/burn/proamm/actions'\r\nimport { useBurnProAmmActionHandlers, useBurnProAmmState, useDerivedProAmmBurnInfo } from 'state/burn/proamm/hooks'\r\nimport { useSingleCallResult } from 'state/multicall/hooks'\r\nimport { useTransactionAdder } from 'state/transactions/hooks'\r\nimport { TRANSACTION_TYPE } from 'state/transactions/type'\r\nimport { useUserSlippageTolerance } from 'state/user/hooks'\r\nimport { basisPointsToPercent, calculateGasMargin, formattedNum, shortenAddress } from 'utils'\r\nimport useDebouncedChangeHandler from 'utils/useDebouncedChangeHandler'\r\nimport { unwrappedToken } from 'utils/wrappedCurrency'\r\n\r\nimport { Container, FirstColumn, GridColumn, SecondColumn } from './styled'\r\n\r\nconst MaxButton = styled(MaxBtn)`\r\n  margin: 0;\r\n  flex: unset;\r\n  padding: 0.375rem 0.75rem;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  height: max-content;\r\n  width: max-content;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToSmall`\r\n    padding: 0.375rem 0.75rem;\r\n    font-size: 0.875rem;\r\n  `}\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\r\n    padding: 0.25rem 0.5rem;\r\n    font-size: 0.75rem;\r\n    flex: 1;\r\n  `}\r\n`\r\n\r\nconst MaxButtonGroup = styled(Flex)`\r\n  gap: 0.5rem;\r\n  justify-content: flex-end;\r\n  flex: 1;\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\r\n    gap: 0.25rem\r\n  `}\r\n`\r\n\r\nconst PercentText = styled(Text)`\r\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\r\n    font-size: 28px !important;\r\n    min-width: 72px !important;\r\n  `}\r\n`\r\n\r\nexport default function RemoveLiquidityProAmm({\r\n  location,\r\n  match: {\r\n    params: { tokenId },\r\n  },\r\n}: RouteComponentProps<{ tokenId: string }>) {\r\n  const parsedTokenId = useMemo(() => {\r\n    try {\r\n      return BigNumber.from(tokenId)\r\n    } catch {\r\n      return null\r\n    }\r\n  }, [tokenId])\r\n\r\n  if (parsedTokenId === null || parsedTokenId.eq(0)) {\r\n    return <Redirect to={{ ...location, pathname: '/myPools' }} />\r\n  }\r\n  return <Remove tokenId={parsedTokenId} />\r\n}\r\n\r\nfunction Remove({ tokenId }: { tokenId: BigNumber }) {\r\n  const { position } = useProAmmPositionsFromTokenId(tokenId)\r\n  const positionManager = useProAmmNFTPositionManagerContract()\r\n  const theme = useTheme()\r\n  const { account, chainId, isEVM } = useActiveWeb3React()\r\n  const { library } = useWeb3React()\r\n  const toggleWalletModal = useWalletModalToggle()\r\n\r\n  const owner = useSingleCallResult(!!tokenId ? positionManager : null, 'ownerOf', [tokenId.toNumber()]).result?.[0]\r\n  const ownsNFT = owner === account\r\n  const history = useHistory()\r\n  const prevChainId = usePrevious(chainId)\r\n\r\n  useEffect(() => {\r\n    if (!!chainId && !!prevChainId && chainId !== prevChainId) {\r\n      history.push('/myPools')\r\n    }\r\n  }, [chainId, prevChainId, history])\r\n  // flag for receiving WETH\r\n  const [receiveWETH, setReceiveWETH] = useState(false)\r\n\r\n  // burn state\r\n  const { independentField, typedValue } = useBurnProAmmState()\r\n  const {\r\n    position: positionSDK,\r\n    liquidityPercentage,\r\n    liquidityValue0,\r\n    liquidityValue1,\r\n    pooledAmount0,\r\n    pooledAmount1,\r\n    feeValue0,\r\n    feeValue1,\r\n    // outOfRange,\r\n    error,\r\n    parsedAmounts,\r\n  } = useDerivedProAmmBurnInfo(position, receiveWETH)\r\n  const currency0IsETHER = !!(chainId && liquidityValue0?.currency.isNative)\r\n  const currency0IsWETH = !!(chainId && liquidityValue0?.currency.equals(WETH[chainId]))\r\n  const currency1IsETHER = !!(chainId && liquidityValue1?.currency.isNative)\r\n  const currency1IsWETH = !!(chainId && liquidityValue1?.currency.equals(WETH[chainId]))\r\n  const { onUserInput } = useBurnProAmmActionHandlers()\r\n  const removed = position?.liquidity?.eq(0)\r\n  const poolAddress = useProAmmPoolInfo(\r\n    positionSDK?.pool?.token0,\r\n    positionSDK?.pool?.token1,\r\n    positionSDK?.pool?.fee as FeeAmount,\r\n  )\r\n  const token0Shown = positionSDK && unwrappedToken(positionSDK.pool.token0)\r\n  const token1Shown = positionSDK && unwrappedToken(positionSDK.pool.token1)\r\n  // boilerplate for the slider\r\n  const liquidityPercentChangeCallback = useCallback(\r\n    (value: number) => {\r\n      onUserInput(Field.LIQUIDITY_PERCENT, value.toString())\r\n    },\r\n    [onUserInput],\r\n  )\r\n\r\n  const [percentForSlider, onPercentSelectForSlider] = useDebouncedChangeHandler(\r\n    Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),\r\n    liquidityPercentChangeCallback,\r\n  )\r\n  const formattedAmounts = {\r\n    [Field.LIQUIDITY_PERCENT]: parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')\r\n      ? '0'\r\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1', '100'))\r\n      ? '<1'\r\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0),\r\n    [Field.CURRENCY_A]:\r\n      independentField === Field.CURRENCY_A ? typedValue : parsedAmounts[Field.CURRENCY_A]?.toSignificant(6) ?? '',\r\n    [Field.CURRENCY_B]:\r\n      independentField === Field.CURRENCY_B ? typedValue : parsedAmounts[Field.CURRENCY_B]?.toSignificant(6) ?? '',\r\n  }\r\n  const usdPrices = useTokensPrice(\r\n    [liquidityValue0?.currency.wrapped, liquidityValue1?.currency.wrapped],\r\n    VERSION.ELASTIC,\r\n  )\r\n\r\n  const totalFeeRewardUSD =\r\n    parseFloat(feeValue0?.toExact() || '0') * usdPrices[0] + parseFloat(feeValue1?.toExact() || '0') * usdPrices[1]\r\n\r\n  const estimatedUsdCurrencyA =\r\n    parsedAmounts[Field.CURRENCY_A] && usdPrices[0]\r\n      ? parseFloat((parsedAmounts[Field.CURRENCY_A] as CurrencyAmount<Currency>).toSignificant(6)) * usdPrices[0]\r\n      : 0\r\n\r\n  const estimatedUsdCurrencyB =\r\n    parsedAmounts[Field.CURRENCY_B] && usdPrices[1]\r\n      ? parseFloat((parsedAmounts[Field.CURRENCY_B] as CurrencyAmount<Currency>).toSignificant(6)) * usdPrices[1]\r\n      : 0\r\n\r\n  const deadline = useTransactionDeadline() // custom from users settings\r\n  const allowedSlippage = useUserSlippageTolerance()\r\n  const [showConfirm, setShowConfirm] = useState(false)\r\n  const [attemptingTxn, setAttemptingTxn] = useState(false)\r\n  const [txnHash, setTxnHash] = useState<string | undefined>()\r\n  const addTransactionWithType = useTransactionAdder()\r\n\r\n  const burn = useCallback(async () => {\r\n    setAttemptingTxn(true)\r\n    if (\r\n      !positionManager ||\r\n      !liquidityValue0 ||\r\n      !liquidityValue1 ||\r\n      !deadline ||\r\n      !account ||\r\n      !chainId ||\r\n      !feeValue0 ||\r\n      !feeValue1 ||\r\n      !positionSDK ||\r\n      !liquidityPercentage ||\r\n      !library\r\n    ) {\r\n      setAttemptingTxn(false)\r\n      return\r\n    }\r\n    // const partialPosition = new Position({\r\n    //   pool: positionSDK.pool,\r\n    //   liquidity: liquidityPercentage.multiply(positionSDK.liquidity).quotient,\r\n    //   tickLower: positionSDK.tickLower,\r\n    //   tickUpper: positionSDK.tickUpper,\r\n    // })\r\n    const { calldata, value } = NonfungiblePositionManager.removeCallParameters(positionSDK, {\r\n      tokenId: tokenId.toString(),\r\n      liquidityPercentage,\r\n      slippageTolerance: basisPointsToPercent(allowedSlippage[0]),\r\n      deadline: deadline.toString(),\r\n      collectOptions: {\r\n        expectedCurrencyOwed0: feeValue0,\r\n        expectedCurrencyOwed1: feeValue1,\r\n        recipient: account,\r\n        deadline: deadline.toString(),\r\n        isRemovingLiquid: true,\r\n        havingFee: !(feeValue0.equalTo(JSBI.BigInt('0')) && feeValue1.equalTo(JSBI.BigInt('0'))),\r\n      },\r\n    })\r\n    const txn = {\r\n      to: positionManager.address,\r\n      data: calldata,\r\n      value,\r\n    }\r\n    library\r\n      .getSigner()\r\n      .estimateGas(txn)\r\n      .then((estimate: BigNumber) => {\r\n        const newTxn = {\r\n          ...txn,\r\n          gasLimit: calculateGasMargin(estimate),\r\n        }\r\n        return library\r\n          .getSigner()\r\n          .sendTransaction(newTxn)\r\n          .then((response: TransactionResponse) => {\r\n            setAttemptingTxn(false)\r\n\r\n            addTransactionWithType({\r\n              hash: response.hash,\r\n              type: TRANSACTION_TYPE.ELASTIC_REMOVE_LIQUIDITY,\r\n              summary:\r\n                liquidityValue0?.toSignificant(6) +\r\n                ' ' +\r\n                liquidityValue0?.currency.symbol +\r\n                ' and ' +\r\n                liquidityValue1?.toSignificant(6) +\r\n                ' ' +\r\n                liquidityValue1?.currency.symbol,\r\n              arbitrary: {\r\n                poolAddress: poolAddress,\r\n                token_1: token0Shown?.symbol,\r\n                token_2: token1Shown?.symbol,\r\n              },\r\n            })\r\n            setTxnHash(response.hash)\r\n          })\r\n      })\r\n      .catch((error: any) => {\r\n        setAttemptingTxn(false)\r\n        console.error(error)\r\n        // const newTxn = {\r\n        //   ...txn,\r\n        //   gasLimit: '0x0827f6'\r\n        // }\r\n        // return library\r\n        //   .getSigner()\r\n        //   .sendTransaction(newTxn)\r\n        //   .then((response: TransactionResponse) => {\r\n        //     setAttemptingTxn(false)\r\n\r\n        //     addTransactionWithType({hash: response.hash,\r\n        //       type: TRANSACTION_TYPE.REMOVE_LIQUIDITY,\r\n        //       summary:\r\n        //         liquidityValue0?.toSignificant(6) +\r\n        //         ' ' +\r\n        //         liquidityValue0?.currency.symbol +\r\n        //         ' and ' +\r\n        //         liquidityValue1?.toSignificant(6) +\r\n        //         ' ' +\r\n        //         liquidityValue1?.currency.symbol\r\n        //     })\r\n        //     setTxnHash(response.hash)\r\n        //   })\r\n      })\r\n  }, [\r\n    positionManager,\r\n    liquidityValue0,\r\n    liquidityValue1,\r\n    deadline,\r\n    account,\r\n    chainId,\r\n    feeValue0,\r\n    feeValue1,\r\n    positionSDK,\r\n    liquidityPercentage,\r\n    library,\r\n    tokenId,\r\n    allowedSlippage,\r\n    addTransactionWithType,\r\n    poolAddress,\r\n    token0Shown,\r\n    token1Shown,\r\n  ])\r\n  const handleDismissConfirmation = useCallback(() => {\r\n    setShowConfirm(false)\r\n    // if there was a tx hash, we want to clear the input\r\n    if (txnHash) {\r\n      onUserInput(Field.LIQUIDITY_PERCENT, '0')\r\n    }\r\n    setAttemptingTxn(false)\r\n    setTxnHash('')\r\n  }, [onUserInput, txnHash])\r\n\r\n  const pendingText = (\r\n    <Trans>\r\n      Removing {liquidityValue0?.toSignificant(6)} {liquidityValue0?.currency?.symbol} and{' '}\r\n      {liquidityValue1?.toSignificant(6)} {liquidityValue1?.currency?.symbol}\r\n      {feeValue0?.greaterThan(ZERO) || feeValue1?.greaterThan(ZERO) ? <br /> : ''}\r\n      {feeValue0?.greaterThan(ZERO) || feeValue1?.greaterThan(ZERO)\r\n        ? `Collecting fee of ${feeValue0?.toSignificant(6)} ${\r\n            feeValue0?.currency?.symbol\r\n          } and ${feeValue1?.toSignificant(6)} ${feeValue1?.currency?.symbol}`\r\n        : ''}\r\n    </Trans>\r\n  )\r\n\r\n  function modalFooter() {\r\n    return (\r\n      <ButtonPrimary mt=\"16px\" onClick={burn}>\r\n        <Trans>Remove</Trans>\r\n      </ButtonPrimary>\r\n    )\r\n  }\r\n  const onCurrencyAInput = useCallback(\r\n    (typedValue: string): void => onUserInput(Field.CURRENCY_A, typedValue),\r\n    [onUserInput],\r\n  )\r\n  const onCurrencyBInput = useCallback(\r\n    (typedValue: string): void => onUserInput(Field.CURRENCY_B, typedValue),\r\n    [onUserInput],\r\n  )\r\n\r\n  if (!isEVM) return <Redirect to=\"/\" />\r\n  return (\r\n    <>\r\n      <TransactionConfirmationModal\r\n        isOpen={showConfirm}\r\n        onDismiss={handleDismissConfirmation}\r\n        attemptingTxn={attemptingTxn}\r\n        hash={txnHash}\r\n        content={() => (\r\n          <ConfirmationModalContent\r\n            title={t`Remove Liquidity`}\r\n            onDismiss={handleDismissConfirmation}\r\n            topContent={() => (\r\n              <>\r\n                <ProAmmPooledTokens\r\n                  liquidityValue0={liquidityValue0}\r\n                  liquidityValue1={liquidityValue1}\r\n                  title={t`Remove Amount`}\r\n                />\r\n                {positionSDK ? (\r\n                  <ProAmmFee\r\n                    totalFeeRewardUSD={totalFeeRewardUSD}\r\n                    feeValue0={feeValue0}\r\n                    feeValue1={feeValue1}\r\n                    position={positionSDK}\r\n                    tokenId={tokenId}\r\n                  />\r\n                ) : (\r\n                  <Loader />\r\n                )}\r\n              </>\r\n            )}\r\n            bottomContent={modalFooter}\r\n          />\r\n        )}\r\n        pendingText={pendingText}\r\n      />\r\n      <Container>\r\n        <AddRemoveTabs\r\n          action={LiquidityAction.REMOVE}\r\n          hideShare\r\n          tooltip={t`You can remove your liquidity here. When you remove liquidity (even partially), you will receive 100% of your fee earnings`}\r\n          tutorialType={TutorialType.ELASTIC_REMOVE_LIQUIDITY}\r\n        />\r\n        {owner && account && !ownsNFT ? (\r\n          <Text\r\n            fontSize=\"12px\"\r\n            fontWeight=\"500\"\r\n            paddingTop={'10px'}\r\n            paddingBottom={'10px'}\r\n            backgroundColor={theme.bg3Opacity4}\r\n            color={theme.subText}\r\n            style={{ borderRadius: '4px', marginBottom: '1.25rem' }}\r\n          >\r\n            The owner of this liquidity position is {shortenAddress(chainId, owner)}\r\n            <span style={{ display: 'inline-block' }}>\r\n              <Copy toCopy={owner}></Copy>\r\n            </span>\r\n          </Text>\r\n        ) : (\r\n          <Divider style={{ marginBottom: '1.25rem' }} />\r\n        )}\r\n        {position ? (\r\n          <AutoColumn gap=\"md\" style={{ textAlign: 'left' }}>\r\n            {positionSDK ? <ProAmmPoolInfo position={positionSDK} tokenId={tokenId.toString()} /> : <Loader />}\r\n            <GridColumn>\r\n              <FirstColumn>\r\n                <ProAmmPooledTokens pooled liquidityValue0={pooledAmount0} liquidityValue1={pooledAmount1} />\r\n                {positionSDK ? (\r\n                  <ProAmmFee\r\n                    totalFeeRewardUSD={totalFeeRewardUSD}\r\n                    position={positionSDK}\r\n                    tokenId={tokenId}\r\n                    text={t`When you remove liquidity (even partially), you will receive 100% of your fee earnings`}\r\n                    feeValue0={feeValue0}\r\n                    feeValue1={feeValue1}\r\n                  />\r\n                ) : (\r\n                  <Loader />\r\n                )}\r\n              </FirstColumn>\r\n              <SecondColumn>\r\n                <>\r\n                  <BlackCard padding=\"1rem\" marginTop=\"1rem\">\r\n                    <Text fontSize={12} color={theme.subText} fontWeight=\"500\">\r\n                      <Trans>Amount to remove</Trans>\r\n                    </Text>\r\n\r\n                    <Flex marginTop=\"0.5rem\" sx={{ gap: '1rem' }} alignItems=\"center\">\r\n                      <PercentText fontSize={36} fontWeight=\"500\">\r\n                        {percentForSlider}%\r\n                      </PercentText>\r\n\r\n                      <MaxButtonGroup>\r\n                        <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '25')}>\r\n                          <Trans>25%</Trans>\r\n                        </MaxButton>\r\n                        <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '50')}>\r\n                          <Trans>50%</Trans>\r\n                        </MaxButton>\r\n                        <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '75')}>\r\n                          <Trans>75%</Trans>\r\n                        </MaxButton>\r\n                        <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}>\r\n                          <Trans>Max</Trans>\r\n                        </MaxButton>\r\n                      </MaxButtonGroup>\r\n                    </Flex>\r\n\r\n                    <Slider\r\n                      value={percentForSlider}\r\n                      onChange={onPercentSelectForSlider}\r\n                      size={16}\r\n                      style={{ width: '100%', margin: '1rem 0 0', padding: '0.75rem 0' }}\r\n                    />\r\n                  </BlackCard>\r\n                  <div style={{ marginTop: '1.5rem', marginBottom: '1.5rem' }}>\r\n                    <CurrencyInputPanel\r\n                      value={formattedAmounts[Field.CURRENCY_A]}\r\n                      onUserInput={onCurrencyAInput}\r\n                      onMax={null}\r\n                      onHalf={null}\r\n                      currency={liquidityValue0?.currency}\r\n                      onCurrencySelect={() => null}\r\n                      id=\"remove-liquidity-tokena\"\r\n                      estimatedUsd={formattedNum(estimatedUsdCurrencyA.toString(), true) || undefined}\r\n                      disableCurrencySelect={!currency0IsETHER && !currency0IsWETH}\r\n                      isSwitchMode={currency0IsETHER || currency0IsWETH}\r\n                      onSwitchCurrency={() => setReceiveWETH(prev => !prev)}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <CurrencyInputPanel\r\n                      value={formattedAmounts[Field.CURRENCY_B]}\r\n                      onUserInput={onCurrencyBInput}\r\n                      onMax={null}\r\n                      onHalf={null}\r\n                      currency={liquidityValue1?.currency}\r\n                      onCurrencySelect={() => null}\r\n                      id=\"remove-liquidity-tokenb\"\r\n                      estimatedUsd={formattedNum(estimatedUsdCurrencyB.toString(), true) || undefined}\r\n                      disableCurrencySelect={!currency1IsETHER && !currency1IsWETH}\r\n                      isSwitchMode={currency1IsETHER || currency1IsWETH}\r\n                      onSwitchCurrency={() => setReceiveWETH(prev => !prev)}\r\n                    />\r\n                  </div>\r\n                  <ButtonConfirmed\r\n                    style={{ marginTop: '28px' }}\r\n                    confirmed={false}\r\n                    disabled={\r\n                      removed ||\r\n                      liquidityPercentage?.equalTo(new Percent(0, 100)) ||\r\n                      !liquidityValue0 ||\r\n                      (!!owner && !!account && !ownsNFT)\r\n                    }\r\n                    onClick={() => {\r\n                      if (!account) {\r\n                        toggleWalletModal()\r\n                      } else setShowConfirm(true)\r\n                    }}\r\n                  >\r\n                    {removed ? <Trans>Closed</Trans> : error ?? <Trans>Preview</Trans>}\r\n                  </ButtonConfirmed>\r\n                </>\r\n              </SecondColumn>\r\n            </GridColumn>\r\n          </AutoColumn>\r\n        ) : (\r\n          <Loader />\r\n        )}\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n","import { useCallback, useEffect, useRef, useState } from 'react'\r\n\r\n/**\r\n * Easy way to debounce the handling of a rapidly changing value, e.g. a changing slider input\r\n * @param value value that is rapidly changing\r\n * @param onChange change handler that should receive the debounced updates to the value\r\n * @param debouncedMs how long we should wait for changes to be applied\r\n */\r\nexport default function useDebouncedChangeHandler<T>(\r\n  value: T,\r\n  onChange: (newValue: T) => void,\r\n  debouncedMs = 100,\r\n): [T, (value: T) => void] {\r\n  const [inner, setInner] = useState<T>(() => value)\r\n  const timer = useRef<ReturnType<typeof setTimeout>>()\r\n\r\n  const onChangeInner = useCallback(\r\n    (newValue: T) => {\r\n      setInner(newValue)\r\n      if (timer.current) {\r\n        clearTimeout(timer.current)\r\n      }\r\n      timer.current = setTimeout(() => {\r\n        onChange(newValue)\r\n        timer.current = undefined\r\n      }, debouncedMs)\r\n    },\r\n    [debouncedMs, onChange],\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (timer.current) {\r\n      clearTimeout(timer.current)\r\n      timer.current = undefined\r\n    }\r\n    setInner(value)\r\n  }, [value])\r\n\r\n  return [inner, onChangeInner]\r\n}\r\n"],"sourceRoot":""}