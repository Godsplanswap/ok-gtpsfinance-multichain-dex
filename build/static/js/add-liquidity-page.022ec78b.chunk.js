(this["webpackJsonp@kyberswap/interface"]=this["webpackJsonp@kyberswap/interface"]||[]).push([[8],{"./src/components/LiquidityProviderMode/index.tsx":function(e,t,i){"use strict";var n=i("./node_modules/@lingui/react/esm/index.js"),o=i("./node_modules/styled-components/dist/styled-components.browser.esm.js"),s=i("./src/components/InfoHelper/index.tsx"),a=i("./src/components/PoolList/styled.tsx"),d=i("./src/hooks/useTheme.ts"),r=i("./node_modules/react/jsx-runtime.js"),c=Object(o.default)(a.t).withConfig({displayName:"LiquidityProviderMode__Tab",componentId:"sc-ojkkge-0"})(["padding:8px;"]);t.a=e=>{var t=e.activeTab,i=e.setActiveTab,o=e.singleTokenInfo,l=Object(d.a)();return Object(r.jsxs)(a.s,{style:{padding:"4px"},children:[Object(r.jsx)(c,{active:0===t,onClick:()=>i(0),role:"button",children:Object(r.jsx)(n.b,{id:"Token Pair"})}),Object(r.jsxs)(c,{active:1===t,onClick:()=>i(1),role:"button",children:[Object(r.jsx)(n.b,{id:"Single Token"}),Object(r.jsx)(s.a,{text:o,size:12,isActive:1===t,color:1===t?l.text:l.subText})]})]})}},"./src/components/PoolList/styled.tsx":function(e,t,i){"use strict";i.d(t,"o",(function(){return c})),i.d(t,"n",(function(){return l})),i.d(t,"u",(function(){return u})),i.d(t,"h",(function(){return b})),i.d(t,"e",(function(){return p})),i.d(t,"p",(function(){return j})),i.d(t,"b",(function(){return m})),i.d(t,"c",(function(){return x})),i.d(t,"v",(function(){return v})),i.d(t,"A",(function(){return h})),i.d(t,"z",(function(){return g})),i.d(t,"w",(function(){return O})),i.d(t,"a",(function(){return f})),i.d(t,"y",(function(){return y})),i.d(t,"x",(function(){return C})),i.d(t,"g",(function(){return _})),i.d(t,"f",(function(){return w})),i.d(t,"r",(function(){return R})),i.d(t,"k",(function(){return k})),i.d(t,"l",(function(){return I})),i.d(t,"j",(function(){return N})),i.d(t,"B",(function(){return S})),i.d(t,"C",(function(){return A})),i.d(t,"q",(function(){return E})),i.d(t,"D",(function(){return T})),i.d(t,"E",(function(){return P})),i.d(t,"s",(function(){return B})),i.d(t,"t",(function(){return U})),i.d(t,"m",(function(){return Y})),i.d(t,"d",(function(){return q})),i.d(t,"i",(function(){return D}));var n,o,s=i("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),a=i("./node_modules/polished/dist/polished.esm.js"),d=i("./node_modules/rebass/dist/index.esm.js"),r=i("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=r.default.div.withConfig({displayName:"styled__ListItemGroupContainer",componentId:"sc-w652p9-0"})(["border-bottom:",";cursor:",";background-color:",";&:hover{",";}"],(e=>{var t=e.theme;return"1px solid ".concat(t.border)}),(e=>e.isDisableShowTwoPools?"default":"pointer"),(e=>{var t=e.theme;return e.isShowExpandedPools?Object(a.d)(t.tableHeader,.6):t.background}),(e=>{var t=e.theme,i=e.isDisableShowTwoPools,n=e.isShowExpandedPools;return!i&&!n&&"background-color: ".concat(t.tableHeader)})),l=r.default.div.withConfig({displayName:"styled__ItemCardGroupContainer",componentId:"sc-w652p9-1"})(["display:flex;flex-direction:column;gap:20px;margin-bottom:28px;"]),u=r.default.div.withConfig({displayName:"styled__TableRow",componentId:"sc-w652p9-2"})(["display:grid;grid-gap:1.5rem;grid-template-columns:1.5fr 1.5fr 2fr 0.75fr 1fr 1fr 1fr 1.5fr;padding:24px 16px;font-size:14px;align-items:center;height:fit-content;position:relative;&:after{content:'';position:absolute;bottom:0;right:0;width:86.36%;border-bottom:",";}"],(e=>{var t=e.theme;return e.isShowBorderBottom?"1px solid ".concat(Object(a.d)(t.border,.5)):"none"})),b=Object(r.default)(d.b).withConfig({displayName:"styled__DataText",componentId:"sc-w652p9-3"})(["color:",";flex-direction:column;"],(e=>e.theme.text7)),p=Object(r.default)(d.b).withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-w652p9-4"})(["justify-content:flex-end;gap:4px;align-items:center;"]),j=Object(r.default)(d.b).withConfig({displayName:"styled__PoolAddressContainer",componentId:"sc-w652p9-5"})(["align-items:center;"]),m=r.default.div.withConfig({displayName:"styled__AddressAndAMPContainer",componentId:"sc-w652p9-6"})(["display:flex;flex-direction:column;gap:8px;"]),x=r.default.div.withConfig({displayName:"styled__AddressWrapper",componentId:"sc-w652p9-7"})(["display:flex;align-items:baseline;"]),v=r.default.div.withConfig({displayName:"styled__TextAMP",componentId:"sc-w652p9-8"})(["font-size:12px;color:",";"],(e=>e.theme.subText)),h=r.default.div.withConfig({displayName:"styled__TokenPairContainer",componentId:"sc-w652p9-9"})(["display:flex;flex-direction:column;gap:8px;"]),g=r.default.div.withConfig({displayName:"styled__TextTokenPair",componentId:"sc-w652p9-10"})([""]),O=r.default.div.withConfig({displayName:"styled__TextAMPLiquidity",componentId:"sc-w652p9-11"})([""]),f=r.default.div.withConfig({displayName:"styled__AMPLiquidityAndTVLContainer",componentId:"sc-w652p9-12"})(["display:flex;flex-direction:column;align-items:flex-end;gap:8px;"]),y=r.default.div.withConfig({displayName:"styled__TextTVL",componentId:"sc-w652p9-13"})(["font-size:12px;color:",";"],(e=>e.theme.subText)),C=r.default.div.withConfig({displayName:"styled__TextShowMorePools",componentId:"sc-w652p9-14"})(["cursor:pointer;font-size:12px;color:",";grid-column:2 / -1;display:flex;align-items:center;justify-content:center;padding:24px;"," &:hover{","}",""],(e=>e.theme.primary),(e=>e.disabled?"opacity: 0.5;":""),(e=>e.disabled?"":"opacity: 0.7;"),(e=>e.theme.mediaWidth.upToMedium(n||(n=Object(s.a)(["\n    padding: 0;\n  "]))))),_=r.default.div.withConfig({displayName:"styled__DashedDivider",componentId:"sc-w652p9-15"})(["",""],(e=>{var t=e.theme;return"\n    border-bottom: 1px dashed ".concat(t.bg14,";\n  ")})),w=r.default.div.withConfig({displayName:"styled__ChevronContainer",componentId:"sc-w652p9-16"})(["margin-left:8px;"]),R=r.default.div.withConfig({displayName:"styled__StyledItemCard",componentId:"sc-w652p9-17"})(["border-radius:20px;display:flex;flex-direction:column;gap:20px;position:relative;min-width:392px;background:",";padding:20px;overflow:hidden;",""],(e=>e.theme.background),(e=>e.theme.mediaWidth.upToMedium(o||(o=Object(s.a)(["\n    min-width: revert;\n    padding: 16px;\n  "]))))),k=r.default.div.withConfig({displayName:"styled__HeaderContainer",componentId:"sc-w652p9-18"})(["display:grid;grid-template-rows:auto auto;grid-template-columns:1fr auto;gap:4px;"]),I=r.default.div.withConfig({displayName:"styled__HeaderTitle",componentId:"sc-w652p9-19"})(["font-size:20px;font-weight:500;color:",";grid-column:1 / 1;grid-row:1 / 1;line-height:24px;"],(e=>e.theme.text)),N=r.default.div.withConfig({displayName:"styled__HeaderAMPAndAddress",componentId:"sc-w652p9-20"})(["display:flex;gap:4px;font-size:12px;font-weight:500;color:",";grid-column:1 / 1;grid-row:2 / 2;line-height:16px;"],(e=>e.theme.subText)),S=r.default.div.withConfig({displayName:"styled__TokenRatioContainer",componentId:"sc-w652p9-21"})(["background:",";position:relative;overflow:hidden;padding:4px;border-radius:999px;"],(e=>e.theme.tabBackgound)),A=r.default.div.withConfig({displayName:"styled__TokenRatioGrid",componentId:"sc-w652p9-22"})(["padding:4px;display:grid;grid-template-columns:auto 1fr 1fr auto;grid-template-rows:1fr;gap:8px;isolation:isolate;"]),E=r.default.div.withConfig({displayName:"styled__Progress",componentId:"sc-w652p9-23"})(["position:absolute;top:4px;left:4px;bottom:4px;width:",";background:",";border-top-left-radius:999px;border-bottom-left-radius:999px;"],(e=>e.value+"%"),(e=>e.theme.tabActive)),T=r.default.div.withConfig({displayName:"styled__TokenRatioName",componentId:"sc-w652p9-24"})(["font-size:14px;font-weight:500;"]),P=r.default.div.withConfig({displayName:"styled__TokenRatioPercent",componentId:"sc-w652p9-25"})(["font-size:12px;font-weight:500;color:",";"],(e=>e.theme.subText)),B=r.default.div.withConfig({displayName:"styled__TabContainer",componentId:"sc-w652p9-26"})(["width:100%;background:",";border-radius:20px;display:flex;padding:2px;cursor:pointer;"],(e=>e.theme.tabBackgound)),U=r.default.div.withConfig({displayName:"styled__TabItem",componentId:"sc-w652p9-27"})(["font-size:12px;font-weight:500;color:",";background:",";display:flex;justify-content:center;align-items:center;padding:6px;border-radius:20px;flex-grow:1;flex-basis:0;transition:color 300ms;"],(e=>{var t=e.theme;return e.active?t.text:t.subText}),(e=>{var t=e.theme;return e.active?t.tabActive:"transparent"})),Y=r.default.div.withConfig({displayName:"styled__InformationContainer",componentId:"sc-w652p9-28"})(["display:flex;flex-direction:column;gap:8px;"]),q=r.default.div.withConfig({displayName:"styled__ButtonGroupContainer",componentId:"sc-w652p9-29"})(["display:flex;gap:16px;> *{flex:1;}"]),D=r.default.div.withConfig({displayName:"styled__FooterContainer",componentId:"sc-w652p9-30"})(["display:flex;justify-content:space-between;"])},"./src/components/ZapError/index.tsx":function(e,t,i){"use strict";var n=i("./node_modules/polished/dist/polished.esm.js"),o=i("./node_modules/react-feather/dist/icons/alert-triangle.js"),s=i("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=i("./src/hooks/useTheme.ts"),d=i("./node_modules/react/jsx-runtime.js"),r=s.default.div.withConfig({displayName:"ZapError__ZapErrorWrapper",componentId:"sc-si8u1w-0"})(["display:flex;align-items:center;gap:8px;background:",";padding:1rem;border-radius:999px;margin-bottom:28px;color:",";font-size:12px;font-weight:400;"],(e=>{var t=e.theme,i=e.warning;return Object(n.d)(i?t.warning:t.red,.35)}),(e=>e.theme.text));t.a=e=>{var t=e.message,i=e.warning,n=Object(a.a)();return Object(d.jsxs)(r,{warning:i,children:[Object(d.jsx)(o.a,{color:i?n.warning:n.red,style:{strokeWidth:1.5},size:16}),t]})}},"./src/hooks/useProAmmPositions.ts":function(e,t,i){"use strict";i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return j}));var n=i("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=i("./node_modules/@ethersproject/abi/lib.esm/abi-coder.js"),s=i("./node_modules/@ethersproject/address/lib.esm/index.js"),a=i("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),d=i("./node_modules/@ethersproject/solidity/lib.esm/index.js"),r=i("./node_modules/react/index.js"),c=i("./src/hooks/index.ts"),l=i("./src/state/multicall/hooks.ts"),u=i("./src/hooks/useContract.ts");function b(e){var t=Object(u.o)(),i=Object(c.b)(),a=i.isEVM,b=i.networkInfo,p=Object(r.useMemo)((()=>e?e.map((e=>[e])):[]),[e]),j=Object(l.d)(t,"positions",p),m=Object(r.useMemo)((()=>j.some((e=>e.loading))),[j]),x=Object(r.useMemo)((()=>j.some((e=>e.error))),[j]),v=Object(r.useMemo)((()=>{if(!m&&!x&&e&&a)return j.map(((t,i)=>{var n=e[i],a=t.result;return{tokenId:n,poolId:Object(s.getCreate2Address)(b.elastic.coreFactory,Object(d.keccak256)(["bytes"],[o.b.encode(["address","address","uint24"],[a.info.token0,a.info.token1,a.info.fee])]),b.elastic.initCodeHash),feeGrowthInsideLast:a.pos.feeGrowthInsideLast,nonce:a.pos.nonce,liquidity:a.pos.liquidity,operator:a.pos.operator,tickLower:a.pos.tickLower,tickUpper:a.pos.tickUpper,rTokenOwed:a.pos.rTokenOwed,fee:a.info.fee,token0:a.info.token0,token1:a.info.token1}}))}),[m,x,j,e,b,a]);return Object(r.useMemo)((()=>({loading:m,positions:null===v||void 0===v?void 0:v.map(((e,t)=>Object(n.a)(Object(n.a)({},e),{},{tokenId:p[t][0]})))})),[m,v,p])}function p(e){var t,i=b(e?[e]:void 0);return{loading:i.loading,position:null===(t=i.positions)||void 0===t?void 0:t[0]}}function j(e){var t,i=Object(u.o)(),n=Object(l.c)(i,"balanceOf",[null!==e&&void 0!==e?e:void 0]),o=n.loading,s=n.result,d=null===s||void 0===s||null===(t=s[0])||void 0===t?void 0:t.toNumber(),c=Object(r.useMemo)((()=>{if(d&&e){for(var t=[],i=0;i<d;i++)t.push([e,i]);return t}return[]}),[e,d]),p=Object(l.d)(i,"tokenOfOwnerByIndex",c),j=Object(r.useMemo)((()=>p.some((e=>e.loading))),[p]),m=b(Object(r.useMemo)((()=>e?p.map((e=>e.result)).filter((e=>!!e)).map((e=>a.a.from(e[0]))):[]),[e,p])),x=m.positions,v=m.loading;return Object(r.useMemo)((()=>({loading:j||o||v,positions:x})),[j,o,v,x])}},"./src/pages/AddLiquidity/index.tsx":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return be}));var n=i("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=i("./node_modules/@lingui/react/esm/index.js"),s=i("./node_modules/@lingui/core/esm/index.js"),a=i("./node_modules/@kyberswap/ks-sdk-core/dist/index.js"),d=i("./node_modules/jsbi/dist/jsbi-umd.js"),r=i.n(d),c=i("./node_modules/react/index.js"),l=i("./node_modules/react-router/esm/react-router.js"),u=i("./src/components/LiquidityProviderMode/index.tsx"),b=i("./src/components/NavigationTabs/index.tsx"),p=i("./src/components/PositionCard/index.tsx"),j=i("./src/components/Tutorial/index.tsx"),m=i("./src/data/Reserves.ts"),x=i("./src/hooks/index.ts"),v=i("./src/hooks/Tokens.ts"),h=i("./src/hooks/useMixpanel.ts"),g=i("./src/state/mint/hooks.ts"),O=i("./src/utils/dmm.ts"),f=i("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),y=i("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),C=i("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_=i("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),w=i("./node_modules/@sentry/core/esm/exports.js"),R=i("./node_modules/ethers/lib/utils.js"),k=i("./node_modules/react-feather/dist/icons/alert-triangle.js"),I=i("./node_modules/rebass/dist/index.esm.js"),N=i("./src/components/Button/index.tsx"),S=i("./src/components/Column/index.tsx"),A=i("./src/components/ConfirmAddModalBottom/index.tsx"),E=i("./src/components/CurrencyInputPanel/index.tsx"),T=i("./src/components/CurrentPrice/index.tsx"),P=i("./src/components/Loader/index.tsx"),B=i("./src/components/PoolPriceBar/index.tsx"),U=i("./src/components/QuestionHelper/index.tsx"),Y=i("./src/components/Row/index.tsx"),q=i("./src/components/TransactionConfirmationModal/index.tsx"),D=i("./src/constants/index.ts"),F=i("./src/constants/tokens.ts"),L=i("./src/hooks/useApproveCallback.ts"),M=i("./src/hooks/useTheme.ts"),z=i("./src/hooks/useTokensMarketPrice.ts"),W=i("./src/hooks/useTransactionDeadline.ts"),H=i("./src/pages/Pool/styleds.tsx"),V=i("./src/state/application/hooks.ts"),G=i("./src/state/mint/actions.ts"),Q=i("./src/state/transactions/hooks.tsx"),Z=i("./src/state/transactions/type.ts"),J=i("./src/state/user/hooks.tsx"),K=i("./src/theme/index.tsx"),X=i("./src/utils/index.ts"),$=i("./src/utils/getContract.ts"),ee=i("./src/utils/isZero.ts"),te=i("./src/utils/maxAmountSpend.ts"),ie=i("./src/pages/AddLiquidity/styled.tsx"),ne=i("./node_modules/react/jsx-runtime.js"),oe=e=>{var t,i,d,u,b,p,j=e.currencyIdA,h=e.currencyIdB,oe=e.pairAddress,se=Object(x.b)(),ae=se.account,de=se.chainId,re=se.isEVM,ce=se.networkInfo,le=Object(x.e)().library,ue=Object(M.a)(),be=Object(v.b)(j),pe=Object(v.b)(h),je=!!(de&&be&&be.isNative),me=!!(de&&be&&be.equals(a.WETH[de])),xe=!!(de&&pe&&pe.isNative),ve=!!(de&&pe&&pe.equals(a.WETH[de])),he=Object(V.y)(),ge=Object(J.c)(),Oe=Object(n.a)(ge,1)[0],fe=Object(g.d)(),ye=fe.independentField,Ce=fe.typedValue,_e=fe.otherTypedValue,we=Object(g.a)(null!==be&&void 0!==be?be:void 0,null!==pe&&void 0!==pe?pe:void 0,oe),Re=we.dependentField,ke=we.currencies,Ie=we.pair,Ne=we.pairState,Se=we.currencyBalances,Ae=we.parsedAmounts,Ee=we.price,Te=we.noLiquidity,Pe=we.liquidityMinted,Be=we.poolTokenPercentage,Ue=we.error,Ye=we.unAmplifiedPairAddress,qe=we.isStaticFeePair,De=we.isOldStaticFeeContract,Fe=Object(O.j)(ke[G.a.CURRENCY_A]),Le=Object(O.j)(ke[G.a.CURRENCY_B]),Me=(null===Ie||void 0===Ie?void 0:Ie.amp)||r.a.BigInt(0),ze=Me.toString()?new a.Fraction(r.a.BigInt(Object(R.parseUnits)(Me.toString()||"1",20)),r.a.BigInt(Object(R.parseUnits)("1",16))):void 0,We=!!ze&&ze.equalTo(r.a.BigInt(1e4))&&!!Ye&&!Object(ee.a)(Ye),He=Object(g.c)(Te),Ve=He.onFieldAInput,Ge=He.onFieldBInput,Qe=!Ue,Ze=Object(c.useState)(!1),Je=Object(n.a)(Ze,2),Ke=Je[0],Xe=Je[1],$e=Object(c.useState)(!1),et=Object(n.a)($e,2),tt=et[0],it=et[1],nt=Object(W.a)(),ot=Object(J.y)(),st=Object(n.a)(ot,1)[0],at=Object(c.useState)(""),dt=Object(n.a)(at,2),rt=dt[0],ct=dt[1],lt=Object(c.useState)(""),ut=Object(n.a)(lt,2),bt=ut[0],pt=ut[1],jt={[ye]:Ce,[Re]:Te?_e:null!==(t=null===(i=Ae[Re])||void 0===i?void 0:i.toSignificant(6))&&void 0!==t?t:""},mt=[G.a.CURRENCY_A,G.a.CURRENCY_B].reduce(((e,t)=>Object(C.a)(Object(C.a)({},e),{},{[t]:Object(te.b)(Se[t])})),{}),xt=re?qe?De?null===(d=ce.classic.oldStatic)||void 0===d?void 0:d.router:ce.classic.static.router:null===(u=ce.classic.dynamic)||void 0===u?void 0:u.router:void 0,vt=Object(L.b)(Ae[G.a.CURRENCY_A],xt||void 0),ht=Object(n.a)(vt,2),gt=ht[0],Ot=ht[1],ft=Object(L.b)(Ae[G.a.CURRENCY_B],xt||void 0),yt=Object(n.a)(ft,2),Ct=yt[0],_t=yt[1],wt=Object(Q.h)(),Rt=Object(J.h)();function kt(){return It.apply(this,arguments)}function It(){return(It=Object(y.a)(Object(f.a)().mark((function e(){var t,i,n,o,d,c,l,u,b,p,j,m,x,v,h,g,O,y,R,k,I,N,S;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de&&le&&ae){e.next=2;break}return e.abrupt("return");case 2:if(t=qe?De?Object($.e)(de,le,ae):Object($.f)(de,le,ae):Object($.d)(de,le,ae),i=Ae[G.a.CURRENCY_A],n=Ae[G.a.CURRENCY_B],i&&n&&be&&pe&&nt){e.next=6;break}return e.abrupt("return");case 6:if(o={[G.a.CURRENCY_A]:Object(X.c)(i,Te?0:st)[0],[G.a.CURRENCY_B]:Object(X.c)(n,Te?0:st)[0]},Ie){e.next=9;break}return e.abrupt("return");case 9:return be.isNative||pe.isNative?(j=pe.isNative,m=Ie.virtualReserveOf(j?null===be||void 0===be?void 0:be.wrapped:null===pe||void 0===pe?void 0:pe.wrapped),x=Ie.virtualReserveOf(j?null===pe||void 0===pe?void 0:pe.wrapped:null===be||void 0===be?void 0:be.wrapped),v=r.a.divide(r.a.multiply(x.quotient,r.a.exponentiate(r.a.BigInt(2),r.a.BigInt(112))),m.quotient),h=r.a.divide(r.a.multiply(v,r.a.BigInt(st)),r.a.BigInt(1e4)),g=[r.a.subtract(v,h).toString(),r.a.add(v,h).toString()],d=t.estimateGas.addLiquidityETH,c=t.addLiquidityETH,l=[null!==(b=null===(p=j?null===be||void 0===be?void 0:be.wrapped:null===pe||void 0===pe?void 0:pe.wrapped)||void 0===p?void 0:p.address)&&void 0!==b?b:"",Ie.address,(j?i:n).quotient.toString(),o[j?G.a.CURRENCY_A:G.a.CURRENCY_B].toString(),o[j?G.a.CURRENCY_B:G.a.CURRENCY_A].toString(),g,ae,nt.toHexString()],u=_.a.from((j?n:i).quotient.toString())):(R=Ie.virtualReserveOf(null===be||void 0===be?void 0:be.wrapped),k=Ie.virtualReserveOf(null===pe||void 0===pe?void 0:pe.wrapped),I=r.a.divide(r.a.multiply(k.quotient,r.a.exponentiate(r.a.BigInt(2),r.a.BigInt(112))),R.quotient),N=r.a.divide(r.a.multiply(I,r.a.BigInt(st)),r.a.BigInt(1e4)),S=[r.a.subtract(I,N).toString(),r.a.add(I,N).toString()],d=t.estimateGas.addLiquidity,c=t.addLiquidity,l=[null!==(O=null===be||void 0===be?void 0:be.wrapped.address)&&void 0!==O?O:"",null!==(y=null===pe||void 0===pe?void 0:pe.wrapped.address)&&void 0!==y?y:"",Ie.address,i.quotient.toString(),n.quotient.toString(),o[G.a.CURRENCY_A].toString(),o[G.a.CURRENCY_B].toString(),S,ae,nt.toHexString()],u=null),it(!0),e.next=13,d(...l,u?{value:u}:{}).then((e=>c(...l,Object(C.a)(Object(C.a)({},u?{value:u}:{}),{},{gasLimit:Object(X.b)(e)})).then((e=>{var t=ke[G.a.CURRENCY_A],i=ke[G.a.CURRENCY_B];if(t&&i){var n,o;it(!1),wt({hash:e.hash,type:Z.a.ADD_LIQUIDITY,summary:(null===(n=Ae[G.a.CURRENCY_A])||void 0===n?void 0:n.toSignificant(6))+" "+t.symbol+" and "+(null===(o=Ae[G.a.CURRENCY_B])||void 0===o?void 0:o.toSignificant(6))+" "+i.symbol,arbitrary:{poolAddress:oe,token_1:t.symbol,token_2:i.symbol,add_liquidity_method:"token pair",amp:new a.Fraction(Me).divide(r.a.BigInt(1e4)).toSignificant(5),txHash:e.hash}}),ct(e.hash);var s=t.wrapped,d=i.wrapped;s&&d&&Rt(s,d)}})))).catch((e=>{it(!1);var t=new Error("Classic: Add liquidity Error",{cause:e});t.name="AddLiquidityError",Object(w.a)(t,{extra:{args:l}}),4001!==(null===e||void 0===e?void 0:e.code)&&console.error(e),e.message.includes("INSUFFICIENT")?pt(s.a._("Insufficient liquidity available. Please reload page and try again!")):pt(null===e||void 0===e?void 0:e.message)}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt="Supplying ".concat(null===(b=Ae[G.a.CURRENCY_A])||void 0===b?void 0:b.toSignificant(6)," ").concat(null===Fe||void 0===Fe?void 0:Fe.symbol," and ").concat(null===(p=Ae[G.a.CURRENCY_B])||void 0===p?void 0:p.toSignificant(6)," ").concat(null===Le||void 0===Le?void 0:Le.symbol),St=Object(c.useCallback)((()=>{Xe(!1),rt&&Ve(""),ct(""),pt("")}),[Ve,rt]),At=Ie?Ie.reserve0.asFraction.divide(Ie.virtualReserve0).multiply("100").divide(Ie.reserve0.divide(Ie.virtualReserve0).asFraction.add(Ie.reserve1.divide(Ie.virtualReserve1).asFraction)):new a.Fraction(r.a.BigInt(50)),Et=new a.Fraction(r.a.BigInt(100),r.a.BigInt(1)).subtract(At),Tt=At.toSignificant(4),Pt=Et.toSignificant(4),Bt=Object(c.useMemo)((()=>[ke[G.a.CURRENCY_A],ke[G.a.CURRENCY_B]].map((e=>null===e||void 0===e?void 0:e.wrapped))),[ke]),Ut=Object(V.v)(Bt),Yt=Object(z.a)(Bt),qt=Ae[G.a.CURRENCY_A]&&Ut[0]?parseFloat(Ae[G.a.CURRENCY_A].toSignificant(6))*Ut[0]:0,Dt=Ae[G.a.CURRENCY_B]&&Ut[1]?parseFloat(Ae[G.a.CURRENCY_B].toSignificant(6))*Ut[1]:0,Ft=Number(null===Ee||void 0===Ee?void 0:Ee.toSignificant(6)),Lt=Yt[1]&&Yt[0]/Yt[1],Mt=!!(Ft&&Lt&&Math.abs(Ft-Lt)/Lt>.05),zt=Object(l.g)(),Wt=()=>Object(ne.jsxs)(S.a,{gap:"5px",children:[Object(ne.jsx)(Y.e,{style:{marginTop:"20px"},children:Object(ne.jsx)(I.d,{fontSize:"24px",fontWeight:500,lineHeight:"42px",marginRight:10,children:null===Pe||void 0===Pe?void 0:Pe.toSignificant(6)})}),Object(ne.jsx)(Y.f,{children:Object(ne.jsx)(I.d,{fontSize:"24px",children:"DMM "+(null===Fe||void 0===Fe?void 0:Fe.symbol)+"/"+(null===Le||void 0===Le?void 0:Le.symbol)+" LP Tokens"})}),Object(ne.jsx)(K.l.italic,{fontSize:12,textAlign:"left",padding:"8px 0 0 0 ",children:s.a._("Output is estimated. If the price changes by more than {0}% your transaction will revert.",{0:st/100})})]}),Ht=()=>Object(ne.jsx)(A.a,{pair:Ie,price:Ee,currencies:ke,parsedAmounts:Ae,noLiquidity:!1,onAdd:kt,poolTokenPercentage:Be,amplification:ze,estimatedUsd:[qt,Dt]});return Object(ne.jsxs)(H.c,{children:[Object(ne.jsx)(q.c,{isOpen:Ke,onDismiss:St,attemptingTxn:tt,hash:rt,content:()=>bt?Object(ne.jsx)(q.b,{onDismiss:St,message:bt}):We?Object(ne.jsx)(q.a,{title:s.a._("Unamplified Pool existed"),onDismiss:St,topContent:()=>null,bottomContent:()=>Object(ne.jsxs)(ne.Fragment,{children:["Please use the link below if you want to add liquidity to Unamplified Pool",Object(ne.jsx)(K.k,{onClick:St,id:"unamplified-pool-link",to:"/add/".concat(j,"/").concat(h,"/").concat(Ye),children:"Go to unamplified pool"})]})}):Object(ne.jsx)(q.a,{title:s.a._("You will receive"),onDismiss:St,topContent:Wt,bottomContent:Ht}),pendingText:Nt}),Object(ne.jsx)(S.a,{gap:"20px",children:Object(ne.jsxs)(ie.g,{children:[Object(ne.jsxs)(ie.f,{children:[Object(ne.jsxs)("div",{children:[Object(ne.jsx)(E.g,{value:jt[G.a.CURRENCY_A],onUserInput:Ve,onMax:()=>{var e,t;Ve(null!==(e=null===(t=mt[G.a.CURRENCY_A])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},onHalf:()=>{var e,t;Ve(null!==(e=null===(t=Se[G.a.CURRENCY_A])||void 0===t?void 0:t.divide(2).toExact())&&void 0!==e?e:"")},currency:ke[G.a.CURRENCY_A],id:"add-liquidity-input-tokena",showCommonBases:!0,positionMax:"top",estimatedUsd:Object(X.i)(qt.toString(),!0)||void 0,disableCurrencySelect:!me&&!je,isSwitchMode:me||je,onSwitchCurrency:()=>{de&&zt.replace("/add/".concat(je?a.WETH[de].address:F.i[de].symbol,"/").concat(h,"/").concat(oe))}}),Object(ne.jsx)(I.b,{justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem",children:Object(ne.jsx)(ie.p,{children:Ut[0]?"1 ".concat(null===Fe||void 0===Fe?void 0:Fe.symbol," = ").concat(Object(X.i)(Ut[0].toString(),!0)):Object(ne.jsx)(P.a,{})})})]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(E.g,{value:jt[G.a.CURRENCY_B],onUserInput:Ge,onMax:()=>{var e,t;Ge(null!==(e=null===(t=mt[G.a.CURRENCY_B])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},onHalf:()=>{var e,t,i;Ge(null!==(e=null===(t=Se[G.a.CURRENCY_B])||void 0===t||null===(i=t.divide(2))||void 0===i?void 0:i.toExact())&&void 0!==e?e:"")},currency:ke[G.a.CURRENCY_B],disableCurrencySelect:!0,id:"add-liquidity-input-tokenb",showCommonBases:!0,positionMax:"top",estimatedUsd:Object(X.i)(Dt.toString(),!0)||void 0}),Object(ne.jsxs)(I.b,{justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem",children:[Object(ne.jsx)(ie.p,{children:Ut[1]?"1 ".concat(null===Le||void 0===Le?void 0:Le.symbol," = ").concat(Object(X.i)(Ut[1].toString(),!0)):Object(ne.jsx)(P.a,{})}),oe&&de&&(ve||xe)&&Object(ne.jsx)(K.k,{replace:!0,to:"/add/".concat(j,"/").concat(xe?a.WETH[de].address:F.i[de].symbol,"/").concat(oe),children:xe?Object(ne.jsx)(o.b,{id:"Use Wrapped Token"}):Object(ne.jsx)(o.b,{id:"Use Native Token"})})]})]}),ke[ye]&&ke[Re]&&Ne!==m.a.INVALID&&Object(ne.jsx)(ie.m,{padding:"0",marginTop:"8px",style:{marginTop:"8px"},children:Object(ne.jsx)(B.a,{currencies:ke,poolTokenPercentage:Be,noLiquidity:Te,price:Ee,pair:Ie})})]}),Object(ne.jsxs)(ie.l,{children:[ke[ye]&&ke[Re]&&Ne!==m.a.INVALID&&Object(ne.jsx)(ie.m,{borderRadius:"20px",marginBottom:"24px",children:Object(ne.jsxs)(B.d,{title:s.a._("Pool Information"),children:[Object(ne.jsxs)(Y.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(ue.border),gap:"1rem"},children:[!Te&&Object(ne.jsxs)(ie.c,{children:[Object(ne.jsx)(K.l.subHeader,{fontWeight:500,fontSize:12,color:ue.subText,children:Object(ne.jsx)(K.n,{children:Object(ne.jsx)(o.b,{id:"Current Price"})})}),Object(ne.jsx)(K.l.black,{fontWeight:400,fontSize:14,color:ue.text,children:Object(ne.jsx)(T.a,{price:Ee})})]}),Object(ne.jsxs)(ie.k,{children:[Object(ne.jsx)(K.l.subHeader,{fontWeight:500,fontSize:12,color:ue.subText,children:Object(ne.jsx)(K.n,{children:Object(ne.jsx)(o.b,{id:"Pool Ratio"})})}),Object(ne.jsxs)(K.l.black,{fontWeight:400,fontSize:14,color:ue.text,children:[Tt,"% ",null===Ie||void 0===Ie?void 0:Ie.token0.symbol," - ",Pt,"% ",null===Ie||void 0===Ie?void 0:Ie.token1.symbol]})]})]}),Object(ne.jsxs)(Y.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(ue.border),gap:"1rem"},children:[Object(ne.jsxs)(S.a,{style:{flex:"1"},children:[Object(ne.jsxs)(Y.a,{children:[Object(ne.jsx)(I.d,{fontWeight:500,fontSize:12,color:ue.subText,children:"AMP"}),Object(ne.jsx)(U.a,{text:D.g})]}),Object(ne.jsx)(I.d,{fontWeight:400,fontSize:14,color:ue.text,children:Ie?Object(ne.jsx)(ne.Fragment,{children:new a.Fraction(r.a.BigInt(Ie.amp)).divide(r.a.BigInt(1e4)).toSignificant(5)}):""})]}),(!!oe||+Me>=1)&&Object(ne.jsxs)(ie.e,{children:[Object(ne.jsxs)(Y.a,{children:[Object(ne.jsx)(I.d,{fontWeight:500,fontSize:12,color:ue.subText,children:Object(ne.jsx)(K.n,{children:qe||!Ie?Object(ne.jsx)(o.b,{id:"Fee"}):Object(ne.jsx)(o.b,{id:"Dynamic Fee Range"})})}),Object(ne.jsx)(U.a,{text:qe||!Ie?s.a._("Liquidity providers will earn this trading fee for each trade that uses this pool"):s.a._("Fees are adjusted dynamically according to market conditions to maximise returns for liquidity providers")})]}),Object(ne.jsx)(I.d,{fontWeight:400,fontSize:14,color:ue.text,children:Ie?qe&&null!==Ie&&void 0!==Ie&&Ie.fee?100*+new a.Fraction(r.a.BigInt(Ie.fee)).divide(r.a.exponentiate(r.a.BigInt(10),r.a.BigInt(18))).toSignificant(6)+"%":Object(O.b)(null!==Ie&&void 0!==Ie&&Ie.amp?+new a.Fraction(r.a.BigInt(Ie.amp)).divide(r.a.BigInt(1e4)).toSignificant(5):+Me):""})]})]}),ke[ye]&&ke[Re]&&(!!oe||+Me>=1)&&Object(ne.jsxs)("div",{style:{padding:"16px 0 0"},children:[Object(ne.jsxs)(Y.a,{marginBottom:"8px",children:[Object(ne.jsx)(K.n,{children:Object(ne.jsx)(ie.a,{children:"Active Price Range"})}),Object(ne.jsx)(U.a,{text:s.a._("Tradable token pair price range for this pool based on AMP. If the price goes below or above this range, the pool may become inactive")})]}),Object(ne.jsx)(B.b,{currencies:ke,price:Ee,pair:Ie,amplification:ze})]})]})}),Mt&&Object(ne.jsxs)(ie.q,{children:[Object(ne.jsx)(k.a,{color:ue.yellow2}),Object(ne.jsx)(I.d,{fontSize:"0.75rem",marginLeft:"0.75rem",children:Object(ne.jsx)(o.b,{id:"The price is deviating quite a lot from that market price, please be careful!"})})]}),ae?Object(ne.jsxs)(S.a,{gap:"md",children:[(gt===L.a.NOT_APPROVED||gt===L.a.PENDING||Ct===L.a.NOT_APPROVED||Ct===L.a.PENDING)&&Qe&&Object(ne.jsxs)(Y.b,{children:[gt!==L.a.APPROVED&&Object(ne.jsx)(N.h,{onClick:Ot,disabled:gt===L.a.PENDING,width:Ct!==L.a.APPROVED?"48%":"100%",children:gt===L.a.PENDING?Object(ne.jsxs)(H.b,{children:["Approving ",null===Fe||void 0===Fe?void 0:Fe.symbol]}):"Approve "+(null===Fe||void 0===Fe?void 0:Fe.symbol)}),Ct!==L.a.APPROVED&&Object(ne.jsx)(N.h,{onClick:_t,disabled:Ct===L.a.PENDING,width:gt!==L.a.APPROVED?"48%":"100%",children:Ct===L.a.PENDING?Object(ne.jsxs)(H.b,{children:["Approving ",null===Le||void 0===Le?void 0:Le.symbol]}):"Approve "+(null===Le||void 0===Le?void 0:Le.symbol)})]}),Object(ne.jsx)(N.d,{onClick:()=>{Oe?kt():Xe(!0)},disabled:!Qe||gt!==L.a.APPROVED||Ct!==L.a.APPROVED,error:!Qe&&!!Ae[G.a.CURRENCY_A]&&!!Ae[G.a.CURRENCY_B]&&!!(oe&&+Me<1),children:Object(ne.jsx)(I.d,{fontSize:20,fontWeight:500,children:null!==Ue&&void 0!==Ue?Ue:!oe&&+Me<1?s.a._("Enter amp (>=1)"):s.a._("Supply")})})]}):Object(ne.jsx)(N.f,{onClick:he,children:Object(ne.jsx)(o.b,{id:"Connect Wallet"})})]})]})})]})},se=i("./src/components/CurrencyLogo/index.tsx"),ae=i("./src/components/ZapError/index.tsx"),de=i("./src/components/swap/FormattedPriceImpact.tsx"),re=i("./src/state/swap/hooks.ts"),ce=i("./src/utils/currencyId.ts"),le=i("./src/utils/prices.ts"),ue=e=>{var t,i,d,l,u,b,p,j,h=e.currencyIdA,oe=e.currencyIdB,ue=e.pairAddress,be=Object(x.b)(),pe=be.account,je=be.chainId,me=be.isEVM,xe=be.networkInfo,ve=Object(x.e)().library,he=Object(M.a)(),ge=Object(v.b)(h),Oe=Object(v.b)(oe),fe=Object(V.y)(),ye=Object(c.useState)(""),Ce=Object(n.a)(ye,2),_e=Ce[0],we=Ce[1],Re=Object(J.c)(),ke=Object(n.a)(Re,1)[0],Ie=Object(g.d)(),Ne=Ie.independentField,Se=Ie.typedValue,Ae=Ie.otherTypedValue,Ee=Object(g.b)(null!==ge&&void 0!==ge?ge:void 0,null!==Oe&&void 0!==Oe?Oe:void 0,ue),Te=Ee.dependentField,Pe=Ee.currencies,Be=Ee.pair,Ue=Ee.pairState,Ye=Ee.currencyBalances,qe=Ee.parsedAmounts,De=Ee.price,Fe=Ee.noLiquidity,Le=Ee.liquidityMinted,Me=Ee.poolTokenPercentage,ze=Ee.insufficientLiquidity,We=Ee.error,He=Ee.unAmplifiedPairAddress,Ve=Ee.isStaticFeePair,Ge=Ee.isOldStaticFeeContract,Qe=Object(O.j)(Pe[G.a.CURRENCY_A]),Ze=Object(O.j)(Pe[G.a.CURRENCY_B]),Je=Qe&&Ze?Ne===G.a.CURRENCY_A?Qe:Ze:void 0,Ke=Qe&&Ze?Ne===G.a.CURRENCY_A?Ze:Qe:void 0,Xe=!!(je&&Pe[Ne]&&null!==(t=Pe[Ne])&&void 0!==t&&t.isNative),$e=!!(je&&Pe[Ne]&&null!==(i=Pe[Ne])&&void 0!==i&&i.equals(a.WETH[je])),et=(null===Be||void 0===Be?void 0:Be.amp)||r.a.BigInt(0),tt=et.toString()?new a.Fraction(r.a.BigInt(Object(R.parseUnits)(et.toString()||"1",20)),r.a.BigInt(Object(R.parseUnits)("1",16))):void 0,it=!!tt&&tt.equalTo(r.a.BigInt(1e4))&&!!He&&!Object(ee.a)(He),nt=Object(g.e)(),ot=nt.onFieldInput,st=nt.onSwitchField,at=!We&&!ze,dt=Object(c.useState)(!1),rt=Object(n.a)(dt,2),ct=rt[0],lt=rt[1],ut=Object(c.useState)(!1),bt=Object(n.a)(ut,2),pt=bt[0],jt=bt[1],mt=Object(W.a)(),xt=Object(J.y)(),vt=Object(n.a)(xt,1)[0],ht=Object(c.useState)(""),gt=Object(n.a)(ht,2),Ot=gt[0],ft=gt[1],yt={[Ne]:Se,[Te]:Fe?Ae:null!==(d=null===(l=qe[Te])||void 0===l?void 0:l.toSignificant(6))&&void 0!==d?d:""},Ct=[G.a.CURRENCY_A,G.a.CURRENCY_B].reduce(((e,t)=>Object(C.a)(Object(C.a)({},e),{},{[t]:Object(te.b)(Ye[t])})),{}),_t=Object(re.a)(Se,Pe[Ne]),wt=Object(L.b)(_t,me?Ve?Ge?null===(u=xe.classic.oldStatic)||void 0===u?void 0:u.zap:xe.classic.static.zap:null===(b=xe.classic.dynamic)||void 0===b?void 0:b.zap:void 0),Rt=Object(n.a)(wt,2),kt=Rt[0],It=Rt[1],Nt=Object(c.useMemo)((()=>{var e;return Object(re.a)(Se,null===(e=Pe[Ne])||void 0===e?void 0:e.wrapped,!0)}),[Pe,Ne,Se]),St=Object(c.useMemo)((()=>Nt?_.a.from(Nt.quotient.toString()):void 0),[Nt]),At=Le?r.a.divide(r.a.multiply(null===Le||void 0===Le?void 0:Le.quotient,r.a.BigInt(1e4-vt)),r.a.BigInt(1e4)):r.a.BigInt(0),Et=Object(Q.h)();function Tt(){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(y.a)(Object(f.a)().mark((function e(){var t,i,n,o,d,c,l,u,b,p,j,m;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(me&&ve&&pe){e.next=2;break}return e.abrupt("return");case 2:if(o=Object($.g)(je,ve,pe,Ve,Ge),je&&pe){e.next=5;break}return e.abrupt("return");case 5:if(d=null===(t=Pe[Ne])||void 0===t?void 0:t.wrapped,c=null===(i=Pe[Te])||void 0===i?void 0:i.wrapped,Be&&Be.address&&mt&&d&&c&&St){e.next=9;break}return e.abrupt("return");case 9:if(l=qe[G.a.CURRENCY_A],u=qe[G.a.CURRENCY_B],l&&u&&ge&&Oe&&mt){e.next=12;break}return e.abrupt("return");case 12:if(Be){e.next=14;break}return e.abrupt("return");case 14:return null!==(n=Pe[Ne])&&void 0!==n&&n.isNative?(b=o.estimateGas.zapInEth,p=o.zapInEth,j=[c.address,Be.address,pe,At.toString(),mt.toHexString()],m=St):(b=o.estimateGas.zapIn,p=o.zapIn,j=[d.address,c.address,St.toString(),Be.address,pe,At.toString(),mt.toHexString()],m=null),Ve&&!Ge&&j.unshift(xe.classic.static.factory),jt(!0),e.next=19,b(...j,m?{value:m}:{}).then((e=>p(...j,Object(C.a)(Object(C.a)({},m?{value:m}:{}),{},{gasLimit:Object(X.b)(e)})).then((e=>{var t=Pe[G.a.CURRENCY_A],i=Pe[G.a.CURRENCY_B];t&&i&&(jt(!1),Et({hash:e.hash,type:Z.a.ADD_LIQUIDITY,summary:(null===Nt||void 0===Nt?void 0:Nt.toSignificant(6))+" "+(null===Je||void 0===Je?void 0:Je.symbol),arbitrary:{poolAddress:ue,token_1:t.symbol,token_2:i.symbol,add_liquidity_method:"single token",amp:new a.Fraction(et).divide(r.a.BigInt(1e4)).toSignificant(5),txHash:e.hash}}),ft(e.hash))})))).catch((e=>{jt(!1);var t=new Error("Classic: ZapIn liquidity Error",{cause:e});t.name="ZapError",Object(w.a)(t,{extra:{args:j}}),4001!==(null===e||void 0===e?void 0:e.code)&&console.error(e),e.message.includes("INSUFFICIENT_MINT_QTY")?we(s.a._("Insufficient liquidity available. Please reload page and try again!")):we(null===e||void 0===e?void 0:e.message)}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bt="Supplying ".concat(null===Nt||void 0===Nt?void 0:Nt.toSignificant(6)," ").concat(null===Je||void 0===Je?void 0:Je.symbol),Ut=Object(c.useCallback)((()=>{lt(!1),Ot&&ot(""),we(""),ft("")}),[ot,Ot]),Yt=Be?Be.reserve0.asFraction.divide(Be.virtualReserve0).multiply("100").divide(Be.reserve0.divide(Be.virtualReserve0).asFraction.add(Be.reserve1.divide(Be.virtualReserve1).asFraction)):new a.Fraction(r.a.BigInt(50)),qt=new a.Fraction(r.a.BigInt(100),r.a.BigInt(1)).subtract(Yt),Dt=Yt.toSignificant(4),Ft=qt.toSignificant(4),Lt=Object(c.useMemo)((()=>[Pe[Ne],Pe[Te]].map((e=>null===e||void 0===e?void 0:e.wrapped))),[Pe,Te,Ne]),Mt=Object(V.v)(Lt),zt=Object(z.a)(Lt),Wt=Ne===G.a.CURRENCY_A?Number(null===De||void 0===De?void 0:De.toSignificant(6)):Number(null===De||void 0===De?void 0:De.invert().toSignificant(6)),Ht=zt[1]&&zt[0]/zt[1],Vt=!!(Wt&&Ht&&Math.abs(Wt-Ht)/Ht>.05),Gt=Object(c.useCallback)((()=>{st()}),[st]),Qt=Nt&&Mt[0]?parseFloat(Nt.toSignificant(6))*Mt[0]:0,Zt=Mt[0]&&qe&&qe[Ne]&&Mt[0]*parseFloat(qe[Ne].toSignificant(6)),Jt=Mt[1]&&qe&&qe[Te]&&Mt[1]*parseFloat(qe[Te].toSignificant(6)),Kt=Ne===G.a.CURRENCY_A?[Zt||0,Jt||0]:[Jt||0,Zt||0],Xt=De&&Nt&&qe[Ne]&&qe[Te]&&!Nt.lessThan(qe[Ne])?Object(a.computePriceImpact)(Ne===G.a.CURRENCY_A?De:De.invert(),null===Nt||void 0===Nt?void 0:Nt.subtract(qe[Ne]),qe[Te]):void 0,$t=Be&&Xt?Object(le.a)([Be],Xt):void 0,ei=Object(le.e)($t),ti=()=>Object(ne.jsxs)(S.a,{gap:"5px",children:[Object(ne.jsx)(Y.e,{style:{marginTop:"20px"},children:Object(ne.jsx)(I.d,{fontSize:"24px",fontWeight:500,lineHeight:"42px",marginRight:10,children:null===Le||void 0===Le?void 0:Le.toSignificant(6)})}),Object(ne.jsx)(Y.f,{children:Object(ne.jsx)(I.d,{fontSize:"24px",children:"DMM "+(null===Qe||void 0===Qe?void 0:Qe.symbol)+"/"+(null===Ze||void 0===Ze?void 0:Ze.symbol)+" LP Tokens"})}),Object(ne.jsx)(K.l.italic,{fontSize:12,textAlign:"left",padding:"8px 0 0 0 ",children:s.a._("Output is estimated. If the price changes by more than {0}% your transaction will revert.",{0:vt/100})})]}),ii=()=>Object(ne.jsx)(A.a,{pair:Be,price:De,currencies:Pe,parsedAmounts:qe,noLiquidity:!1,onAdd:Tt,poolTokenPercentage:Me,amplification:tt,priceImpact:$t,estimatedUsd:Kt});return Object(ne.jsxs)(H.c,{children:[Object(ne.jsx)(q.c,{isOpen:ct,onDismiss:Ut,attemptingTxn:pt,hash:Ot,content:()=>_e?Object(ne.jsx)(q.b,{onDismiss:Ut,message:_e}):it?Object(ne.jsx)(q.a,{title:s.a._("Unamplified Pool existed"),onDismiss:Ut,topContent:()=>null,bottomContent:()=>Object(ne.jsxs)(ne.Fragment,{children:["Please use the link below if you want to add liquidity to Unamplified Pool",Object(ne.jsx)(K.k,{onClick:Ut,id:"unamplified-pool-link",to:"/add/".concat(h,"/").concat(oe,"/").concat(He),children:"Go to unamplified pool"})]})}):Object(ne.jsx)(q.a,{title:s.a._("You will receive"),onDismiss:Ut,topContent:ti,bottomContent:ii}),pendingText:Bt}),Object(ne.jsx)(S.a,{gap:"20px",children:Object(ne.jsxs)(ie.g,{children:[Object(ne.jsxs)(ie.f,{children:[Object(ne.jsxs)("div",{children:[Object(ne.jsx)(E.g,{value:yt[Ne],onUserInput:ot,onMax:()=>{var e,t;ot(null!==(e=null===(t=Ct[Ne])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},onHalf:()=>{var e,t,i;ot(null!==(e=null===(t=Ye[Ne])||void 0===t||null===(i=t.divide(2))||void 0===i?void 0:i.toExact())&&void 0!==e?e:"")},onSwitchCurrency:Gt,currency:Pe[Ne],id:"zap-in-input",disableCurrencySelect:!1,showCommonBases:!0,positionMax:"top",isSwitchMode:!0,estimatedUsd:Object(X.i)(Qt.toString(),!0)||void 0}),Object(ne.jsxs)(I.b,{justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem",children:[Object(ne.jsx)(ie.p,{children:Mt[0]?"1 ".concat(null===Je||void 0===Je?void 0:Je.symbol," = ").concat(Object(X.i)(Mt[0].toString(),!0)):Object(ne.jsx)(P.a,{})}),ue&&je&&(Xe||$e)&&Pe[Te]&&Object(ne.jsx)(K.k,{replace:!0,to:Ne===G.a.CURRENCY_A?"/add/".concat(Xe?Object(ce.a)(a.WETH[je],je):Object(ce.a)(F.i[je],je),"/").concat(Object(ce.a)(Pe[Te],je),"/").concat(ue):"/add/".concat(Object(ce.a)(Pe[Te],je),"/").concat(Xe?Object(ce.a)(a.WETH[je],je):F.i[je].symbol,"/").concat(ue),children:Xe?Object(ne.jsx)(o.b,{id:"Use Wrapped Token"}):Object(ne.jsx)(o.b,{id:"Use Native Token"})})]})]}),Object(ne.jsxs)(ie.m,{padding:"0",marginTop:"8px",borderRadius:"20px",children:[Object(ne.jsx)(Y.f,{padding:"0 0 1rem 0",children:Object(ne.jsx)(K.l.subHeader,{fontWeight:500,fontSize:16,color:he.text,children:Object(ne.jsx)(o.b,{id:"Your Pool Allocation"})})}),Object(ne.jsxs)(ie.d,{style:{padding:"16px 0",borderTop:"1px dashed ".concat(he.border),borderBottom:"1px dashed ".concat(he.border)},children:[Object(ne.jsxs)(S.a,{justify:"space-between",gap:"4px",children:[Object(ne.jsxs)(ie.n,{children:[Object(ne.jsx)(se.a,{currency:Pe[Ne]||void 0,size:"16px"}),Object(ne.jsx)(K.l.subHeader,{fontWeight:400,fontSize:14,color:he.subText,children:null===Je||void 0===Je?void 0:Je.symbol})]}),Object(ne.jsxs)(K.l.black,{fontWeight:400,fontSize:14,children:[null===(p=qe[Ne])||void 0===p?void 0:p.toSignificant(6)," (~",Object(X.i)((Zt||0).toString(),!0),")"]})]}),Object(ne.jsxs)(S.a,{justify:"space-between",gap:"4px",children:[Object(ne.jsxs)(ie.n,{children:[Object(ne.jsx)(se.a,{currency:Pe[Te]||void 0,size:"16px"}),Object(ne.jsx)(K.l.subHeader,{fontWeight:400,fontSize:14,color:he.subText,children:null===Ke||void 0===Ke?void 0:Ke.symbol})]}),Object(ne.jsxs)(K.l.black,{fontWeight:400,fontSize:14,children:[null===(j=qe[Te])||void 0===j?void 0:j.toSignificant(6)," (~",Object(X.i)((Jt||0).toString(),!0),")"]})]})]}),Object(ne.jsxs)(ie.d,{style:{paddingTop:"16px"},children:[Object(ne.jsx)(K.l.subHeader,{fontWeight:400,fontSize:14,color:he.subText,children:Object(ne.jsx)(o.b,{id:"Price Impact"})}),Object(ne.jsx)(K.l.black,{fontWeight:400,fontSize:14,children:Object(ne.jsx)(de.a,{priceImpact:$t})})]})]}),Pe[Ne]&&Pe[Te]&&Ue!==m.a.INVALID&&Object(ne.jsx)(ie.m,{padding:"0",borderRadius:"20px",style:{marginTop:"8px"},children:Object(ne.jsx)(B.a,{currencies:Pe,poolTokenPercentage:Me,noLiquidity:Fe,price:De,pair:Be})})]}),Object(ne.jsxs)(ie.l,{children:[Pe[Ne]&&Pe[Te]&&Ue!==m.a.INVALID&&Object(ne.jsx)(ie.m,{borderRadius:"20px",marginBottom:"28px",children:Object(ne.jsxs)(B.d,{title:s.a._("Pool Information"),children:[Object(ne.jsxs)(Y.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(he.border),gap:"1rem"},children:[!Fe&&Object(ne.jsxs)(ie.c,{children:[Object(ne.jsx)(K.l.subHeader,{fontWeight:500,fontSize:12,color:he.subText,children:Object(ne.jsx)(K.n,{children:Object(ne.jsx)(o.b,{id:"Current Price"})})}),Object(ne.jsx)(K.l.black,{fontWeight:400,fontSize:14,color:he.text,children:Object(ne.jsx)(T.a,{price:De})})]}),Object(ne.jsxs)(ie.k,{children:[Object(ne.jsx)(K.l.subHeader,{fontWeight:500,fontSize:12,color:he.subText,children:Object(ne.jsx)(K.n,{children:Object(ne.jsx)(o.b,{id:"Pool Ratio"})})}),Object(ne.jsxs)(K.l.black,{fontWeight:400,fontSize:14,color:he.text,children:[Dt,"% ",null===Be||void 0===Be?void 0:Be.token0.symbol," - ",Ft,"% ",null===Be||void 0===Be?void 0:Be.token1.symbol]})]})]}),Object(ne.jsxs)(Y.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(he.border),gap:"1rem"},children:[Object(ne.jsxs)(S.a,{style:{flex:"1"},children:[Object(ne.jsxs)(Y.a,{children:[Object(ne.jsx)(I.d,{fontWeight:500,fontSize:12,color:he.subText,children:"AMP"}),Object(ne.jsx)(U.a,{text:D.g})]}),Object(ne.jsx)(I.d,{fontWeight:400,fontSize:14,color:he.text,children:Be?Object(ne.jsx)(ne.Fragment,{children:new a.Fraction(r.a.BigInt(Be.amp)).divide(r.a.BigInt(1e4)).toSignificant(5)}):""})]}),(!!ue||+et>=1)&&Object(ne.jsxs)(ie.e,{children:[Object(ne.jsxs)(Y.a,{children:[Object(ne.jsx)(I.d,{fontWeight:500,fontSize:12,color:he.subText,children:Object(ne.jsx)(K.n,{children:Ve||!Be?Object(ne.jsx)(o.b,{id:"Fee"}):Object(ne.jsx)(o.b,{id:"Dynamic Fee Range"})})}),Object(ne.jsx)(U.a,{text:Ve||!Be?s.a._("Liquidity providers will earn this trading fee for each trade that uses this pool"):s.a._("Fees are adjusted dynamically according to market conditions to maximise returns for liquidity providers")})]}),Object(ne.jsx)(I.d,{fontWeight:400,fontSize:14,color:he.text,children:Be?Ve&&null!==Be&&void 0!==Be&&Be.fee?100*+new a.Fraction(r.a.BigInt(Be.fee)).divide(r.a.exponentiate(r.a.BigInt(10),r.a.BigInt(18))).toSignificant(6)+"%":Object(O.b)(null!==Be&&void 0!==Be&&Be.amp?+new a.Fraction(r.a.BigInt(Be.amp)).divide(r.a.BigInt(1e4)).toSignificant(5):+et):""})]})]}),Pe[Ne]&&Pe[Te]&&(!!ue||+et>=1)&&Object(ne.jsxs)("div",{style:{padding:"16px 0 0"},children:[Object(ne.jsxs)(Y.a,{marginBottom:"8px",children:[Object(ne.jsx)(K.n,{children:Object(ne.jsx)(ie.a,{children:"Active Price Range"})}),Object(ne.jsx)(U.a,{text:s.a._("Tradable token pair price range for this pool based on AMP. If the price goes below or above this range, the pool may become inactive")})]}),Object(ne.jsx)(B.b,{currencies:Pe,price:De,pair:Be,amplification:tt})]})]})}),Vt&&Object(ne.jsxs)(ie.q,{children:[Object(ne.jsx)(k.a,{color:he.yellow2}),Object(ne.jsx)(I.d,{fontSize:"0.75rem",marginLeft:"0.75rem",children:Object(ne.jsx)(o.b,{id:"The price is deviating quite a lot from that market price, please be careful!"})})]}),ze?Object(ne.jsx)(ae.a,{message:s.a._("Insufficient Liquidity in the Liquidity Pool to Swap"),warning:!1}):ei>3?Object(ne.jsx)(ae.a,{message:s.a._("Price impact is too high"),warning:!1}):ei>2?Object(ne.jsx)(ae.a,{message:s.a._("Price impact is high"),warning:!0}):null,pe?Object(ne.jsxs)(S.a,{gap:"md",children:[(kt===L.a.NOT_APPROVED||kt===L.a.PENDING)&&at&&(ke||ei<=3)&&Object(ne.jsx)(Y.b,{children:Object(ne.jsx)(N.h,{onClick:It,disabled:!at||kt===L.a.PENDING||ei>3&&!ke,width:"100%",children:kt===L.a.PENDING?Object(ne.jsxs)(H.b,{children:["Approving ",null===Je||void 0===Je?void 0:Je.symbol]}):"Approve "+(null===Je||void 0===Je?void 0:Je.symbol)})}),Object(ne.jsx)(N.d,{onClick:()=>{ke?Tt():lt(!0)},disabled:!at||kt!==L.a.APPROVED||ei>3&&!ke,error:!!qe[Ne]&&!!qe[Te]&&!!ue&&(!at||ei>2),children:Object(ne.jsx)(I.d,{fontSize:20,fontWeight:500,children:null!==We&&void 0!==We?We:!ue&&+et<1?s.a._("Enter amp (>=1)"):ei>3&&!ke?s.a._("Supply"):ei>2?s.a._("Supply Anyway"):s.a._("Supply")})})]}):Object(ne.jsx)(N.f,{onClick:fe,children:Object(ne.jsx)(o.b,{id:"Connect Wallet"})})]})]})})]})};function be(e){var t=e.match.params,i=t.currencyIdA,d=t.currencyIdB,f=t.pairAddress,y=Object(x.b)(),C=y.chainId,_=y.isEVM,w=Object(v.b)(i),R=Object(v.b)(d),k=Object(O.j)(w||void 0),I=Object(O.j)(R||void 0),N=!!(C&&w&&w.equals(a.WETH[C])),S=!!(C&&R&&R.equals(a.WETH[C]))||N,A=Object(g.a)(null!==w&&void 0!==w?w:void 0,null!==R&&void 0!==R?R:void 0,f),E=A.pair,T=A.pairState,P=A.noLiquidity,B=(null===E||void 0===E?void 0:E.amp)||r.a.BigInt(0),U=Object(c.useState)(0),Y=Object(n.a)(U,2),q=Y[0],D=Y[1],F=Object(h.c)().mixpanelHandler;return Object(c.useEffect)((()=>{F(h.a.ADD_LIQUIDITY_INITIATED,{token_1:null===k||void 0===k?void 0:k.symbol,token_2:null===I||void 0===I?void 0:I.symbol,amp:new a.Fraction(B).divide(r.a.BigInt(1e4)).toSignificant(5)})}),[]),_?Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsxs)(ie.i,{children:[Object(ne.jsxs)(ie.b,{children:[Object(ne.jsx)(b.a,{action:b.c.ADD,tutorialType:j.a.CLASSIC_ADD_LIQUIDITY}),Object(ne.jsxs)(ie.o,{children:[Object(ne.jsx)(ie.h,{children:Object(ne.jsx)(u.a,{activeTab:q,setActiveTab:D,singleTokenInfo:s.a._("Add liquidity to the pool by supplying a single token (either token from the token pair). We will automatically create LP tokens for you and add them to the liquidity pool - all in a single transaction")})}),Object(ne.jsxs)(ie.j,{children:[null===k||void 0===k?void 0:k.symbol," - ",null===I||void 0===I?void 0:I.symbol," ",Object(ne.jsx)(o.b,{id:"pool"})]})]}),0===q?Object(ne.jsx)(oe,{currencyIdA:i,currencyIdB:d,pairAddress:f}):Object(ne.jsx)(ue,{currencyIdA:i,currencyIdB:d,pairAddress:f})]}),E&&!P&&T!==m.a.INVALID?Object(ne.jsx)(ie.b,{style:{marginTop:"24px",padding:"0"},children:Object(ne.jsx)(p.a,{showUnwrapped:S,pair:E})}):null]})}):Object(ne.jsx)(l.a,{to:"/"})}},"./src/pages/IncreaseLiquidity/index.tsx":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return de}));var n=i("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),o=i("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=i("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),a=i("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),d=i("./node_modules/@lingui/react/esm/index.js"),r=i("./node_modules/@lingui/core/esm/index.js"),c=i("./node_modules/@kyberswap/ks-sdk-core/dist/index.js"),l=i("./node_modules/@kyberswap/ks-sdk-elastic/dist/index.js"),u=i("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),b=i("./node_modules/jsbi/dist/jsbi-umd.js"),p=i.n(b),j=i("./node_modules/react/index.js"),m=i("./node_modules/react-router/esm/react-router.js"),x=i("./node_modules/rebass/dist/index.esm.js"),v=i("./src/components/Button/index.tsx"),h=i("./src/components/Column/index.tsx"),g=i("./src/components/Copy/index.tsx"),O=i("./src/components/CurrencyInputPanel/index.tsx"),f=i("./src/components/Divider/index.tsx"),y=i("./src/components/Loader/index.tsx"),C=i("./src/components/NavigationTabs/index.tsx"),_=i("./src/components/ProAmm/ProAmmPoolInfo.tsx"),w=i("./src/components/ProAmm/ProAmmPooledTokens.tsx"),R=i("./src/components/ProAmm/ProAmmPriceRange.tsx"),k=i("./src/components/Row/index.tsx"),I=i("./src/components/TransactionConfirmationModal/index.tsx"),N=i("./src/components/Tutorial/index.tsx"),S=i("./src/components/swap/styleds.tsx"),A=i("./src/constants/tokens.ts"),E=i("./src/constants/v2.ts"),T=i("./src/hooks/index.ts"),P=i("./src/hooks/Tokens.ts"),B=i("./src/hooks/useApproveCallback.ts"),U=i("./src/hooks/useContract.ts"),Y=i("./src/hooks/usePrevious.ts"),q=i("./src/hooks/usePools.ts");var D,F=i("./src/hooks/useProAmmPositions.ts"),L=i("./src/hooks/useProAmmPreviousTicks.ts"),M=i("./src/hooks/useTheme.ts"),z=i("./src/hooks/useTransactionDeadline.ts"),W=i("./src/state/application/hooks.ts"),H=i("./src/state/mint/proamm/actions.ts"),V=i("./src/state/mint/proamm/hooks.tsx"),G=i("./src/state/multicall/hooks.ts"),Q=i("./src/state/transactions/hooks.tsx"),Z=i("./src/state/transactions/type.ts"),J=i("./src/state/user/hooks.tsx"),K=i("./src/utils/index.ts"),X=i("./src/utils/maxAmountSpend.ts"),$=i("./src/utils/wrappedCurrency.ts"),ee=i("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),te=i("./node_modules/styled-components/dist/styled-components.browser.esm.js"),ie=te.default.div.withConfig({displayName:"styled__Container",componentId:"sc-1mzg58t-0"})(["text-align:center;width:calc(100% - 24px);margin:24px auto 12px;max-width:936px;border-radius:20px;background:",";box-shadow:0px 0px 1px rgba(0,0,0,0.01),0px 4px 8px rgba(0,0,0,0.04),0px 16px 24px rgba(0,0,0,0.04),0px 24px 32px rgba(0,0,0,0.01);padding:0 20px 28px;",";"],(e=>e.theme.background),(e=>e.theme.mediaWidth.upToSmall(D||(D=Object(ee.a)(["\n    padding: 0 16px 24px;\n  "]))))),ne=te.default.div.withConfig({displayName:"styled__GridColumn",componentId:"sc-1mzg58t-1"})(["display:grid;grid-template-columns:1fr;@media only screen and (min-width:768px){grid-template-columns:1fr 1fr;}"]),oe=Object(te.default)(h.a).withConfig({displayName:"styled__FirstColumn",componentId:"sc-1mzg58t-2"})(["grid-auto-rows:min-content;padding-bottom:24px;border-bottom:1px solid ",";gap:20px;@media only screen and (min-width:768px){padding-right:24px;padding-bottom:0;border-right:1px solid ",";border-bottom:none;}"],(e=>e.theme.border),(e=>e.theme.border)),se=Object(te.default)(h.a).withConfig({displayName:"styled__SecondColumn",componentId:"sc-1mzg58t-3"})(["grid-auto-rows:min-content;padding-top:24px;gap:20px;@media only screen and (min-width:768px){padding-left:24px;padding-top:0;}"]),ae=i("./node_modules/react/jsx-runtime.js");function de(e){var t,i,b,D,ee,te,de,re,ce,le=e.match.params,ue=le.currencyIdA,be=le.currencyIdB,pe=le.feeAmount,je=le.tokenId,me=e.history,xe=Object(T.b)(),ve=xe.account,he=xe.chainId,ge=xe.isEVM,Oe=xe.networkInfo,fe=Object(T.e)().library,ye=Object(M.a)(),Ce=Object(W.y)(),_e=Object(J.c)(),we=Object(a.a)(_e,1)[0],Re=Object(Q.h)(),ke=Object(Y.a)(he);Object(j.useEffect)((()=>{he&&ke&&he!==ke&&me.push("/myPools")}),[he,ke,me]);var Ie=Object(U.o)(),Ne=Object(F.b)(je?u.a.from(je):void 0).position,Se=null===(t=Object(G.c)(je?Ie:null,"ownerOf",[je]).result)||void 0===t?void 0:t[0],Ae=Se===ve||(null===Ne||void 0===Ne?void 0:Ne.operator)===ve,Ee=!!ge&&Oe.elastic.farms.flat().includes(Object(K.s)(he,Se)),Te=function(e){var t=Object(P.b)(null===e||void 0===e?void 0:e.token0),i=Object(P.b)(null===e||void 0===e?void 0:e.token1),n=Object(q.b)(null!==t&&void 0!==t?t:void 0,null!==i&&void 0!==i?i:void 0,null===e||void 0===e?void 0:e.fee),o=Object(a.a)(n,2)[1],s=void 0;return o&&e&&(s=new l.Position({pool:o,liquidity:e.liquidity.toString(),tickLower:e.tickLower,tickUpper:e.tickUpper})),{position:s,pool:null!==o&&void 0!==o?o:void 0}}(Ne),Pe=Te.position,Be=pe&&Object.values(l.FeeAmount).includes(parseFloat(pe))?parseFloat(pe):void 0,Ue=Object(P.b)(ue),Ye=Object(P.b)(be),qe=Ue&&Ye&&Ue.wrapped.equals(Ye.wrapped)?void 0:Ye,De=Object(V.c)(),Fe=De.independentField,Le=De.typedValue,Me=Object(V.a)(null!==Ue&&void 0!==Ue?Ue:void 0,null!==qe&&void 0!==qe?qe:void 0,Be,null!==Ue&&void 0!==Ue?Ue:void 0,Pe),ze=Me.pool,We=Me.dependentField,He=Me.parsedAmounts,Ve=Me.currencyBalances,Ge=Me.position,Qe=Me.noLiquidity,Ze=Me.currencies,Je=Me.errorMessage,Ke=Me.invalidRange,Xe=Me.depositADisabled,$e=Me.depositBDisabled,et=Me.ticksAtLimit,tt=!!(he&&Ue&&Ue.isNative),it=!!(he&&Ue&&Ue.equals(c.WETH[he])),nt=!!(he&&qe&&qe.isNative),ot=!!(he&&qe&&qe.equals(c.WETH[he])),st=Object(W.v)([null===Ue||void 0===Ue?void 0:Ue.wrapped,null===qe||void 0===qe?void 0:qe.wrapped],E.c.ELASTIC),at=He[H.b.CURRENCY_A]&&st[0]?parseFloat(He[H.b.CURRENCY_A].toSignificant(6))*st[0]:0,dt=He[H.b.CURRENCY_B]&&st[1]?parseFloat(He[H.b.CURRENCY_B].toSignificant(6))*st[1]:0,rt=Object(L.a)(ze,Ge),ct=Object(V.b)(Qe),lt=ct.onFieldAInput,ut=ct.onFieldBInput,bt=!Je&&!Ke,pt=Object(j.useState)(!1),jt=Object(a.a)(pt,2),mt=jt[0],xt=jt[1],vt=Object(j.useState)(!1),ht=Object(a.a)(vt,2),gt=ht[0],Ot=ht[1],ft=Object(z.a)(),yt=Object(j.useState)(""),Ct=Object(a.a)(yt,2),_t=Ct[0],wt=Ct[1],Rt={[Fe]:Le,[We]:null!==(i=null===(b=He[We])||void 0===b?void 0:b.toSignificant(6))&&void 0!==i?i:""},kt=[H.b.CURRENCY_A,H.b.CURRENCY_B].reduce(((e,t)=>Object(s.a)(Object(s.a)({},e),{},{[t]:Object(X.b)(Ve[t])})),{}),It=Object(B.b)(He[H.b.CURRENCY_A],Oe.elastic.nonfungiblePositionManager),Nt=Object(a.a)(It,2),St=Nt[0],At=Nt[1],Et=Object(B.b)(He[H.b.CURRENCY_B],Oe.elastic.nonfungiblePositionManager),Tt=Object(a.a)(Et,2),Pt=Tt[0],Bt=Tt[1],Ut=Object(J.y)();function Yt(){return qt.apply(this,arguments)}function qt(){return(qt=Object(o.a)(Object(n.a)().mark((function e(){var t,i,o,a,d;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge&&fe&&ve&&je){e.next=2;break}return e.abrupt("return");case 2:if(Ie&&Ue&&qe){e.next=4;break}return e.abrupt("return");case 4:if(rt&&2===rt.length){e.next=6;break}return e.abrupt("return");case 6:if(!(Ge&&ve&&ft)){e.next=14;break}t=Ue.isNative?Ue:qe.isNative?qe:void 0,i=l.NonfungiblePositionManager.addCallParameters(Ge,rt,{slippageTolerance:new c.Percent(Ut[0],1e4),deadline:ft.toString(),useNative:t,tokenId:p.a.BigInt(je)}),o=i.calldata,a=i.value,d={to:Oe.elastic.nonfungiblePositionManager,data:o,value:a},Ot(!0),fe.getSigner().estimateGas(d).then((e=>{var t=Object(s.a)(Object(s.a)({},d),{},{gasLimit:Object(K.b)(e)});return fe.getSigner().sendTransaction(t).then((e=>{var t,i;Ot(!1),Re({hash:e.hash,type:Z.a.INCREASE_LIQUIDITY,summary:((null===(t=He[H.b.CURRENCY_A])||void 0===t?void 0:t.toSignificant(6))||0)+" "+(null===Ue||void 0===Ue?void 0:Ue.symbol)+" and "+((null===(i=He[H.b.CURRENCY_B])||void 0===i?void 0:i.toSignificant(6))||0)+" "+(null===qe||void 0===qe?void 0:qe.symbol),arbitrary:{token_1:null===Ue||void 0===Ue?void 0:Ue.symbol,token_2:null===qe||void 0===qe?void 0:qe.symbol}}),wt(e.hash)}))})).catch((e=>{console.error("Failed to send transaction",e),Ot(!1),4001!==(null===e||void 0===e?void 0:e.code)&&console.error(e)})),e.next=15;break;case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dt=Object(j.useCallback)((()=>{xt(!1),_t&&(lt(""),me.push("/myPools")),wt("")}),[me,lt,_t]),Ft=St!==B.a.APPROVED&&!!He[H.b.CURRENCY_A],Lt=Pt!==B.a.APPROVED&&!!He[H.b.CURRENCY_B],Mt="Supplying ".concat(Xe?"":null===(D=He[H.b.CURRENCY_A])||void 0===D?void 0:D.toSignificant(6)," ").concat(Xe?"":null===(ee=Ze[H.b.CURRENCY_A])||void 0===ee?void 0:ee.symbol," ").concat(Xe||$e?"":"and"," ").concat($e?"":null===(te=He[H.b.CURRENCY_B])||void 0===te?void 0:te.toSignificant(6)," ").concat($e?"":null===(de=Ze[H.b.CURRENCY_B])||void 0===de?void 0:de.symbol),zt=()=>{var e,t,i,n;return ve?Object(ae.jsxs)(x.b,{sx:{gap:"16px"},flexDirection:bt&&Ft&&Lt?"column":"row",children:[(St===B.a.NOT_APPROVED||St===B.a.PENDING||Pt===B.a.NOT_APPROVED||Pt===B.a.PENDING)&&bt&&Object(ae.jsxs)(k.b,{children:[Ft&&Object(ae.jsx)(v.h,{onClick:At,disabled:St===B.a.PENDING,width:Lt?"48%":"100%",children:St===B.a.PENDING?Object(ae.jsx)(S.c,{children:Object(ae.jsx)(d.b,{id:"Approving {0}",values:{0:null===(e=Ze[H.b.CURRENCY_A])||void 0===e?void 0:e.symbol}})}):Object(ae.jsx)(d.b,{id:"Approve {0}",values:{0:null===(t=Ze[H.b.CURRENCY_A])||void 0===t?void 0:t.symbol}})}),Lt&&Object(ae.jsx)(v.h,{onClick:Bt,disabled:Pt===B.a.PENDING,width:Ft?"48%":"100%",children:Pt===B.a.PENDING?Object(ae.jsx)(S.c,{children:Object(ae.jsx)(d.b,{id:"Approving {0}",values:{0:null===(i=Ze[H.b.CURRENCY_B])||void 0===i?void 0:i.symbol}})}):Object(ae.jsx)(d.b,{id:"Approve {0}",values:{0:null===(n=Ze[H.b.CURRENCY_B])||void 0===n?void 0:n.symbol}})})]}),Object(ae.jsx)(v.d,{onClick:()=>{we?Yt():xt(!0)},disabled:!bt||St!==B.a.APPROVED&&!Xe||Pt!==B.a.APPROVED&&!$e,error:!bt&&!!He[H.b.CURRENCY_A]&&!!He[H.b.CURRENCY_B]&&!1,children:Object(ae.jsx)(x.d,{fontWeight:500,children:Je||Object(ae.jsx)(d.b,{id:"Preview"})})})]}):Object(ae.jsx)(v.f,{onClick:Ce,children:Object(ae.jsx)(d.b,{id:"Connect Wallet"})})};return ge?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(I.c,{isOpen:mt,onDismiss:Dt,attemptingTxn:gt,hash:_t,content:()=>Object(ae.jsx)(I.a,{title:r.a._("Increase Liquidity"),onDismiss:Dt,topContent:()=>Pe&&Object(ae.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(ae.jsx)(_.a,{position:Pe}),Object(ae.jsx)(w.a,{liquidityValue0:He[H.b.CURRENCY_A],liquidityValue1:He[H.b.CURRENCY_B],title:r.a._("Increase Amount")}),Object(ae.jsx)(R.a,{position:Pe,ticksAtLimit:et,hideChart:!0})]}),bottomContent:()=>Object(ae.jsx)(v.h,{onClick:Yt,children:Object(ae.jsx)(x.d,{fontWeight:500,children:Object(ae.jsx)(d.b,{id:"Supply"})})})}),pendingText:Mt}),Object(ae.jsxs)(ie,{children:[Object(ae.jsx)(C.a,{action:C.c.INCREASE,showTooltip:!1,hideShare:!0,tutorialType:N.a.ELASTIC_INCREASE_LIQUIDITY}),Se&&ve&&!Ae&&!Ee?Object(ae.jsxs)(x.d,{fontSize:"12px",fontWeight:"500",paddingTop:"10px",paddingBottom:"10px",backgroundColor:ye.bg3Opacity4,color:ye.subText,style:{borderRadius:"4px",marginBottom:"1.25rem"},children:["The owner of this liquidity position is ",Object(K.w)(he,Se),Object(ae.jsx)("span",{style:{display:"inline-block"},children:Object(ae.jsx)(g.a,{toCopy:Se})})]}):Object(ae.jsx)(f.b,{style:{marginBottom:"1.25rem"}}),Pe?Object(ae.jsxs)(h.a,{gap:"md",style:{textAlign:"left"},children:[Object(ae.jsx)(_.a,{position:Pe,tokenId:je}),Object(ae.jsxs)(ne,{children:[Object(ae.jsxs)(oe,{children:[Object(ae.jsx)(w.a,{pooled:!0,liquidityValue0:c.CurrencyAmount.fromRawAmount(Object($.a)(Pe.pool.token0),Pe.amount0.quotient),liquidityValue1:c.CurrencyAmount.fromRawAmount(Object($.a)(Pe.pool.token1),Pe.amount1.quotient)}),Object(ae.jsxs)(h.a,{gap:"md",children:[Object(ae.jsx)(O.g,{value:Rt[H.b.CURRENCY_A],onUserInput:lt,onMax:()=>{var e,t;lt(null!==(e=null===(t=kt[H.b.CURRENCY_A])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},onHalf:()=>{var e,t,i;lt(null!==(e=null===(t=Ve[H.b.CURRENCY_A])||void 0===t||null===(i=t.divide(2))||void 0===i?void 0:i.toExact())&&void 0!==e?e:"")},currency:null!==(re=Ze[H.b.CURRENCY_A])&&void 0!==re?re:null,id:"add-liquidity-input-tokena",showCommonBases:!0,positionMax:"top",locked:Xe,estimatedUsd:Object(K.i)(at.toString(),!0)||void 0,disableCurrencySelect:!tt&&!it,isSwitchMode:tt||it,onSwitchCurrency:()=>{he&&me.replace("/elastic/increase/".concat(tt?c.WETH[he].address:A.i[he].symbol,"/").concat(be,"/").concat(Be,"/").concat(je))}}),Object(ae.jsx)(O.g,{value:Rt[H.b.CURRENCY_B],onUserInput:ut,onMax:()=>{var e,t;ut(null!==(e=null===(t=kt[H.b.CURRENCY_B])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},onHalf:()=>{var e,t;ut(null!==(e=null===(t=Ve[H.b.CURRENCY_B])||void 0===t?void 0:t.divide(2).toExact())&&void 0!==e?e:"")},currency:null!==(ce=Ze[H.b.CURRENCY_B])&&void 0!==ce?ce:null,id:"add-liquidity-input-tokenb",showCommonBases:!0,positionMax:"top",locked:$e,estimatedUsd:Object(K.i)(dt.toString(),!0)||void 0,disableCurrencySelect:!nt&&!ot,isSwitchMode:nt||ot,onSwitchCurrency:()=>{he&&me.replace("/elastic/increase/".concat(ue,"/").concat(nt?c.WETH[he].address:A.i[he].symbol,"/").concat(Be,"/").concat(je))}})]})]}),Object(ae.jsxs)(se,{children:[Object(ae.jsx)(R.a,{position:Pe,ticksAtLimit:et}),Object(ae.jsx)(zt,{})]})]})]}):Object(ae.jsx)(y.a,{})]})]}):Object(ae.jsx)(m.a,{to:"/"})}}}]);
//# sourceMappingURL=add-liquidity-page.022ec78b.chunk.js.map